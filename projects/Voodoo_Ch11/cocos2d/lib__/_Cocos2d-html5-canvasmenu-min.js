var cc=cc=cc||{};
(function(){var a=!1,b=/\b_super\b/;cc.Class=function(){};cc.Class.extend=function(c){function d(){!a&&this.ctor&&this.ctor.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var h in c)f[h]="function"==typeof c[h]&&"function"==typeof e[h]&&b.test(c[h])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);this._super=c;return d}}(h,c[h]):c[h];d.prototype=f;d.prototype.constructor=d;d.extend=arguments.callee;d.implement=function(a){for(var b in a)f[b]=
a[b]};return d}})();cc.clone=function(a){var b=a instanceof Array?[]:{},c;for(c in a){var d=a[c];b[c]=d instanceof Array?cc.clone(d):"object"==typeof d&&!(d instanceof cc.Node)&&!(d instanceof HTMLElement)?cc.clone(d):d}return b};cc.Log=function(a){console.log(a)};cc.MessageBox=function(a){console.log(a)};0==cc.COCOS2D_DEBUG?(cc.Log=function(){},cc.LogINFO=function(){},cc.LogERROR=function(){}):1==cc.COCOS2D_DEBUG?(cc.LogINFO=cc.Log,cc.LogERROR=function(){}):1<cc.COCOS2D_DEBUG&&(cc.LogINFO=cc.Log,cc.LogERROR=cc.Log);
cc.Assert=cc._DEBUG?function(a,b){typeof console.assert=="function"?console.assert(a,b):a||b&&alert(b)}:function(){};cc.LANGUAGE_ENGLISH=0;cc.LANGUAGE_CHINESE=1;cc.LANGUAGE_FRENCH=2;cc.LANGUAGE_ITALIAN=3;cc.LANGUAGE_GERMAN=4;cc.LANGUAGE_SPANISH=5;cc.LANGUAGE_RUSSIAN=6;cc.timeval=cc.Class.extend({tv_sec:0,tv_usec:0});cc.Time={};cc.Time.gettimeofdayCocos2d=function(){var a=new cc.timeval,b=Date.now();a.tv_usec=1E3*(b%1E3);a.tv_sec=Math.floor(b/1E3);return a};cc.Time.now=function(){return Date.now()};
cc.Time.timersubCocos2d=function(a,b){if(!c||!a||!b)return-1;if(a instanceof cc.timeval&&b instanceof cc.timeval){var c=new cc.timeval;c.tv_sec=b.tv_sec-a.tv_sec;c.tv_usec=b.tv_usec-a.tv_usec;b.tv_usec<a.tv_usec&&(c.tv_usec+=1E6,c.tv_sec--);return c}if(!isNaN(a)&&!isNaN(b))return b-a};cc.Codec={name:"Jacob__Codec"};cc.unzip=function(){return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip,arguments)};cc.unzipBase64=function(){var a=cc.Codec.Base64.decode.apply(cc.Codec.Base64,arguments);return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip,[a])};cc.unzipBase64AsArray=function(a,b){var b=b||1,c=this.unzipBase64(a),d=[],e,f,h;e=0;for(h=c.length/b;e<h;e++){d[e]=0;for(f=b-1;0<=f;--f)d[e]+=c.charCodeAt(e*b+f)<<8*f}return d};
cc.unzipAsArray=function(a,b){var b=b||1,c=this.unzip(a),d=[],e,f,h;e=0;for(h=c.length/b;e<h;e++){d[e]=0;for(f=b-1;0<=f;--f)d[e]+=c.charCodeAt(e*b+f)<<8*f}return d};cc.Codec.Base64={name:"Jacob__Codec__Base64"};cc.Codec.Base64._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
cc.Codec.Base64.decode=function(a){for(var b=[],c,d,e,f,h,g=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");g<a.length;)c=this._keyStr.indexOf(a.charAt(g++)),d=this._keyStr.indexOf(a.charAt(g++)),f=this._keyStr.indexOf(a.charAt(g++)),h=this._keyStr.indexOf(a.charAt(g++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|h,b.push(String.fromCharCode(c)),64!=f&&b.push(String.fromCharCode(d)),64!=h&&b.push(String.fromCharCode(e));return b=b.join("")};
cc.Codec.Base64.decodeAsArray=function(a,b){var c=this.decode(a),d=[],e,f,h;e=0;for(h=c.length/b;e<h;e++){d[e]=0;for(f=b-1;0<=f;--f)d[e]+=c.charCodeAt(e*b+f)<<8*f}return d};cc.Codec.GZip=function(a){this.data=a;this.debug=!1;this.gpflags=void 0;this.files=0;this.unzipped=[];this.buf32k=Array(32768);this.bIdx=0;this.modeZIP=!1;this.bytepos=0;this.bb=1;this.bits=0;this.nameBuf=[];this.fileout=void 0;this.literalTree=Array(cc.Codec.GZip.LITERALS);this.distanceTree=Array(32);this.treepos=0;this.Places=null;this.len=0;this.fpos=Array(17);this.fpos[0]=0;this.fmax=this.flens=void 0};cc.Codec.GZip.gunzip=function(a){return(new cc.Codec.GZip(a)).gunzip()[0][0]};
cc.Codec.GZip.HufNode=function(){this.b1=this.b0=0;this.jump=null;this.jumppos=-1};cc.Codec.GZip.LITERALS=288;cc.Codec.GZip.NAMEMAX=256;
cc.Codec.GZip.bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,
97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255];
cc.Codec.GZip.cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];cc.Codec.GZip.cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99];cc.Codec.GZip.cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];cc.Codec.GZip.cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];cc.Codec.GZip.border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];
cc.Codec.GZip.prototype.gunzip=function(){this.outputArr=[];this.nextFile();return this.unzipped};cc.Codec.GZip.prototype.readByte=function(){this.bits+=8;return this.bytepos<this.data.length?this.data.charCodeAt(this.bytepos++):-1};cc.Codec.GZip.prototype.byteAlign=function(){this.bb=1};cc.Codec.GZip.prototype.readBit=function(){var a;this.bits++;a=this.bb&1;this.bb>>=1;0==this.bb&&(this.bb=this.readByte(),a=this.bb&1,this.bb=this.bb>>1|128);return a};
cc.Codec.GZip.prototype.readBits=function(a){for(var b=0,c=a;c--;)b=b<<1|this.readBit();a&&(b=cc.Codec.GZip.bitReverse[b]>>8-a);return b};cc.Codec.GZip.prototype.flushBuffer=function(){this.bIdx=0};cc.Codec.GZip.prototype.addBuffer=function(a){this.buf32k[this.bIdx++]=a;this.outputArr.push(String.fromCharCode(a));32768==this.bIdx&&(this.bIdx=0)};
cc.Codec.GZip.prototype.IsPat=function(){for(;;){if(this.fpos[this.len]>=this.fmax)return-1;if(this.flens[this.fpos[this.len]]==this.len)return this.fpos[this.len]++;this.fpos[this.len]++}};
cc.Codec.GZip.prototype.Rec=function(){var a=this.Places[this.treepos],b;if(17==this.len)return-1;this.treepos++;this.len++;b=this.IsPat();if(0<=b)a.b0=b;else if(a.b0=32768,this.Rec())return-1;b=this.IsPat();if(0<=b)a.b1=b,a.jump=null;else if(a.b1=32768,a.jump=this.Places[this.treepos],a.jumppos=this.treepos,this.Rec())return-1;this.len--;return 0};
cc.Codec.GZip.prototype.CreateTree=function(a,b,c){this.Places=a;this.treepos=0;this.flens=c;this.fmax=b;for(a=0;17>a;a++)this.fpos[a]=0;this.len=0;return this.Rec()?-1:0};cc.Codec.GZip.prototype.DecodeValue=function(a){for(var b,c,d=0,e=a[d];;)if(b=this.readBit()){if(!(e.b1&32768))return e.b1;e=e.jump;b=a.length;for(c=0;c<b;c++)if(a[c]===e){d=c;break}}else{if(!(e.b0&32768))return e.b0;d++;e=a[d]}return-1};
cc.Codec.GZip.prototype.DeflateLoop=function(){var a,b,c,d,e;do if(a=this.readBit(),c=this.readBits(2),0==c){this.byteAlign();c=this.readByte();c|=this.readByte()<<8;b=this.readByte();b|=this.readByte()<<8;for((c^~b)&65535&&document.write("BlockLen checksum mismatch\n");c--;)b=this.readByte(),this.addBuffer(b)}else if(1==c)for(;;)if(c=cc.Codec.GZip.bitReverse[this.readBits(7)]>>1,23<c?(c=c<<1|this.readBit(),199<c?(c-=128,c=c<<1|this.readBit()):(c-=48,143<c&&(c+=136))):c+=256,256>c)this.addBuffer(c);
else if(256==c)break;else{var f;c-=257;e=this.readBits(cc.Codec.GZip.cplext[c])+cc.Codec.GZip.cplens[c];c=cc.Codec.GZip.bitReverse[this.readBits(5)]>>3;8<cc.Codec.GZip.cpdext[c]?(f=this.readBits(8),f|=this.readBits(cc.Codec.GZip.cpdext[c]-8)<<8):f=this.readBits(cc.Codec.GZip.cpdext[c]);f+=cc.Codec.GZip.cpdist[c];for(c=0;c<e;c++)b=this.buf32k[this.bIdx-f&32767],this.addBuffer(b)}else if(2==c){var h=Array(320);b=257+this.readBits(5);f=1+this.readBits(5);d=4+this.readBits(4);for(c=0;19>c;c++)h[c]=0;
for(c=0;c<d;c++)h[cc.Codec.GZip.border[c]]=this.readBits(3);e=this.distanceTree.length;for(d=0;d<e;d++)this.distanceTree[d]=new cc.Codec.GZip.HufNode;if(this.CreateTree(this.distanceTree,19,h,0))return this.flushBuffer(),1;e=b+f;d=0;for(var g=-1;d<e;)if(g++,c=this.DecodeValue(this.distanceTree),16>c)h[d++]=c;else if(16==c){var i;c=3+this.readBits(2);if(d+c>e)return this.flushBuffer(),1;for(i=d?h[d-1]:0;c--;)h[d++]=i}else{c=17==c?3+this.readBits(3):11+this.readBits(7);if(d+c>e)return this.flushBuffer(),
1;for(;c--;)h[d++]=0}e=this.literalTree.length;for(d=0;d<e;d++)this.literalTree[d]=new cc.Codec.GZip.HufNode;if(this.CreateTree(this.literalTree,b,h,0))return this.flushBuffer(),1;e=this.literalTree.length;for(d=0;d<e;d++)this.distanceTree[d]=new cc.Codec.GZip.HufNode;c=[];for(d=b;d<h.length;d++)c[d-b]=h[d];if(this.CreateTree(this.distanceTree,f,c,0))return this.flushBuffer(),1;for(;;)if(c=this.DecodeValue(this.literalTree),256<=c){c-=256;if(0==c)break;c--;e=this.readBits(cc.Codec.GZip.cplext[c])+
cc.Codec.GZip.cplens[c];c=this.DecodeValue(this.distanceTree);8<cc.Codec.GZip.cpdext[c]?(f=this.readBits(8),f|=this.readBits(cc.Codec.GZip.cpdext[c]-8)<<8):f=this.readBits(cc.Codec.GZip.cpdext[c]);for(f+=cc.Codec.GZip.cpdist[c];e--;)b=this.buf32k[this.bIdx-f&32767],this.addBuffer(b)}else this.addBuffer(c)}while(!a);this.flushBuffer();this.byteAlign();return 0};cc.Codec.GZip.prototype.unzipFile=function(a){var b;this.gunzip();for(b=0;b<this.unzipped.length;b++)if(this.unzipped[b][1]==a)return this.unzipped[b][0]};
cc.Codec.GZip.prototype.nextFile=function(){this.outputArr=[];this.modeZIP=!1;var a=[];a[0]=this.readByte();a[1]=this.readByte();120==a[0]&&218==a[1]&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),"geonext.gxt"],this.files++);31==a[0]&&139==a[1]&&(this.skipdir(),this.unzipped[this.files]=[this.outputArr.join(""),"file"],this.files++);if(80==a[0]&&75==a[1]&&(this.modeZIP=!0,a[2]=this.readByte(),a[3]=this.readByte(),3==a[2]&&4==a[3])){a[0]=this.readByte();a[1]=this.readByte();
this.gpflags=this.readByte();this.gpflags|=this.readByte()<<8;a=this.readByte();a|=this.readByte()<<8;this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();var b=this.readByte(),b=b|this.readByte()<<8,c=this.readByte(),c=c|this.readByte()<<8,d=0;for(this.nameBuf=[];b--;){var e=this.readByte();"/"==e|":"==e?d=0:d<cc.Codec.GZip.NAMEMAX-1&&(this.nameBuf[d++]=String.fromCharCode(e))}this.fileout||
(this.fileout=this.nameBuf);for(var d=0;d<c;)this.readByte(),d++;8==a&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),this.nameBuf.join("")],this.files++);this.skipdir()}};
cc.Codec.GZip.prototype.skipdir=function(){var a=[],b;this.gpflags&8&&(a[0]=this.readByte(),a[1]=this.readByte(),a[2]=this.readByte(),a[3]=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte());this.modeZIP&&this.nextFile();a[0]=this.readByte();if(8!=a[0])return 0;this.gpflags=this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();this.readByte();if(this.gpflags&4){a[0]=
this.readByte();a[2]=this.readByte();this.len=a[0]+256*a[1];for(a=0;a<this.len;a++)this.readByte()}if(this.gpflags&8){a=0;for(this.nameBuf=[];b=this.readByte();){if("7"==b||":"==b)a=0;a<cc.Codec.GZip.NAMEMAX-1&&(this.nameBuf[a++]=b)}}if(this.gpflags&16)for(;this.readByte(););this.gpflags&2&&(this.readByte(),this.readByte());this.DeflateLoop();this.readByte();this.readByte();this.readByte();this.readByte();this.modeZIP&&this.nextFile()};cc.PI=Math.PI;cc.RAD=cc.PI/180;cc.DEG=180/cc.PI;cc.SWAP=function(a,b,c){if("object"==typeof c&&"undefined"!=typeof c.x&&"undefined"!=typeof c.y){var d=c[a];c[a]=c[b];c[b]=d}else cc.Assert(!1,"CC_SWAP is being modified from original macro, please check usage")};cc.RANDOM_MINUS1_1=function(){return 2*(Math.random()-0.5)};cc.RANDOM_0_1=function(){return Math.random()};cc.DEGREES_TO_RADIANS=function(a){return a*cc.RAD};cc.RADIANS_TO_DEGREES=function(a){return a*cc.DEG};
cc.BLEND_SRC=cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA?1:770;cc.BLEND_DST=771;cc.ENABLE_DEFAULT_GL_STATES=function(){};cc.DISABLE_DEFAULT_GL_STATES=function(){};cc.FLT_EPSILON=1.192092896E-7;cc.CONTENT_SCALE_FACTOR=cc.IS_RETINA_DISPLAY_SUPPORTED?function(){return cc.Director.sharedDirector().getContentScaleFactor()}:function(){return 1};
cc.RECT_PIXELS_TO_POINTS=cc.IS_RETINA_DISPLAY_SUPPORTED?function(a){return cc.RectMake(a.origin.x/cc.CONTENT_SCALE_FACTOR(),a.origin.y/cc.CONTENT_SCALE_FACTOR(),a.size.width/cc.CONTENT_SCALE_FACTOR(),a.size.height/cc.CONTENT_SCALE_FACTOR())}:function(a){return a};
cc.RECT_POINTS_TO_PIXELS=cc.IS_RETINA_DISPLAY_SUPPORTED?function(a){return cc.RectMake(a.origin.x*cc.CONTENT_SCALE_FACTOR(),a.origin.y*cc.CONTENT_SCALE_FACTOR(),a.size.width*cc.CONTENT_SCALE_FACTOR(),a.size.height*cc.CONTENT_SCALE_FACTOR())}:function(a){return a};cc.ENGINE_VERSION="Cocos2d-html5-v0.5.0-alpha2";cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL=0;cc.FONT_LABEL_SUPPORT=1;cc.DIRECTOR_FAST_FPS=1;cc.DIRECTOR_FPS_INTERVAL=0.5;cc.DIRECTOR_DISPATCH_FAST_EVENTS=0;cc.DIRECTOR_MAC_USE_DISPLAY_LINK_THREAD=1;cc.COCOSNODE_RENDER_SUBPIXEL=1;cc.SPRITEBATCHNODE_RENDER_SUBPIXEL=1;cc.USES_VBO=1;cc.NODE_TRANSFORM_USING_AFFINE_MATRIX=1;cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA=1;cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP=0;cc.TEXTURE_NPOT_SUPPORT=0;cc.RETINA_DISPLAY_SUPPORT=1;
cc.RETINA_DISPLAY_FILENAME_SUFFIX="-hd";cc.USE_LA88_LABELS_ON_NEON_ARCH=0;cc.SPRITE_DEBUG_DRAW=0;cc.SPRITEBATCHNODE_DEBUG_DRAW=0;cc.LABELBMFONT_DEBUG_DRAW=0;cc.LABELATLAS_DEBUG_DRAW=0;cc.ENABLE_PROFILERS=0;cc.IS_RETINA_DISPLAY_SUPPORTED=1;cc.DEFAULT_ENGINE=cc.ENGINE_VERSION+"-canvas";cc.SAX_NONE=0;cc.SAX_KEY=1;cc.SAX_DICT=2;cc.SAX_INT=3;cc.SAX_REAL=4;cc.SAX_STRING=5;cc.SAX_ARRAY=6;cc.FileUtils={};cc.FileUtils.getFileData=function(){};cc.FileUtils.getFileDataFromZip=function(){};cc.FileUtils.ccRemoveHDSuffixFromFile=function(){};cc.popupNotify=!0;cc.FileUtils.fullPathFromRelativePath=function(a){return a};cc.FileUtils.fullPathFromRelativeFile=function(a,b){var c;if(a)return c=b.substring(0,b.lastIndexOf("/")+1),c+a;c=b.substring(0,b.lastIndexOf("."));return c+".png"};
cc.FileUtils.setResourcePath=function(){};cc.FileUtils.dictionaryWithContentsOfFile=function(a){return this.rootDict=cc.SAXParser.shareParser().parse(a)};cc.FileUtils.dictionaryWithContentsOfFileThreadSafe=function(a){return(new cc.DictMaker).dictionaryWithContentsOfFile(a)};cc.FileUtils.getWriteablePath=function(){};cc.FileUtils.setIsPopupNotify=function(a){cc.popupNotify=a};cc.FileUtils.getIsPopupNotify=function(){return cc.popupNotify};
cc.DictMaker=cc.Class.extend({rootDict:[],dictionaryWithContentsOfFile:function(a){return this.rootDict=cc.SAXParser.shareParser().parse(a)}});cc.Color3B=function(a,b,c){switch(arguments.length){case 0:this.b=this.g=this.r=0;case 1:a&&a instanceof cc.Color3B?(this.r=a.r||0,this.g=a.g||0,this.b=a.b||0):this.b=this.g=this.r=0;break;case 3:this.r=a||0;this.g=b||0;this.b=c||0;break;default:throw"unknown argument type";}};cc.ccc3=function(a,b,c){return new cc.Color3B(a,b,c)};cc.WHITE=function(){return new cc.Color3B(255,255,255)};cc.YELLOW=function(){return new cc.Color3B(255,255,0)};cc.BLUE=function(){return new cc.Color3B(0,0,255)};
cc.GREEN=function(){return new cc.Color3B(0,255,0)};cc.RED=function(){return new cc.Color3B(255,0,0)};cc.MAGENTA=function(){return new cc.Color3B(255,0,255)};cc.BLACK=function(){return new cc.Color3B(0,0,0)};cc.ORANGE=function(){return new cc.Color3B(255,127,0)};cc.GRAY=function(){return new cc.Color3B(166,166,166)};cc.Color4B=function(a,b,c,d){this.r=a;this.g=b;this.b=c;this.a=d};cc.ccc4=function(a,b,c,d){return new cc.Color4B(a,b,c,d)};
cc.Color4F=function(a,b,c,d){this.r=a;this.g=b;this.b=c;this.a=d};cc.c4FFromccc3B=function(a){return new cc.Color4F(a.r/255,a.g/255,a.b/255,1)};cc.c4FFromccc4B=function(a){return new cc.Color4F(a.r/255,a.g/255,a.b/255,a.a/255)};cc.c4FEqual=function(a,b){return a.r==b.r&&a.g==b.g&&a.b==b.b&&a.a==b.a};cc.Vertex2F=function(a,b){this.x=a||0;this.y=b||0};cc.Vertex2=function(a,b){return new cc.Vertex2F(a,b)};cc.Vertex3F=function(a,b,c){this.x=a||0;this.y=b||0;this.Z=c||0};
cc.vertex3=function(a,b,c){return new cc.Vertex3F(a,b,c)};cc.Tex2F=function(a,b){this.u=a||0;this.v=b||0};cc.tex2=function(a,b){return new cc.Tex2F(a,b)};cc.PointSprite=function(a,b,c){this.pos=a||new cc.Vertex2F(0,0);this.color=b||new cc.Color4B(0,0,0,0);this.size=c||0};cc.Quad2=function(a,b,c,d){this.tl=a||new cc.Vertex2F(0,0);this.tr=b||new cc.Vertex2F(0,0);this.bl=c||new cc.Vertex2F(0,0);this.br=d||new cc.Vertex2F(0,0)};
cc.Quad3=function(a,b,c,d){this.bl=a||new cc.Vertex3F(0,0,0);this.br=b||new cc.Vertex3F(0,0,0);this.tl=c||new cc.Vertex3F(0,0,0);this.tr=d||new cc.Vertex3F(0,0,0)};cc.GridSize=function(a,b){this.x=a;this.y=b};cc.ccg=function(a,b){return new cc.GridSize(a,b)};cc.V2F_C4B_T2F=function(a,b,c){this.vertices=a||new cc.Vertex2F(0,0);this.colors=b||new cc.Color4B(0,0,0,0);this.texCoords=c||new cc.Tex2F(0,0)};
cc.V2F_C4F_T2F=function(a,b,c){this.vertices=a||new cc.Vertex2F(0,0);this.colors=b||new cc.Color4F(0,0,0,0);this.texCoords=c||new cc.Tex2F(0,0)};cc.V3F_C4B_T2F=function(a,b,c){this.vertices=a||new cc.Vertex3F(0,0,0);this.colors=b||new cc.Color4B(0,0,0,0);this.texCoords=c||new cc.Tex2F(0,0)};cc.V2F_C4B_T2F_Quad=function(a,b,c,d){this.bl=a||new cc.V2F_C4B_T2F;this.br=b||new cc.V2F_C4B_T2F;this.tl=c||new cc.V2F_C4B_T2F;this.tr=d||new cc.V2F_C4B_T2F};
cc.V2F_C4B_T2F_QuadZero=function(){return new cc.V2F_C4B_T2F_Quad(new cc.V2F_C4B_T2F(new cc.Vertex2F(0,0),new cc.Color4B(0,0,0,255),new cc.Tex2F(0,0)),new cc.V2F_C4B_T2F(new cc.Vertex2F(0,0),new cc.Color4B(0,0,0,255),new cc.Tex2F(0,0)),new cc.V2F_C4B_T2F(new cc.Vertex2F(0,0),new cc.Color4B(0,0,0,255),new cc.Tex2F(0,0)),new cc.V2F_C4B_T2F(new cc.Vertex2F(0,0),new cc.Color4B(0,0,0,255),new cc.Tex2F(0,0)))};
cc.V3F_C4B_T2F_Quad=function(a,b,c,d){this.tl=a||new cc.V3F_C4B_T2F;this.bl=b||new cc.V3F_C4B_T2F;this.tr=c||new cc.V3F_C4B_T2F;this.br=d||new cc.V3F_C4B_T2F};
cc.V3F_C4B_T2F_QuadZero=function(){return new cc.V3F_C4B_T2F_Quad(new cc.V3F_C4B_T2F(new cc.Vertex3F(0,0,0),new cc.Color4B(0,0,0,255),new cc.Tex2F(0,0)),new cc.V3F_C4B_T2F(new cc.Vertex3F(0,0,0),new cc.Color4B(0,0,0,255),new cc.Tex2F(0,0)),new cc.V3F_C4B_T2F(new cc.Vertex3F(0,0,0),new cc.Color4B(0,0,0,255),new cc.Tex2F(0,0)),new cc.V3F_C4B_T2F(new cc.Vertex3F(0,0,0),new cc.Color4B(0,0,0,255),new cc.Tex2F(0,0)))};
cc.V2F_C4F_T2F_Quad=function(a,b,c,d){this.bl=a||new cc.V2F_C4F_T2F;this.br=b||new cc.V2F_C4F_T2F;this.tl=c||new cc.V2F_C4F_T2F;this.tr=d||new cc.V2F_C4F_T2F};cc.BlendFunc=function(a,b){this.src=a;this.dst=b};cc.TEXT_ALIGNMENT_LEFT=0;cc.TEXT_ALIGNMENT_CENTER=1;cc.TEXT_ALIGNMENT_RIGHT=2;cc.Point=function(a,b){this.x=a||0;this.y=b||0};cc.Point.CCPointEqualToPoint=function(a,b){return a.x==b.x&&a.y==b.y};cc.Size=function(a,b){this.width=a||0;this.height=b||0};cc.Size.CCSizeEqualToSize=function(a,b){return a.width==b.width&&a.height==b.height};
cc.Rect=function(a,b,c,d){switch(arguments.length){case 0:this.origin=new cc.Point(0,0);this.size=new cc.Size(0,0);break;case 1:if(a)if(a instanceof cc.Rect)this.origin=new cc.Point(a.origin.x,a.origin.y),this.size=new cc.Size(a.size.width,a.size.height);else throw"unknown argument type";else this.origin=new cc.Point(0,0),this.size=new cc.Size(0,0);break;case 2:this.origin=a?new cc.Point(a.x,a.y):new cc.Point(0,0);this.size=b?new cc.Size(b.width,b.height):new cc.Size(0,0);break;case 4:this.origin=
new cc.Point(a||0,b||0);this.size=new cc.Size(c||0,d||0);break;default:throw"unknown argument type";}};cc.Rect.CCRectEqualToRect=function(a,b){return cc.Point.CCPointEqualToPoint(a.origin,b.origin)&&cc.Size.CCSizeEqualToSize(a.size,b.size)};cc.Rect.CCRectGetMaxX=function(a){return a.origin.x+a.size.width};cc.Rect.CCRectGetMidX=function(a){return(a.origin.x+a.size.width)/2};cc.Rect.CCRectGetMinX=function(a){return a.origin.x};cc.Rect.CCRectGetMaxY=function(a){return a.origin.y+a.size.height};
cc.Rect.CCRectGetMidY=function(a){return a.origin.y+a.size.height/2};cc.Rect.CCRectGetMinY=function(a){return a.origin.y};cc.Rect.CCRectContainsPoint=function(a,b){var c=!1;b.x>=cc.Rect.CCRectGetMinX(a)&&(b.x<=cc.Rect.CCRectGetMaxX(a)&&b.y>=cc.Rect.CCRectGetMinY(a)&&b.y<=cc.Rect.CCRectGetMaxY(a))&&(c=!0);return c};
cc.Rect.CCRectIntersectsRect=function(a,b){return!(cc.Rect.CCRectGetMaxX(a)<cc.Rect.CCRectGetMinX(b)||cc.Rect.CCRectGetMaxX(b)<cc.Rect.CCRectGetMinX(a)||cc.Rect.CCRectGetMaxY(a)<cc.Rect.CCRectGetMinY(b)||cc.Rect.CCRectGetMaxY(b)<cc.Rect.CCRectGetMinY(a))};cc.Rect.CCRectOverlapsRect=function(a,b){return a.origin.x+a.size.width<b.origin.x||b.origin.x+b.size.width<a.origin.x||a.origin.y+a.size.height<b.origin.y||b.origin.y+b.size.height<a.origin.y?!1:!0};
cc.Rect.CCRectUnion=function(a,b){var c=new cc.Rect(0,0,0,0);c.origin.x=Math.min(a.origin.x,b.origin.x);c.origin.y=Math.min(a.origin.y,b.origin.y);c.size.width=Math.max(a.origin.x+a.size.width,b.origin.x+b.size.width)-c.origin.x;c.size.height=Math.max(a.origin.y+a.size.height,b.origin.y+b.size.height)-c.origin.y;return c};
cc.Rect.CCRectIntersection=function(a,b){var c=new cc.Rect(Math.max(cc.Rect.CCRectGetMinX(a),cc.Rect.CCRectGetMinX(b)),Math.max(cc.Rect.CCRectGetMinY(a),cc.Rect.CCRectGetMinY(b)),0,0);c.size.width=Math.min(cc.Rect.CCRectGetMaxX(a),cc.Rect.CCRectGetMaxX(b))-cc.Rect.CCRectGetMinX(c);c.size.height=Math.min(cc.Rect.CCRectGetMaxY(a),cc.Rect.CCRectGetMaxY(b))-cc.Rect.CCRectGetMinY(c);return c};cc.PointMake=function(a,b){return new cc.Point(a,b)};cc.SizeMake=function(a,b){return new cc.Size(a,b)};
cc.RectMake=function(a,b,c,d){return new cc.Rect(a,b,c,d)};cc.PointZero=function(){return new cc.Point(0,0)};cc.SizeZero=function(){return new cc.Size(0,0)};cc.RectZero=function(){return new cc.Rect(0,0,0,0)};cc.Set=cc.Class.extend({ctor:function(a){this._set=a?Object.create(a._set):[]},copy:function(){return new this.Set(this)},mutableCopy:function(){return this.copy()},count:function(){return this._set.length},addObject:function(a){this._set.push(a)},removeObject:function(a){for(var b=0,c=0,d=0;c<this._set.length;c++)this._set[c]!=a&&(this._set[d++]=this._set[c],b++);array.length=b},containsObject:function(a){return!0==a in this._set?!0:!1},anyObject:function(){return 0<this._set.length?this._set[0]:
null},_set:null});cc.NSMutableSet=cc.Set;cc.splitWithForm=function(a,b){if(a&&0!=a.length){var c=a.indexOf("{"),d=a.indexOf("}");if(!(-1==c||-1==d)&&!(c>d))if(c=a.substr(c+1,d-c-1),0!=c.length){var d=c.indexOf("{"),e=c.indexOf("}");-1!=d||-1!=e||(b=c.split(","))}}return b};
cc.RectFromString=function(a){var b=cc.RectZero();if(a){var c=a.indexOf("{")+1,d=a.lastIndexOf("}",a.length);-1==c||-1==d||(a=a.substring(c,d),c=a.indexOf("}"),-1!=c&&(c=a.indexOf(",",c),-1!=c&&(b=a.substr(0,c),a=a.substr(c+1,a.length-c),c=cc.splitWithForm(b.toString()),b=cc.splitWithForm(a.toString()),a=parseFloat(c[0]),c=parseFloat(c[1]),d=parseFloat(b[0]),b=parseFloat(b[1]),b=cc.RectMake(a,c,d,b))))}return b};
cc.PointFromString=function(a){var b=cc.PointZero();try{if(""==a)return b;var c=cc.splitWithForm(a),d=parseFloat(c[0]),e=parseFloat(c[1]),b=cc.PointMake(d,e)}catch(f){}return b};cc.SizeFromString=function(a){var b=cc.SizeZero();try{if(""==a)return b;var c=cc.splitWithForm(a),d=parseFloat(c[0]),e=parseFloat(c[1]),b=cc.SizeMake(d,e)}catch(f){}return b};cc.AffineTransform=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f};cc.__AffineTransformMake=function(a,b,c,d,e,f){return new cc.AffineTransform(a,b,c,d,e,f)};cc.AffineTransformMake=function(a,b,c,d,e,f){return new cc.AffineTransform(a,b,c,d,e,f)};cc.__PointApplyAffineTransform=function(a,b){var c=new cc.Point;c.x=b.a*a.x+b.c*a.y+b.tx;c.y=b.b*a.x+b.d*a.y+b.ty;return c};cc.PointApplyAffineTransform=function(a,b){return cc.__PointApplyAffineTransform(a,b)};
cc.__SizeApplyAffineTransform=function(a,b){var c=new cc.Size;c.width=b.a*a.width+b.c*a.height;c.height=b.b*a.width+b.d*a.height;return c};cc.SizeApplyAffineTransform=function(a,b){return cc.__SizeApplyAffineTransform(a,b)};cc.AffineTransformMakeIdentity=function(){return cc.__AffineTransformMake(1,0,0,1,0,0)};cc.AffineTransformIdentity=function(){return cc.AffineTransformMakeIdentity()};
cc.RectApplyAffineTransform=function(a,b){var c=cc.Rect.CCRectGetMinY(a),d=cc.Rect.CCRectGetMinX(a),e=cc.Rect.CCRectGetMaxX(a),f=cc.Rect.CCRectGetMaxY(a),h=cc.PointApplyAffineTransform(cc.PointMake(d,c),b),c=cc.PointApplyAffineTransform(cc.PointMake(e,c),b),d=cc.PointApplyAffineTransform(cc.PointMake(d,f),b),g=cc.PointApplyAffineTransform(cc.PointMake(e,f),b),e=Math.min(Math.min(h.x,c.x),Math.min(d.x,g.x)),f=Math.max(Math.max(h.x,c.x),Math.max(d.x,g.x)),i=Math.min(Math.min(h.y,c.y),Math.min(d.y,g.y)),
h=Math.max(Math.max(h.y,c.y),Math.max(d.y,g.y));return cc.RectMake(e,i,f-e,h-i)};cc.AffineTransformTranslate=function(a,b,c){return cc.__AffineTransformMake(a.a,a.b,a.c,a.d,a.tx+a.a*b+a.c*c,a.ty+a.b*b+a.d*c)};cc.AffineTransformScale=function(a,b,c){return cc.__AffineTransformMake(a.a*b,a.b*b,a.c*c,a.d*c,a.tx,a.ty)};cc.AffineTransformRotate=function(a,b){var c=Math.sin(b),d=Math.cos(b);return cc.__AffineTransformMake(a.a*d+a.c*c,a.b*d+a.d*c,a.c*d-a.a*c,a.d*d-a.b*c,a.tx,a.ty)};
cc.AffineTransformConcat=function(a,b){return cc.__AffineTransformMake(a.a*b.a+a.b*b.c,a.a*b.b+a.b*b.d,a.c*b.a+a.d*b.c,a.c*b.b+a.d*b.d,a.tx*b.a+a.ty*b.c+b.tx,a.tx*b.b+a.ty*b.d+b.ty)};cc.AffineTransformEqualToTransform=function(a,b){return a.a==b.a&&a.b==b.b&&a.c==b.c&&a.d==b.d&&a.tx==b.tx&&a.ty==b.ty};cc.AffineTransformInvert=function(a){var b=1/(a.a*a.d-a.b*a.c);return cc.__AffineTransformMake(b*a.d,-b*a.b,-b*a.c,b*a.a,b*(a.c*a.ty-a.d*a.tx),b*(a.b*a.tx-a.a*a.ty))};cc.CCPOINT_EPSILON=parseFloat("1.192092896e-07F");cc.ccp=function(a,b){return new cc.Point(a,b)};cc.ccpNeg=function(a){return new cc.Point(-a.x,-a.y)};cc.ccpAdd=function(a,b){return new cc.Point(a.x+b.x,a.y+b.y)};cc.ccpSub=function(a,b){return new cc.Point(a.x-b.x,a.y-b.y)};cc.ccpMult=function(a,b){return new cc.Point(a.x*b,a.y*b)};cc.ccpMidpoint=function(a,b){return cc.ccpMult(cc.ccpAdd(a,b),0.5)};cc.ccpDot=function(a,b){return a.x*b.x+a.y*b.y};cc.ccpCross=function(a,b){return a.x*b.y-a.y*b.x};
cc.ccpPerp=function(a){return new cc.Point(-a.y,a.x)};cc.ccpRPerp=function(a){return new cc.Point(a.y,-a.x)};cc.ccpProject=function(a,b){return cc.ccpMult(b,cc.ccpDot(a,b)/cc.ccpDot(b,b))};cc.ccpRotate=function(a,b){return new cc.Point(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x)};cc.ccpUnrotate=function(a,b){return new cc.Point(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)};cc.ccpLengthSQ=function(a){return cc.ccpDot(a,a)};cc.ccpLength=function(a){return Math.sqrt(cc.ccpLengthSQ(a))};
cc.ccpDistance=function(a,b){return cc.ccpLength(cc.ccpSub(a,b))};cc.ccpNormalize=function(a){return cc.ccpMult(a,1/cc.ccpLength(a))};cc.ccpForAngle=function(a){return new cc.Point(Math.cos(a),Math.sin(a))};cc.ccpToAngle=function(a){return Math.atan2(a.y,a.x)};cc.clampf=function(a,b,c){if(b>c)var d=b,b=c,c=d;return a<b?b:a<c?a:c};cc.ccpClamp=function(a,b,c){return new cc.Point(cc.clampf(a.x,b.x,c.x),cc.clampf(a.y,b.y,c.y))};cc.ccpFromSize=function(a){return new cc.Point(a.width,a.height)};
cc.ccpCompOp=function(a,b){return new cc.Point(b(a.x),b(a.y))};cc.ccpLerp=function(a,b,c){return cc.ccpAdd(cc.ccpMult(a,1-c),cc.ccpMult(b,c))};cc.ccpFuzzyEqual=function(a,b,c){return a.x-c<=b.x&&b.x<=a.x+c&&a.y-c<=b.y&&b.y<=a.y+c?!0:!1};cc.ccpCompMult=function(a,b){return new cc.Point(a.x*b.x,a.y*b.y)};cc.ccpAngleSigned=function(a,b){var c=cc.ccpNormalize(a),d=cc.ccpNormalize(b),c=Math.atan2(c.x*d.y-c.y*d.x,cc.ccpDot(c,d));return Math.abs(c)<cc.CCPOINT_EPSILON?0:c};
cc.ccpAngle=function(a,b){var c=Math.acos(cc.ccpDot(cc.ccpNormalize(a),cc.ccpNormalize(b)));return Math.abs(c)<cc.CCPOINT_EPSILON?0:c};cc.ccpRotateByAngle=function(a,b,c){var a=cc.ccpSub(a,b),d=Math.cos(c),c=Math.sin(c),e=a.x;a.x=e*d-a.y*c+b.x;a.y=e*c+a.y*d+b.y;return a};
cc.ccpLineIntersect=function(a,b,c,d,e){if(a.x==b.x&&a.y==b.y||c.x==d.x&&c.y==d.y)return!1;var f=b.x-a.x,b=b.y-a.y,h=d.x-c.x,d=d.y-c.y,g=a.x-c.x,a=a.y-c.y,c=d*f-h*b;e.x=h*a-d*g;e.y=f*a-b*g;if(0==c)return 0==e.x||0==e.y?!0:!1;e.x/=c;e.y/=c;return!0};cc.ccpSegmentIntersect=function(a,b,c,d){var e=new cc.Point;return cc.ccpLineIntersect(a,b,c,d,e)&&0<=e.x&&1>=e.x&&0<=e.y&&1>=e.y?!0:!1};
cc.ccpIntersectPoint=function(a,b,c,d){var e=new cc.Point;return cc.ccpLineIntersect(a,b,c,d,e)?(c=new cc.Point,c.x=a.x+e.x*(b.x-a.x),c.y=a.y+e.x*(b.y-a.y),c):cc.PointZero()};cc.ccpSameAs=function(a,b){return a.x&&b.x?a.x==b.x&&a.y==b.y:!1};cc.CCNODE_TAG_INVALID=-1;cc.CCNODE_ON_ENTER=null;cc.CCNODE_ON_EXIT=null;cc.saveContext=function(){cc.renderContextType==cc.CANVAS&&cc.renderContext.save()};cc.restoreContext=function(){cc.renderContextType==cc.CANVAS&&cc.renderContext.restore()};
cc.Node=cc.Class.extend({_zOrder:0,_vertexZ:0,_rotation:0,_scaleX:1,_scaleY:1,_position:cc.PointZero(),_positionInPixels:cc.PointZero(),_skewX:0,_skewY:0,_children:null,_camera:null,_grid:null,_isVisible:!0,_anchorPoint:new cc.Point(0,0),_anchorPointInPixels:new cc.Point(0,0),_contentSize:cc.SizeZero(),_contentSizeInPixels:cc.SizeZero(),_isRunning:!1,_parent:null,_isRelativeAnchorPoint:!0,_tag:cc.CCNODE_TAG_INVALID,_userData:null,_isTransformDirty:!0,_isInverseDirty:!0,_isCacheDirty:!0,_isTransformGLDirty:null,
_transform:null,_inverse:null,_transformGL:null,ctor:function(){cc.NODE_TRANSFORM_USING_AFFINE_MATRIX&&(this._isTransformGLDirty=!0,this._transformGL=0);this._anchorPoint=new cc.Point(0,0);this._anchorPointInPixels=new cc.Point(0,0);this._contentSize=new cc.Size(0,0);this._contentSizeInPixels=new cc.Size(0,0)},_arrayMakeObjectsPerformSelector:function(a,b){if(a&&0!=a.length){var c;switch(b){case cc.Node.StateCallbackType.onEnter:for(c=0;c<a.length;c++)if(a[c])a[c].onEnter();break;case cc.Node.StateCallbackType.onExit:for(c=
0;c<a.length;c++)if(a[c])a[c].onExit();break;case cc.Node.StateCallbackType.onEnterTransitionDidFinish:for(c=0;c<a.length;c++)if(a[c])a[c].onEnterTransitionDidFinish();break;case cc.Node.StateCallbackType.cleanup:for(c=0;c<a.length;c++)a[c]&&a[c].cleanup();break;default:throw"Unknown callback function";}}},_addDirtyRegionToDirector:function(){},_isInDirtyRegion:function(){},setNodeDirty:function(){this._setNodeDirtyForCache();this._isTransformDirty=this._isInverseDirty=!0;cc.NODE_TRANSFORM_USING_AFFINE_MATRIX&&
(this._isTransformGLDirty=!0)},_setNodeDirtyForCache:function(){this._isCacheDirty=!0;this._parent&&this._parent._setNodeDirtyForCache()},getSkewX:function(){return this._skewX},setSkewX:function(a){this._skewX=a;this.setNodeDirty()},getSkewY:function(){return this._skewY},setSkewY:function(a){this._skewY=a;this.setNodeDirty()},getZOrder:function(){return this._zOrder},_setZOrder:function(a){this._zOrder=a},getVertexZ:function(){return this._vertexZ/cc.CONTENT_SCALE_FACTOR()},setVertexZ:function(a){this._vertexZ=
a*cc.CONTENT_SCALE_FACTOR()},getRotation:function(){return this._rotation},setRotation:function(a){this._rotation=a;this.setNodeDirty()},getScale:function(){cc.Assert(this._scaleX==this._scaleY,"cc.Node#scale. ScaleX != ScaleY. Don't know which one to return");return this._scaleX},setScale:function(a){this._scaleY=this._scaleX=a;this.setNodeDirty()},getScaleX:function(){return this._scaleX},setScaleX:function(a){this._scaleX=a;this.setNodeDirty()},getScaleY:function(){return this._scaleY},setScaleY:function(a){this._scaleY=
a;this.setNodeDirty()},setPosition:function(a){this._position=a;this._positionInPixels=1==cc.CONTENT_SCALE_FACTOR()?this._position:cc.ccpMult(a,cc.CONTENT_SCALE_FACTOR());this.setNodeDirty()},setPositionInPixels:function(a){this._positionInPixels=a;this._position=1==cc.CONTENT_SCALE_FACTOR()?this._positionInPixels:cc.ccpMult(a,1/cc.CONTENT_SCALE_FACTOR());this.setNodeDirty()},getPositionInPixels:function(){return new cc.Point(this._positionInPixels.x,this._positionInPixels.y)},getPosition:function(){return new cc.Point(this._position.x,
this._position.y)},getPositionX:function(){return this._position.x},setPositionX:function(a){this.setPosition(cc.ccp(a,this._position.y))},getPositionY:function(){return this._position.y},setPositionY:function(a){this.setPosition(cc.ccp(this._position.x,a))},getChildrenCount:function(){return this._children?this._children.length:0},getChildren:function(){return this._children},getCamera:function(){this._camera||(this._camera=new cc.Camera);return this._camera},getGrid:function(){return this._grid},
setGrid:function(a){this._grid=a},getIsVisible:function(){return this._isVisible},setIsVisible:function(a){this._isVisible=a;this.setNodeDirty()},getAnchorPoint:function(){return new cc.Point(this._anchorPoint.x,this._anchorPoint.y)},setAnchorPoint:function(a){cc.Point.CCPointEqualToPoint(a,this._anchorPoint)||(this._anchorPoint=a,this._anchorPointInPixels=new cc.Point(this._contentSizeInPixels.width*this._anchorPoint.x,this._contentSizeInPixels.height*this._anchorPoint.y),this.setNodeDirty())},getAnchorPointInPixels:function(){return new cc.Point(this._anchorPointInPixels.x,
this._anchorPointInPixels.y)},setContentSizeInPixels:function(a){cc.Size.CCSizeEqualToSize(a,this._contentSizeInPixels)||(this._contentSizeInPixels=a,this._contentSize=1==cc.CONTENT_SCALE_FACTOR()?this._contentSizeInPixels:new cc.Size(a.width/cc.CONTENT_SCALE_FACTOR(),a.height/cc.CONTENT_SCALE_FACTOR()),this._anchorPointInPixels=new cc.Point(this._contentSizeInPixels.width*this._anchorPoint.x,this._contentSizeInPixels.height*this._anchorPoint.y),this.setNodeDirty())},getContentSize:function(){return new cc.Size(this._contentSize.width,
this._contentSize.height)},setContentSize:function(a){cc.Size.CCSizeEqualToSize(a,this._contentSize)||(this._contentSize=a,this._contentSizeInPixels=1==cc.CONTENT_SCALE_FACTOR()?this._contentSize:new cc.Size(a.width*cc.CONTENT_SCALE_FACTOR(),a.height*cc.CONTENT_SCALE_FACTOR()),this._anchorPointInPixels=new cc.Point(this._contentSizeInPixels.width*this._anchorPoint.x,this._contentSizeInPixels.height*this._anchorPoint.y),this.setNodeDirty())},getContentSizeInPixels:function(){return new cc.Size(this._contentSizeInPixels.width,
this._contentSizeInPixels.height)},getIsRunning:function(){return this._isRunning},getParent:function(){return this._parent},setParent:function(a){this._parent=a},getIsRelativeAnchorPoint:function(){return this._isRelativeAnchorPoint},setIsRelativeAnchorPoint:function(a){this._isRelativeAnchorPoint=a;this.setNodeDirty()},getTag:function(){return this._tag},setTag:function(a){this._tag=a},getUserData:function(){return this._userData},setUserData:function(a){this._userData=a},boundingBox:function(){var a=
this.boundingBoxInPixels();return cc.RECT_PIXELS_TO_POINTS(a)},boundingBoxInPixels:function(){var a=cc.RectMake(0,0,this._contentSizeInPixels.width,this._contentSizeInPixels.height);return cc.RectApplyAffineTransform(a,this.nodeToParentTransform())},boundingBoxToWorld:function(){var a=cc.RectMake(0,0,this._contentSizeInPixels.width,this._contentSizeInPixels.height),a=cc.RectApplyAffineTransform(a,this.nodeToWorldTransform()),a=new cc.Rect(0|a.origin.x-4,0|a.origin.y-4,0|a.size.width+8,0|a.size.height+
8);if(!this._children)return a;for(var b=0;b<this._children.length;b++){var c=this._children[b];c&&c._isVisible&&(c=c.boundingBoxToWorld())&&(a=cc.Rect.CCRectUnion(a,c))}return a},cleanup:function(){this.stopAllActions();this.unscheduleAllSelectors();this._arrayMakeObjectsPerformSelector(this._children,cc.Node.StateCallbackType.cleanup)},description:function(){return"<cc.Node | Tag ="+this._tag+">"},_childrenAlloc:function(){this._children=[]},getChildByTag:function(a){cc.Assert(a!=cc.CCNODE_TAG_INVALID,
"Invalid tag");if(null!=this._children)for(var b=0;b<this._children.length;b++){var c=this._children[b];if(c&&c._tag==a)return c}return null},addChild:function(a,b,c){cc.Assert(null!=a,"Argument must be non-nil");cc.Assert(null==a._parent,"child already added. It can't be added again");b=null!=b?b:a.getZOrder();c=null!=c?c:a.getTag();a.setTag(c);this._children||this._childrenAlloc();this._insertChild(a,b);a.setParent(this);this._isRunning&&(a.onEnter(),a.onEnterTransitionDidFinish())},removeFromParentAndCleanup:function(a){this._parent.removeChild(this,
a)},removeChild:function(a,b){null!=this._children&&(-1<this._children.indexOf(a)&&this._detachChild(a,b),this.setNodeDirty())},removeChildByTag:function(a,b){cc.Assert(a!=cc.CCNODE_TAG_INVALID,"Invalid tag");var c=this.getChildByTag(a);null==c?cc.Log("cocos2d: removeChildByTag: child not found!"):this.removeChild(c,b)},removeAllChildrenWithCleanup:function(a){if(null!=this._children){for(var b=0;b<this._children.length;b++){var c=this._children[b];if(c){if(this._isRunning)c.onExit();a&&c.cleanup();
c.setParent(null)}}this._children=[]}},_detachChild:function(a,b){if(this._isRunning)a.onExit();b&&a.cleanup();a.setParent(null);cc.ArrayRemoveObject(this._children,a)},_insertChild:function(a,b){var c=this._children[this._children.length-1];if(!c||c.getZOrder()<=b)this._children.push(a);else for(c=0;c<this._children.length;c++){var d=this._children[c];if(d&&d.getZOrder()>b){this._children=cc.ArrayAppendObjectToIndex(this._children,a,c);break}}a._setZOrder(b)},reorderChild:function(a,b){cc.Assert(null!=
a,"Child must be non-nil");cc.ArrayRemoveObject(this._children,a);this._insertChild(a,b);this.setNodeDirty()},draw:function(){},visit:function(a){if(this._isVisible){a=a||cc.renderContext;a.save();this._grid&&this._grid.isActive()&&(this._grid.beforeDraw(),this.transformAncestors());this.transform(a);var b,c;if(this._children)for(b=0;b<this._children.length;b++)if((c=this._children[b])&&0>c._zOrder)c.visit(a);else break;this.draw(a);if(this._children)for(;b<this._children.length;b++)(c=this._children[b])&&
0<=c._zOrder&&c.visit(a);this._grid&&this._grid.isActive()&&this._grid.afterDraw(this);a.restore()}},transformAncestors:function(){null!=this._parent&&(this._parent.transformAncestors(),this._parent.transform())},transform:function(a){a=a||cc.renderContext;if(cc.renderContextType==cc.CANVAS){var b;if(this._isRelativeAnchorPoint)b=this._parent?this._parent._anchorPointInPixels:new cc.Point(0,0),a.translate(0|this._position.x-b.x,-(0|this._position.y-b.y));else{b=this._parent?this._parent._anchorPointInPixels:
new cc.Point(0,0);var c=this._anchorPointInPixels;a.translate(0|this._position.x-b.x+c.x,-(0|this._position.y-b.y+c.y))}0!=this._rotation&&a.rotate(cc.DEGREES_TO_RADIANS(this._rotation));(1!=this._scaleX||1!=this._scaleY)&&a.scale(this._scaleX,this._scaleY);(0!=this._skewX||0!=this._skewY)&&a.transform(1,-Math.tan(cc.DEGREES_TO_RADIANS(this._skewY)),-Math.tan(cc.DEGREES_TO_RADIANS(this._skewX)),1,0,0)}else cc.NODE_TRANSFORM_USING_AFFINE_MATRIX&&this._isTransformGLDirty&&(this.nodeToParentTransform(),
this._isTransformGLDirty=!1),this._camera&&(!this._grid||!this._grid.isActive())&&this._camera.locate()},onEnter:function(){this._arrayMakeObjectsPerformSelector(this._children,cc.Node.StateCallbackType.onEnter);this.resumeSchedulerAndActions();this._isRunning=!0},onEnterTransitionDidFinish:function(){this._arrayMakeObjectsPerformSelector(this._children,cc.Node.StateCallbackType.onEnterTransitionDidFinish)},onExit:function(){this.pauseSchedulerAndActions();this._isRunning=!1;this._arrayMakeObjectsPerformSelector(this._children,
cc.Node.StateCallbackType.onExit)},runAction:function(a){cc.Assert(null!=a,"Argument must be non-nil");cc.ActionManager.sharedManager().addAction(a,this,!this._isRunning);return a},stopAllActions:function(){cc.ActionManager.sharedManager().removeAllActionsFromTarget(this)},stopAction:function(a){cc.ActionManager.sharedManager().removeAction(a)},stopActionByTag:function(a){cc.Assert(a!=cc.CCACTION_TAG_INVALID,"Invalid tag");cc.ActionManager.sharedManager().removeActionByTag(a,this)},getActionByTag:function(a){cc.Assert(a!=
cc.CCACTION_TAG_INVALID,"Invalid tag");return cc.ActionManager.sharedManager().getActionByTag(a,this)},numberOfRunningActions:function(){return cc.ActionManager.sharedManager.numberOfRunningActionsInTarget(this)},isScheduled:function(){},scheduleUpdate:function(){this.scheduleUpdateWithPriority(0)},scheduleUpdateWithPriority:function(a){cc.Scheduler.sharedScheduler().scheduleUpdateForTarget(this,a,!this._isRunning)},unscheduleUpdate:function(){cc.Scheduler.sharedScheduler().unscheduleUpdateForTarget(this)},
schedule:function(a,b){b||(b=0);cc.Assert(a,"Argument must be non-nil");cc.Assert(0<=b,"Argument must be positive");cc.Scheduler.sharedScheduler().scheduleSelector(a,this,b,!this._isRunning)},unschedule:function(a){a&&cc.Scheduler.sharedScheduler().unscheduleSelector(a,this)},unscheduleAllSelectors:function(){cc.Scheduler.sharedScheduler().unscheduleAllSelectorsForTarget(this)},resumeSchedulerAndActions:function(){cc.Scheduler.sharedScheduler().resumeTarget(this);cc.ActionManager.sharedManager().resumeTarget(this)},
pauseSchedulerAndActions:function(){cc.Scheduler.sharedScheduler().pauseTarget(this);cc.ActionManager.sharedManager().pauseTarget(this)},nodeToParentTransform:function(){if(this._isTransformDirty){this._transform=cc.AffineTransformIdentity();!this._isRelativeAnchorPoint&&!cc.Point.CCPointEqualToPoint(this._anchorPointInPixels,cc.PointZero())&&(this._transform=cc.AffineTransformTranslate(this._transform,this._anchorPointInPixels.x,this._anchorPointInPixels.y));cc.Point.CCPointEqualToPoint(this._positionInPixels,
cc.PointZero())||(this._transform=cc.AffineTransformTranslate(this._transform,this._positionInPixels.x,this._positionInPixels.y));0!=this._rotation&&(this._transform=cc.AffineTransformRotate(this._transform,-cc.DEGREES_TO_RADIANS(this._rotation)));if(0!=this._skewX||0!=this._skewY){var a=cc.AffineTransformMake(1,Math.tan(cc.DEGREES_TO_RADIANS(this._skewY)),Math.tan(cc.DEGREES_TO_RADIANS(this._skewX)),1,0,0);this._transform=cc.AffineTransformConcat(a,this._transform)}1==this._scaleX&&1==this._scaleY||
(this._transform=cc.AffineTransformScale(this._transform,this._scaleX,this._scaleY));cc.Point.CCPointEqualToPoint(this._anchorPointInPixels,cc.PointZero())||(this._transform=cc.AffineTransformTranslate(this._transform,-this._anchorPointInPixels.x,-this._anchorPointInPixels.y));this._isTransformDirty=!1}return this._transform},parentToNodeTransform:function(){this._isInverseDirty&&(this._inverse=cc.AffineTransformInvert(this.nodeToParentTransform()),this._isInverseDirty=!1);return this._inverse},nodeToWorldTransform:function(){for(var a=
this.nodeToParentTransform(),b=this._parent;null!=b;b=b.getParent())a=cc.AffineTransformConcat(a,b.nodeToParentTransform());return a},worldToNodeTransform:function(){return cc.AffineTransformInvert(this.nodeToWorldTransform())},convertToNodeSpace:function(a){var b=new cc.Point;1==cc.CONTENT_SCALE_FACTOR()?b=cc.PointApplyAffineTransform(a,this.worldToNodeTransform()):(b=cc.ccpMult(a,cc.CONTENT_SCALE_FACTOR()),b=cc.PointApplyAffineTransform(b,this.worldToNodeTransform()),b=cc.ccpMult(b,1/cc.CONTENT_SCALE_FACTOR()));
return b},convertToWorldSpace:function(a){var b=new cc.Point;1==cc.CONTENT_SCALE_FACTOR()?b=cc.PointApplyAffineTransform(a,this.nodeToWorldTransform()):(b=cc.ccpMult(a,cc.CONTENT_SCALE_FACTOR()),b=cc.PointApplyAffineTransform(b,this.nodeToWorldTransform()),b=cc.ccpMult(b,1/cc.CONTENT_SCALE_FACTOR()));return b},convertToNodeSpaceAR:function(a){var a=this.convertToNodeSpace(a),b=new cc.Point,b=1==cc.CONTENT_SCALE_FACTOR()?this._anchorPointInPixels:cc.ccpMult(this._anchorPointInPixels,1/cc.CONTENT_SCALE_FACTOR());
return cc.ccpSub(a,b)},convertToWorldSpaceAR:function(a){var b=new cc.Point,b=1==cc.CONTENT_SCALE_FACTOR()?this._anchorPointInPixels:cc.ccpMult(this._anchorPointInPixels,1/cc.CONTENT_SCALE_FACTOR()),c=new cc.Point,c=cc.ccpAdd(a,b);return this.convertToWorldSpace(c)},_convertToWindowSpace:function(a){var b=new cc.Point,b=this.convertToWorldSpace(a);return cc.Director.sharedDirector().convertToUI(b)},convertTouchToNodeSpace:function(a){a=a.locationInView(a.view());a=cc.Director.sharedDirector().convertToGL(a);
return this.convertToNodeSpace(a)},convertTouchToNodeSpaceAR:function(a){a=a.locationInView(a.view());a=cc.Director.sharedDirector().convertToGL(a);return this.convertToNodeSpaceAR(a)},update:function(){}});cc.Node.StateCallbackType={onEnter:1,onExit:2,cleanup:3,onEnterTransitionDidFinish:4,updateTransform:5};cc.Node.create=function(){return new cc.Node};cc.AtlasNode=cc.Node.extend({_itemsPerRow:0,_itemsPerColumn:0,_itemWidth:0,_itemHeight:0,_colorUnmodified:new cc.Color3B(0,0,0),_textureAtlas:null,_isOpacityModifyRGB:!1,_blendFunc:new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST),_opacity:0,_color:null,_originalTexture:null,_quadsToDraw:0,initWithTileFile:function(a,b,c,d){cc.Assert(null!=a,"title should not be null");this._itemWidth=b*cc.CONTENT_SCALE_FACTOR();this._itemHeight=c*cc.CONTENT_SCALE_FACTOR();this._opacity=255;this._color=this._colorUnmodified=
cc.WHITE();this._isOpacityModifyRGB=!0;this._blendFunc.src=cc.BLEND_SRC;this._blendFunc.dst=cc.BLEND_DST;this._textureAtlas=new cc.TextureAtlas;this._textureAtlas.initWithFile(a,d);cc.renderContextType==cc.CANVAS&&(this._originalTexture=this._textureAtlas.getTexture());if(!this._textureAtlas)return cc.Log("cocos2d: Could not initialize cc.AtlasNode. Invalid Texture."),!1;this._updateBlendFunc();this._updateOpacityModifyRGB();this._calculateMaxItems();this._quadsToDraw=d;return!0},updateAtlasValues:function(){cc.Assert(!1,
"cc.AtlasNode:Abstract updateAtlasValue not overriden")},draw:function(){this._super();cc.renderContextType!=cc.CANVAS&&this._textureAtlas.drawNumberOfQuads(this._quadsToDraw,0)},getColor:function(){return this._isOpacityModifyRGB?this._colorUnmodified:this._color},setColor:function(a){if(!(this._color.r==a.r&&this._color.g==a.g&&this._color.b==a.b)){this._color=this._colorUnmodified=a;if(this.getTexture()&&cc.renderContextType==cc.CANVAS){var b=cc.TextureCache.sharedTextureCache().getTextureColors(this._originalTexture);
if(b){var c=this.getTexture(),d=new cc.Rect(0,0,c.width,c.height),b=cc.generateTintImage(c,b,this._color,d),c=new Image;c.src=b.toDataURL();this.setTexture(c)}}this._isOpacityModifyRGB&&(this._color.r=a.r*this._opacity/255,this._color.g=a.g*this._opacity/255,this._color.b=a.b*this._opacity/255)}},getOpacity:function(){return this._opacity},setOpacity:function(a){this._opacity=a},setIsOpacityModifyRGB:function(a){var b=this._color;this._isOpacityModifyRGB=a;this._color=b},getIsOpacityModifyRGB:function(){return this._isOpacityModifyRGB},
getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a){this._blendFunc=a},getTexture:function(){return this._textureAtlas.getTexture()},setTexture:function(a){this._textureAtlas.setTexture(a);this._updateBlendFunc();this._updateOpacityModifyRGB()},setTextureAtlas:function(a){this._textureAtlas=a},getTextureAtlas:function(){return this._textureAtlas},getQuadsToDraw:function(){return this._quadsToDraw},setQuadsToDraw:function(a){this._quadsToDraw=a},_calculateMaxItems:function(){var a=
this._textureAtlas.getTexture();this._itemsPerColumn=parseInt(a.height/this._itemHeight);this._itemsPerRow=parseInt(a.width/this._itemWidth)},_updateBlendFunc:function(){},_updateOpacityModifyRGB:function(){}});cc.AtlasNode.create=function(a,b,c,d){var e=new cc.AtlasNode;return e.initWithTileFile(a,b,c,d)?e:null};cc=cc=cc||{};cc.CCTEXTURE_2D_PIXEL_FORMAT_AUTOMATIC=0;cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888=1;cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB888=2;cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB565=3;cc.CCTEXTURE_2D_PIXEL_FORMAT_A8=4;cc.CCTEXTURE_2D_PIXEL_FORMAT_I8=5;cc.CCTEXTURE_2D_PIXEL_FORMAT_AI88=6;cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444=7;cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB5A1=8;cc.CCTEXTURE_2D_PIXEL_FORMAT_PVRTC4=9;cc.CCTEXTURE_2D_PIXEL_FORMAT_PVRTC2=10;cc.CCTEXTURE_2D_PIXEL_FORMAT_DEFAULT=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888;
cc.TEXTURE_2D_PIXEL_FORMAT_AUTOMATIC=cc.CCTEXTURE_2D_PIXEL_FORMAT_AUTOMATIC;cc.TEXTURE_2D_PIXEL_FORMAT_RGBA8888=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888;cc.TEXTURE_2D_PIXEL_FORMAT_RGB888=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB888;cc.TEXTURE_2D_PIXEL_FORMAT_RGB565=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB565;cc.TEXTURE_2D_PIXEL_FORMAT_A8=cc.CCTEXTURE_2D_PIXEL_FORMAT_A8;cc.TEXTURE_2D_PIXEL_FORMAT_RGBA4444=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444;cc.TEXTURE_2D_PIXEL_FORMAT_RGB5A1=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB5A1;
cc.TEXTURE_2D_PIXEL_FORMAT_DEFAULT=cc.CCTEXTURE_2D_PIXEL_FORMAT_DEFAULT;cc.g_defaultAlphaPixelFormat=cc.CCTEXTURE_2D_PIXEL_FORMAT_DEFAULT;cc.PVRHaveAlphaPremultiplied_=!1;function _ccTexParams(a,b,c,d){this.minFilter=a;this.magFilter=b;this.wrapS=c;this.wrapT=d}
cc.Texture2D=cc.Class.extend({_pVRHaveAlphaPremultiplied:null,_pixelFormat:null,_pixelsWide:null,_pixelsHigh:null,_name:null,_contentSize:null,_maxS:null,_maxT:null,_hasPremultipliedAlpha:null,ctor:function(){cc.SUPPORT_PVRTC&&(this.initWithPVRTCData=function(a,b,c,d,e,f){if(!cc.Configuration.sharedConfiguration().isSupportsPVRTC())return cc.Log("cocos2d: WARNING: PVRTC images is not supported."),!1;this.setAntiAliasTexParameters();new cc.GLsizei;this._contentSize=cc.SizeMake(e,e);this._pixelsHigh=
this._pixelsWide=e;this._maxT=this._maxS=1;this._hasPremultipliedAlpha=cc.PVRHaveAlphaPremultiplied_;this._pixelFormat=f;return!0})},getPixelFormat:function(){return this._pixelFormat},getPixelsWide:function(){return this._pixelsWide},getPixelsHigh:function(){return this._pixelsHigh},getName:function(){return this._name},getContentSizeInPixels:function(){var a=new cc.Size;a.width=this._contentSize.width/cc.CONTENT_SCALE_FACTOR();a.height=this._contentSize.height/cc.CONTENT_SCALE_FACTOR();return a},
getMaxS:function(){return this._maxS},setMaxS:function(a){this._maxS=a},getMaxT:function(){return this._maxT},setMaxT:function(a){this._maxT=a},getHasPremultipliedAlpha:function(){return this._hasPremultipliedAlpha},description:function(){return"<cc.Texture2D | Name = "+this._name+" | Dimensions = "+this._pixelsWide+" x "+this._pixelsHigh+" | Coordinates = ("+this._maxS+", "+this._maxT+")>"},releaseData:function(a){cc.free(a)},keepData:function(a){return a},initWithData:function(a,b,c,d){this.setAntiAliasTexParameters();
switch(a){case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888:break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB888:break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444:break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB5A1:break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB565:break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_AI88:break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_A8:break;default:cc.Assert(0,"NSInternalInconsistencyException")}this._contentSize=d;this._pixelsWide=b;this._pixelsHigh=c;this._pixelFormat=a;this._maxS=d.width/b;this._maxT=
d.height/c;this._hasPremultipliedAlpha=!1;return!0},drawAtPoint:function(){},drawInRect:function(){},initWithImage:function(a){var b,c;if(null==a)return cc.Log("cocos2d: cc.Texture2D. Can't create Texture. UIImage is nil"),!1;var d=cc.Configuration.sharedConfiguration();cc.TEXTURE_NPOT_SUPPORT?d.isSupportsNPOT()&&(b=a.getWidth(),c=a.getHeight()):(b=cc.NextPOT(a.getWidth()),c=cc.NextPOT(a.getHeight()));d=d.getMaxTextureSize();return c>d||b>d?(cc.Log("cocos2d: WARNING: Image (%u x %u) is bigger than the supported %u x %u",
b,c,d,d),null):this._initPremultipliedATextureWithImage(a,b,c)},initWithString:function(a,b,c,d,e){3==arguments.length&&(d=arguments[1],e=arguments[2],b=cc.SizeMake(0,0),c=cc.TEXT_ALIGNMENT_CENTER);cc.ENABLE_CACHE_TEXTTURE_DATA&&cc.VolatileTexture.addStringTexture(this,a,b,c,d,e);var f=new cc.Image;eAlign=new cc.Image.ETextAlign;eAlign=cc.TEXT_ALIGNMENT_CENTER==c?cc.Image.ALIGN_CENTER:cc.TEXT_ALIGNMENT_LEFT==c?cc.Image.ALIGN_LEFT:cc.Image.ALIGN_RIGHT;return!f.initWithString(a,b.width,b.height,eAlign,
d,e)?!1:this.initWithImage(f)},initWithPVRFile:function(a){var b=!1,c=new cc.TexturePVR;(b=c.initWithContentsOfFile(a))?(c.setRetainName(!0),this._name=c.getName(),this._maxT=this._maxS=1,this._pixelsWide=c.getWidth(),this._pixelsHigh=c.getHeight(),this._contentSize=cc.SizeMake(this._pixelsWide,this._pixelsHigh),this._hasPremultipliedAlpha=cc.PVRHaveAlphaPremultiplied_,this._pixelFormat=c.getFormat(),this.setAntiAliasTexParameters()):cc.Log("cocos2d: Couldn't load PVR image %s",a);return b},setTexParameters:function(a){cc.Assert(this._pixelsWide==
cc.NextPOT(this._pixelsWide)&&this._pixelsHigh==cc.NextPOT(this._pixelsHigh)||a.wrapS==cc.GL_CLAMP_TO_EDGE&&a.wrapT==cc.GL_CLAMP_TO_EDGE,"cc.GL_CLAMP_TO_EDGE should be used in NPOT textures")},setAntiAliasTexParameters:function(){this.setTexParameters([cc.GL_LINEAR,cc.GL_LINEAR,cc.GL_CLAMP_TO_EDGE,cc.GL_CLAMP_TO_EDGE])},setAliasTexParameters:function(){this.setTexParameters([cc.GL_NEAREST,cc.GL_NEAREST,cc.GL_CLAMP_TO_EDGE,cc.GL_CLAMP_TO_EDGE])},generateMipmap:function(){cc.Assert(this._pixelsWide==
cc.NextPOT(this._pixelsWide)&&this._pixelsHigh==cc.NextPOT(this._pixelsHigh),"Mimpap texture only works in POT textures")},bitsPerPixelForFormat:function(){var a=0;switch(this._pixelFormat){case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888:a=32;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB565:a=16;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_A8:a=8;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444:a=16;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB5A1:a=16;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_PVRTC4:a=4;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_PVRTC2:a=
2;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_I8:a=8;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_AI88:a=16;break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB888:a=24;break;default:a=-1,cc.Assert(!1,"illegal pixel format"),cc.Log("bitsPerPixelForFormat: %d, cannot give useful result",this._pixelFormat)}return a},_initPremultipliedATextureWithImage:function(a,b,c){var d=null,e=null,f=null,h;h=new cc.Size;var g=new cc.Texture2DPixelFormat,g=new cc.size_t;h=a.hasAlpha();g=a.getBitsPerComponent();h?g=cc.g_defaultAlphaPixelFormat:
8<=g?g=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB888:(cc.Log("cocos2d: cc.Texture2D: Using RGB565 texture since image has no alpha"),g=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB565);h=cc.SizeMake(a.getWidth(),a.getHeight());switch(g){case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888:case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444:case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB5A1:case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB565:case cc.CCTEXTURE_2D_PIXEL_FORMAT_A8:e=a.getData();cc.Assert(null!=e,"null image data.");if(a.getWidth()==b&&a.getHeight()==
c)d=new (4*c*b),cc.memcpy(d,e,4*c*b);else for(var f=d=new (4*c*b),i=a.getHeight(),j=0;j<i;++j)cc.memcpy(f+4*b*j,e+4*a.getWidth()*j,4*a.getWidth());break;case cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB888:e=a.getData();cc.Assert(null!=e,"null image data.");if(a.getWidth()==b&&a.getHeight()==c)d=new (3*c*b),cc.memcpy(d,e,3*c*b);else{f=d=new (3*c*b);i=a.getHeight();for(j=0;j<i;++j)cc.memcpy(f+3*b*j,e+3*a.getWidth()*j,3*a.getWidth())}break;default:cc.Assert(0,"Invalid pixel format")}if(g==cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB565){e=
new (2*c*b);f=d;i=b*c;for(j=0;j<i;++j,++f);delete d;d=e}else if(g==cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA4444){e=new (2*c*b);f=d;i=b*c;for(j=0;j<i;++j,++f);delete d;d=e}else if(g==cc.CCTEXTURE_2D_PIXEL_FORMAT_RGB5A1){e=new (2*c*b);f=d;i=b*c;for(j=0;j<i;++j,++f);delete d;d=e}else g==cc.CCTEXTURE_2D_PIXEL_FORMAT_A8&&(g=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888);d&&(this.initWithData(d,g,b,c,h),this._hasPremultipliedAlpha=a.isPremultipliedAlpha(),delete d);return!0}});
cc.Texture2D.setDefaultAlphaPixelFormat=function(a){cc.g_defaultAlphaPixelFormat=a};cc.Texture2D.defaultAlphaPixelFormat=function(){return cc.g_defaultAlphaPixelFormat};cc.Texture2D.PVRImagesHavePremultipliedAlpha=function(a){cc.PVRHaveAlphaPremultiplied_=a};cc.g_sharedTextureCache=null;cc.loadImage=function(a){if(cc.computeImageFormatType(a)==cc.FMT_UNKNOWN)cc.Log("unsupported format"+a);else{var b=new Image;b.src=a;b.onLoad=function(){cc.TextureCache.sharedTextureCache().cacheImage(a,b)}}};cc.computeImageFormatType=function(a){return 0<a.toLowerCase().indexOf(".jpg")||0<a.toLowerCase().indexOf(".jpeg")?cc.FMT_JPG:0<a.indexOf(".png")||0<a.indexOf(".PNG")?cc.FMT_PNG:cc.FMT_UNKNOWN};
cc.TextureCache=cc.Class.extend({textures:{},_textureColorsCache:{},ctor:function(){cc.Assert(null==cc.g_sharedTextureCache,"Attempted to allocate a second instance of a singleton.")},addImageAsync:function(a,b,c){cc.Assert(null!=a,"TextureCache: path MUST not be null");var d=this.textures[a.toString()];if(d)this._addImageAsyncCallBack(b,c);else{var d=new Image,e=this;d.addEventListener("load",function(){e._addImageAsyncCallBack(b,c)});d.src=a;this.textures[a.toString()]=d}if(cc.renderContextType==
cc.CANVAS)return this.textures[a.toString()]},_addImageAsyncCallBack:function(a,b){if(a&&"string"==typeof b)a[b]();else a&&"function"==typeof b&&b.call(a)},addPVRTCImage:function(){cc.Assert(0,"TextureCache:addPVRTCImage does not support")},description:function(){return"<TextureCache | Number of textures = "+this.textures.length+">"},addImage:function(a){cc.Assert(null!=a,"TextureCache: path MUST not be null");var b=this.textures[a.toString()];if(b)cc.Loader.shareLoader().onResLoaded();else b=new Image,
b.addEventListener("load",function(){cc.Loader.shareLoader().onResLoaded()}),b.addEventListener("error",function(){cc.Loader.shareLoader().onResLoadingErr(a)}),b.src=a,this.textures[a.toString()]=b;if(cc.renderContextType==cc.CANVAS)return this.textures[a.toString()]},cacheImage:function(a,b){this.textures[a.toString()]||(this.textures[a.toString()]=b)},addUIImage:function(a,b){cc.Assert(null!=a,"TextureCache: image MUST not be nulll");var c=null;if(b&&this.textures.hasOwnProperty(b)&&(c=this.textures[b]))return c;
c=new cc.Texture2D;c.initWithImage(a);null!=b&&null!=c?this.textures[b]=c:cc.Log("cocos2d: Couldn't add UIImage in TextureCache");return c},textureForKey:function(a){return this.textures.hasOwnProperty(a)?this.textures[a]:null},getKeyByTexture:function(a){for(var b in this.textures)if(this.textures[b]==a)return b;return null},getTextureColors:function(a){var b=this.getKeyByTexture(a);if(b)if(a instanceof HTMLImageElement)b=a.src;else return null;this._textureColorsCache.hasOwnProperty(b)||(this._textureColorsCache[b]=
cc.generateTextureCacheForColor(a));return this._textureColorsCache[b]},removeAllTextures:function(){this.textures={}},removeTexture:function(a){if(a)for(var b in this.textures)if(this.textures[b]==a){delete this.textures[b];break}},removeTextureForKey:function(a){null!=a&&this.textures[a]&&delete this.textures[a]},dumpCachedTextureInfo:function(){var a=0,b=0,c;for(c in this.textures){var d=this.textures[c],e=d.bitsPerPixelForFormat(),f=d.getPixelsWide()*d.getPixelsHigh()*e/8,b=b+f;a++;cc.Log("cocos2d: '"+
d.toString()+"' id="+d.getName()+" "+d.getPixelsWide()+" x "+d.getPixelsHigh()+" @ "+e+" bpp => "+f/1024+" KB")}cc.Log("cocos2d: TextureCache dumpDebugInfo: "+a+" textures, for "+b/1024+" KB ("+(b/1048576).toFixed(2)+" MB)")},addPVRImage:function(a){cc.Assert(null!=a,"TextureCache: file image MUST not be null");if(null!=this.textures[a])return this.textures[a];var b=new cc.Texture2D;b.initWithPVRFile(a)?this.textures[a]=b:cc.Log("cocos2d: Couldn't add PVRImage:"+a+" in TextureCache");return b}});
cc.TextureCache.sharedTextureCache=function(){cc.g_sharedTextureCache||(cc.g_sharedTextureCache=new cc.TextureCache);return cc.g_sharedTextureCache};cc.TextureCache.purgeSharedTextureCache=function(){cc.g_sharedTextureCache=null};cc.TextureAtlas=cc.Class.extend({_indices:[],_buffersVBO:[0,1],_dirty:!1,_capacity:0,_texture:null,_quads:[],getTotalQuads:function(){return this._quads.length},getCapacity:function(){return this._capacity},getTexture:function(){return this._texture},setTexture:function(a){this._texture=a},getQuads:function(){return this._quads},setQuads:function(a){this._quads=a},description:function(){return"<CCTextureAtlas | totalQuads ="+this._totalQuads+">"},_initIndices:function(){if(0!=this._capacity)for(var a=
0;a<this._capacity;a++)this._indices[6*a+0]=4*a+0,this._indices[6*a+1]=4*a+0,this._indices[6*a+2]=4*a+2,this._indices[6*a+3]=4*a+1,this._indices[6*a+4]=4*a+3,this._indices[6*a+5]=4*a+3},initWithFile:function(a,b){var c=cc.TextureCache.sharedTextureCache().addImage(a);if(c)return this.initWithTexture(c,b);cc.Log("cocos2d: Could not open file: "+a);return null},initWithTexture:function(a,b){cc.Assert(null!=a,"TextureAtlas.initWithTexture():texture should not be null");this._capacity=b;this._texture=
a;cc.Assert(0==this._quads.length&&0==this._indices.length,"TextureAtlas.initWithTexture():_quads and _indices should not be null");this._quads=[];this._indices=[];if((!this._quads||!this._indices)&&0<this._capacity)return!1;this._dirty=!0;this._initIndices();return!0},updateQuad:function(a,b){this._quads[b]=a;this._dirty=!0},insertQuad:function(a,b){this._quads=cc.ArrayAppendObjectToIndex(this._quads,a,b);this._dirty=!0},insertQuadFromIndex:function(a,b){if(a!=b){var c=this._quads[a];cc.ArrayRemoveObjectAtIndex(this._quads,
a);this._quads=a>b?cc.ArrayAppendObjectToIndex(this._quads,c,b):cc.ArrayAppendObjectToIndex(this._quads,c,b-1);this._dirty=!0}},removeQuadAtIndex:function(a){cc.ArrayRemoveObjectAtIndex(this._quads,a);this._dirty=!0},removeAllQuads:function(){this._quads.length=0},resizeCapacity:function(a){if(a==this._capacity)return!0;this._totalQuads=Math.min(this._totalQuads,a);this._capacity=a;return!0},drawNumberOfQuads:function(){},drawQuads:function(){this.drawNumberOfQuads(this._quads.length,0)}});
cc.TextureAtlas.create=function(a,b){var c=new cc.TextureAtlas;return c&&c.initWithFile(a,b)?c:null};cc.TextureAtlas.createWithTexture=function(a,b){var c=new cc.TextureAtlas;return c&&c.initWithTexture(a,b)?c:null};cc.CCIMAGE_FORMAT_JPG=0;cc.CCIMAGE_FORMAT_PNG=1;cc.CCIMAGE_FORMAT_RAWDATA=2;cc.NextPOT=function(a){a-=1;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;return(a|a>>16)+1};
cc.RenderTexture=cc.Node.extend({canvas:null,context:null,_fBO:0,_oldFBO:0,_texture:null,_uITextureImage:null,_pixelFormat:cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888,_sprite:null,ctor:function(){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.setAnchorPoint(new cc.Point(0,0))},getSprite:function(){return this._sprite},setSprite:function(a){this._sprite=a},getCanvas:function(){return this.canvas},setContentSize:function(a){a&&(this._super(a),this.canvas.width=
1.5*a.width,this.canvas.height=1.5*a.height,this.context.translate(0,this.canvas.height))},initWithWidthAndHeight:function(a,b,c){if(cc.renderContextType==cc.CANVAS)return this.canvas.width=a||10,this.canvas.height=b||10,this.context.translate(0,this.canvas.height),!0;if(cc.Configuration.sharedConfiguration().getGlesVersion()<=GLES_VER_1_0)return!1;var d=!1,a=a*cc.CONTENT_SCALE_FACTOR(),b=b*cc.CONTENT_SCALE_FACTOR();glGetIntegerv(cc.GL_FRAMEBUFFER_BINDING,this._oldFBO);var e=cc.NextPOT(a),f=cc.NextPOT(b),
h=[];cc.BREAK_IF(!h);for(var g=0;g<4*e*f;g++)h[g]=0;this._pixelFormat=c;this._texture=new cc.Texture2D;cc.BREAK_IF(!this._texture);this._texture.initWithData(h,this._pixelFormat,e,f,cc.SizeMake(a,b));ccglGenFramebuffers(1,this._fBO);ccglBindFramebuffer(cc.GL_FRAMEBUFFER,this._fBO);ccglFramebufferTexture2D(cc.GL_FRAMEBUFFER,cc.GL_COLOR_ATTACHMENT0,GL_TEXTURE_2D,texture.getName(),0);ccglCheckFramebufferStatus(cc.GL_FRAMEBUFFER)!=cc.GL_FRAMEBUFFER_COMPLETE?cc.Assert(0,"Render Texture : Could not attach texture to framebuffer"):
(this._texture.setAliasTexParameters(),this._sprite=cc.Sprite.createWithTexture(this._texture),this._sprite.setScaleY(-1),this.addChild(this._sprite),this._sprite.setBlendFunc(new cc.BlendFunc(GL_ONE,GL_ONE_MINUS_SRC_ALPHA)),ccglBindFramebuffer(cc.GL_FRAMEBUFFER,this._oldFBO),d=!0);return d},begin:function(){glPushMatrix();var a=this._texture.getContentSizeInPixels(),b=cc.Director.sharedDirector().getDisplaySizeInPixels(),c=b.width/a.width,b=b.height/a.height;ccglOrtho(-1/c,1/c,-1/b,1/b,-1,1);glViewport(0,
0,a.width,a.height);glGetIntegerv(cc.GL_FRAMEBUFFER_BINDING,this._oldFBO);ccglBindFramebuffer(cc.GL_FRAMEBUFFER,this._fBO);cc.ENABLE_DEFAULT_GL_STATES()},beginWithClear:function(a,b,c,d){this.begin();var e=[0,0,0,0];glGetFloatv(GL_COLOR_CLEAR_VALUE,e);glClearColor(a,b,c,d);glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);glClearColor(e[0],e[1],e[2],e[3])},end:function(a){ccglBindFramebuffer(cc.GL_FRAMEBUFFER,this._oldFBO);glPopMatrix();var b=cc.Director.sharedDirector().getDisplaySizeInPixels();cc.Director.sharedDirector().getOpenGLView().setViewPortInPoints(0,
0,b.width,b.height);if(cc.ENABLE_CACHE_TEXTTURE_DATA&&a){var a=this._texture.getContentSizeInPixels(),b=a.width,c=a.height;this._uITextureImage=new cc.Image;!0==this.getUIImageFromBuffer(this._uITextureImage,0,0,b,c)?cc.VolatileTexture.addDataTexture(this._texture,this._uITextureImage.getData(),cc.TEXTURE_2D_PIXEL_FORMAT_RGBA8888,a):cc.Log("Cache rendertexture failed!")}},clear:function(a,b,c,d){cc.renderContextType==cc.CANVAS?a?this.context.clearRect(a.origin.x,a.origin.y,a.size.width,a.size.height):
this.context.clearRect(0,0,this.canvas.width,-this.canvas.height):(this.beginWithClear(a,b,c,d),this.end())},saveBuffer:function(a,b,c,d,e,f){if("number"==typeof a){var c=c||0,d=d||0,e=e||0,f=f||0,h=!1;cc.Assert(a==cc.CCIMAGE_FORMAT_JPG||a==cc.CCIMAGE_FORMAT_PNG,"the image can only be saved as JPG or PNG format");a=new cc.Image;null!=a&&this.getUIImageFromBuffer(a,c,d,e,f)&&(b=cc.FileUtils.getWriteablePath()+b,h=a.saveToFile(b));return h}if("string"==typeof a)return f=e||0,e=d||0,d=c||0,c=b||0,b=
a,h=!1,a=new cc.Image,null!=a&&this.getUIImageFromBuffer(a,c,d,e,f)&&(h=a.saveToFile(b)),h},getUIImageAsDataFromBuffer:function(){return null},getUIImageFromBuffer:function(a,b,c,d,e){if(null==a||null==this._texture)return!1;var f=this._texture.getContentSizeInPixels(),h=f.width,f=f.height;if(0>b||b>=h||0>c||c>=f||0>d||0>e||0==d&&0!=e||0==e&&0!=d)return!1;var g=d,i=e;0==d&&(g=h);0==e&&(i=f);g=b+g>h?h-b:g;i=c+i>f?f-c:i;d=null;d=!1;cc.Assert(this._pixelFormat==cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888,
"only RGBA8888 can be saved as image");d=[];for(e=0;e<4*g*i;e++)d[e]=0;cc.BREAK_IF(!d);var j=0,l=0;glGetIntegerv(GL_MAX_TEXTURE_SIZE,0);j=cc.NextPOT(h);l=cc.NextPOT(f);cc.BREAK_IF(0==j||0==l);cc.BREAK_IF(0<j||0<l);for(e=0;e<4*j*l;e++);cc.BREAK_IF(!0);this.begin();glPixelStorei(GL_PACK_ALIGNMENT,1);glReadPixels(0,0,j,l,GL_RGBA,GL_UNSIGNED_BYTE,null);this.end(!1);for(e=0;e<i;++e)this._memcpy(d,4*e*g,null,4*(c+i-e-1)*j+4*b,4*g);return d=a.initWithImageData(d,4*g*i,cc.FMT_RAWDATA,g,i,8)},_memcpy:function(a,
b,c,d,e){for(var f=0;f<e;f++)a[b+f]=c[d+f]}});cc.RenderTexture.create=function(a,b,c){c||(c=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888);var d=new cc.RenderTexture;return d&&d.initWithWidthAndHeight(a,b,c)?d:null};cc.CCPROGRESS_TIMER_RADIAL_CCW=0;cc.CCPROGRESS_TIMER_TYPE_RADIAL_CW=1;cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_LR=2;cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_RL=3;cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_BT=4;cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_TB=5;cc.PROGRESS_TEXTURE_COORDS_COUNT=4;cc.PROGRESS_TEXTURE_COORDS=30;
cc.ProgressTimer=cc.Node.extend({getType:function(){return this._type},getPercentage:function(){return this._percentage},getSprite:function(){return this._sprite},initWithFile:function(a){return this.initWithTexture(cc.TextureCache.sharedTextureCache().addImage(a))},initWithTexture:function(a){this._sprite=cc.Sprite.createWithTexture(a);this._percentage=0;this._vertexData=null;this._vertexDataCount=0;this.setAnchorPoint(cc.ccp(0.5,0.5));this.setContentSize(this._sprite.getContentSize());this._type=
cc.CCPROGRESS_TIMER_RADIAL_CCW;return!0},setPercentage:function(a){this._percentage!=a&&(this._percentage=cc.clampf(a,0,100),this._updateProgress())},setSprite:function(a){this._sprite!=a&&(this._sprite=a,this.setContentSize(this._sprite.getContentSize()),this._vertexData&&(this._vertexData=null,this._vertexDataCount=0))},setType:function(a){a!=this._type&&(this._vertexData&&(this._vertexData=null,this._vertexDataCount=0),this._type=a)},draw:function(a){if(cc.renderContextType==cc.CANVAS)if(a=a||
cc.renderContext,1<this._type){var b=new cc.Point(0|-this._anchorPointInPixels.x+this._drawPosition.x,0|-this._anchorPointInPixels.y+this._drawPosition.y);a.drawImage(this._sprite._texture,this._origin.x,this._origin.y,this._drawSize.width,this._drawSize.height,b.x,-(b.y+this._drawSize.height),this._drawSize.width,this._drawSize.height)}else b=this.getContentSize(),a.beginPath(),a.arc(0,0,b.width>b.height?b.width:b.height,Math.PI/180*this._startAngle,Math.PI/180*this._endAngle,!1),a.lineTo(0,0),a.clip(),
a.closePath(),b=this._sprite._offsetPositionInPixels,b=new cc.Point(0|-this._sprite._anchorPointInPixels.x+b.x,0|-this._sprite._anchorPointInPixels.y+b.y),a.drawImage(this._sprite._texture,this._sprite._rect.origin.x,this._sprite._rect.origin.y,this._sprite._rect.size.width,this._sprite._rect.size.height,b.x,-(b.y+this._sprite._rect.size.height),this._sprite._rect.size.width,this._sprite._rect.size.height);else this._super(),this._vertexData&&this._sprite&&this._sprite.getBlendFunc()},_vertexFromTexCoord:function(a){var b=
new cc.Vertex2F(0,0);if(this._sprite.getTexture())var c=Math.max(this._sprite.getQuad().br.texCoords.u,this._sprite.getQuad().bl.texCoords.u),d=Math.min(this._sprite.getQuad().br.texCoords.u,this._sprite.getQuad().bl.texCoords.u),e=Math.max(this._sprite.getQuad().tl.texCoords.v,this._sprite.getQuad().bl.texCoords.v),f=Math.min(this._sprite.getQuad().tl.texCoords.v,this._sprite.getQuad().bl.texCoords.v),c=cc.ccp(c,e),d=cc.ccp(d,f),f=cc.SizeMake(this._sprite.getQuad().br.vertices.x-this._sprite.getQuad().bl.vertices.x,
this._sprite.getQuad().tl.vertices.y-this._sprite.getQuad().bl.vertices.y),a=cc.ccp(f.width*(a.x-d.x)/(c.x-d.x),f.height*(1-(a.y-d.y)/(c.y-d.y)));else a=cc.PointZero();b.x=a.x;b.y=a.y;return b},_origin:cc.PointZero(),_drawSize:cc.SizeZero(),_drawPosition:cc.PointZero(),_startAngle:270,_endAngle:270,_updateProgress:function(){if(cc.renderContextType==cc.CANVAS){var a=this.getContentSize();switch(this._type){case cc.CCPROGRESS_TIMER_TYPE_RADIAL_CW:this._endAngle=270+3.6*this._percentage;break;case cc.CCPROGRESS_TIMER_RADIAL_CCW:this._startAngle=
270-3.6*this._percentage;break;case cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_LR:this._origin=cc.PointZero();this._drawPosition=cc.PointZero();this._drawSize=cc.SizeMake(0|this._percentage/100*a.width,a.height);break;case cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_RL:this._drawSize=cc.SizeMake(0|this._percentage/100*a.width,a.height);this._origin=cc.ccp(a.width-this._drawSize.width|0,0);this._drawPosition=cc.ccp(a.width-this._drawSize.width,0);break;case cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_BT:this._drawSize=
cc.SizeMake(a.width,0|this._percentage/100*a.height);this._drawPosition=cc.PointZero();this._origin=cc.ccp(0,0|a.height-this._drawSize.height);break;case cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_TB:this._drawSize=cc.SizeMake(a.width,0|this._percentage/100*a.height),this._drawPosition=cc.ccp(0,a.height-this._drawSize.height|0),this._origin=cc.ccp(0,0)}}else switch(this._type){case cc.CCPROGRESS_TIMER_TYPE_RADIAL_CW:case cc.CCPROGRESS_TIMER_RADIAL_CCW:this._updateRadial();break;case cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_LR:case cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_RL:case cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_BT:case cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_TB:this._updateBar()}},
_updateBar:function(){var a=this._percentage/100,b=Math.max(this._sprite.getQuad().br.texCoords.u,this._sprite.getQuad().bl.texCoords.u),c=Math.min(this._sprite.getQuad().br.texCoords.u,this._sprite.getQuad().bl.texCoords.u),d=Math.max(this._sprite.getQuad().tl.texCoords.v,this._sprite.getQuad().bl.texCoords.v),e=Math.min(this._sprite.getQuad().tl.texCoords.v,this._sprite.getQuad().bl.texCoords.v),b=cc.ccp(b,d),c=cc.ccp(c,e),e=[],d=0;if(!this._vertexData){this._vertexDataCount=cc.PROGRESS_TEXTURE_COORDS_COUNT;
this._vertexData=[];for(d=0;d<this._vertexDataCount;d++)this._vertexData[d]=cc.V2F_C4B_T2F_QuadZero();cc.Assert(this._vertexData,"");this._type==cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_LR?(this._vertexData[e[0]=0].texCoords=cc.tex2(c.x,c.y),this._vertexData[e[1]=1].texCoords=cc.tex2(c.x,b.y)):this._type==cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_RL?(this._vertexData[e[0]=2].texCoords=cc.tex2(b.x,b.y),this._vertexData[e[1]=3].texCoords=cc.tex2(b.x,c.y)):this._type==cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_BT?
(this._vertexData[e[0]=1].texCoords=cc.tex2(c.x,b.y),this._vertexData[e[1]=3].texCoords=cc.tex2(b.x,b.y)):this._type==cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_TB&&(this._vertexData[e[0]=0].texCoords=cc.tex2(c.x,c.y),this._vertexData[e[1]=2].texCoords=cc.tex2(b.x,c.y));d=e[0];this._vertexData[d].vertices=this._vertexFromTexCoord(cc.ccp(this._vertexData[d].texCoords.u,this._vertexData[d].texCoords.v));d=e[1];this._vertexData[d].vertices=this._vertexFromTexCoord(cc.ccp(this._vertexData[d].texCoords.u,this._vertexData[d].texCoords.v));
if(this._sprite.isFlipY()||this._sprite.isFlipX())if(this._sprite.isFlipX()&&(d=e[0],this._vertexData[d].texCoords.u=c.x+b.x-this._vertexData[d].texCoords.u,d=e[1],this._vertexData[d].texCoords.u=c.x+b.x-this._vertexData[d].texCoords.u),this._sprite.isFlipY())d=e[0],this._vertexData[d].texCoords.v=c.y+b.y-this._vertexData[d].texCoords.v,d=e[1],this._vertexData[d].texCoords.v=c.y+b.y-this._vertexData[d].texCoords.v;this._updateColor()}this._type==cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_LR?(this._vertexData[e[0]=
3].texCoords=cc.tex2(c.x+(b.x-c.x)*a,b.y),this._vertexData[e[1]=2].texCoords=cc.tex2(c.x+(b.x-c.x)*a,c.y)):this._type==cc.CCPROGRESS_TIMER_TYPE_HORIZONTATAL_BAR_RL?(this._vertexData[e[0]=1].texCoords=cc.tex2(c.x+(b.x-c.x)*(1-a),c.y),this._vertexData[e[1]=0].texCoords=cc.tex2(c.x+(b.x-c.x)*(1-a),b.y)):this._type==cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_BT?(this._vertexData[e[0]=0].texCoords=cc.tex2(c.x,c.y+(b.y-c.y)*(1-a)),this._vertexData[e[1]=2].texCoords=cc.tex2(b.x,c.y+(b.y-c.y)*(1-a))):this._type==
cc.CCPROGRESS_TIMER_TYPE_VERTICAL_BAR_TB&&(this._vertexData[e[0]=1].texCoords=cc.tex2(c.x,c.y+(b.y-c.y)*a),this._vertexData[e[1]=3].texCoords=cc.tex2(b.x,c.y+(b.y-c.y)*a));d=e[0];this._vertexData[d].vertices=this._vertexFromTexCoord(cc.ccp(this._vertexData[d].texCoords.u,this._vertexData[d].texCoords.v));d=e[1];this._vertexData[d].vertices=this._vertexFromTexCoord(cc.ccp(this._vertexData[d].texCoords.u,this._vertexData[d].texCoords.v));if(this._sprite.isFlipY()||this._sprite.isFlipX())if(this._sprite.isFlipX()&&
(d=e[0],this._vertexData[d].texCoords.u=c.x+b.x-this._vertexData[d].texCoords.u,d=e[1],this._vertexData[d].texCoords.u=c.x+b.x-this._vertexData[d].texCoords.u),this._sprite.isFlipY())d=e[0],this._vertexData[d].texCoords.v=c.y+b.y-this._vertexData[d].texCoords.v,d=e[1],this._vertexData[d].texCoords.v=c.y+b.y-this._vertexData[d].texCoords.v},_updateRadial:function(){var a=Math.max(this._sprite.getQuad().br.texCoords.u,this._sprite.getQuad().bl.texCoords.u),b=Math.min(this._sprite.getQuad().br.texCoords.u,
this._sprite.getQuad().bl.texCoords.u),c=Math.max(this._sprite.getQuad().tl.texCoords.v,this._sprite.getQuad().bl.texCoords.v),d=Math.min(this._sprite.getQuad().tl.texCoords.v,this._sprite.getQuad().bl.texCoords.v),a=cc.ccp(a,c),b=cc.ccp(b,d),d=cc.ccpAdd(b,cc.ccpCompMult(this._anchorPoint,cc.ccpSub(a,b))),e=this._percentage/100,c=2*Math.PI*(this._type==cc.CCPROGRESS_TIMER_TYPE_RADIAL_CW?e:1-e),f=cc.ccp(d.x,b.y),h=cc.ccpRotateByAngle(f,d,c),c=0,g=cc.PointZero();if(0==e)g=f,c=0;else if(1==e)g=f,c=4;
else{g=Infinity;for(e=0;e<=cc.PROGRESS_TEXTURE_COORDS_COUNT;++e){var i=(e+(cc.PROGRESS_TEXTURE_COORDS_COUNT-1))%cc.PROGRESS_TEXTURE_COORDS_COUNT,f=cc.ccpAdd(b,cc.ccpCompMult(this._boundaryTexCoord(e%cc.PROGRESS_TEXTURE_COORDS_COUNT),cc.ccpSub(a,b))),i=cc.ccpAdd(b,cc.ccpCompMult(this._boundaryTexCoord(i),cc.ccpSub(a,b)));0==e?i=cc.ccpLerp(f,i,0.5):4==e&&(f=cc.ccpLerp(f,i,0.5));var j=cc.PointZero();if(cc.ccpLineIntersect(f,i,d,h,j)&&(!(0==e||4==e)||0<=j.x&&1>=j.x)&&0<=j.y&&j.y<g)g=j.y,c=e}g=cc.ccpAdd(d,
cc.ccpMult(cc.ccpSub(h,d),g))}h=!0;this._vertexDataCount!=c+3&&(h=!1,this._vertexData&&(this._vertexData=null,this._vertexDataCount=0));if(!this._vertexData){this._vertexDataCount=c+3;this._vertexData=[];for(e=0;e<this._vertexDataCount;e++)this._vertexData[e]=cc.V2F_C4B_T2F_QuadZero();cc.Assert(this._vertexData,"");this._updateColor()}if(!h){this._vertexData[0].texCoords=cc.tex2(d.x,d.y);this._vertexData[0].vertices=this._vertexFromTexCoord(d);this._vertexData[1].texCoords=cc.tex2(d.x,b.y);this._vertexData[1].vertices=
this._vertexFromTexCoord(cc.ccp(d.x,b.y));for(e=0;e<c;++e)d=cc.ccpAdd(b,cc.ccpCompMult(this._boundaryTexCoord(e),cc.ccpSub(a,b))),this._vertexData[e+2].texCoords=cc.tex2(d.x,d.y),this._vertexData[e+2].vertices=this._vertexFromTexCoord(d);if(this._sprite.isFlipX()||this._sprite.isFlipY())for(e=0;e<this._vertexDataCount-1;++e)if(this._sprite.isFlipX()&&(this._vertexData[e].texCoords.u=b.x+a.x-this._vertexData[e].texCoords.u),this._sprite.isFlipY())this._vertexData[e].texCoords.v=b.y+a.y-this._vertexData[e].texCoords.v}this._vertexData[this._vertexDataCount-
1].texCoords=cc.tex2(g.x,g.y);this._vertexData[this._vertexDataCount-1].vertices=this._vertexFromTexCoord(g);if(this._sprite.isFlipX()||this._sprite.isFlipY())if(this._sprite.isFlipX()&&(this._vertexData[this._vertexDataCount-1].texCoords.u=b.x+a.x-this._vertexData[this._vertexDataCount-1].texCoords.u),this._sprite.isFlipY())this._vertexData[this._vertexDataCount-1].texCoords.v=b.y+a.y-this._vertexData[this._vertexDataCount-1].texCoords.v},_updateColor:function(){var a=this._sprite.getOpacity(),b=
this._sprite.getColor(),b=new cc.Color4B(b.r,b.g,b.b,a);this._sprite.getTexture()instanceof HTMLImageElement||this._sprite.getTexture()instanceof HTMLCanvasElement?(b.r*=a/255,b.g*=a/255,b.b*=a/255):this._sprite.getTexture().getHasPremultipliedAlpha()&&(b.r*=a/255,b.g*=a/255,b.b*=a/255);if(this._vertexData)for(a=0;a<this._vertexDataCount;++a)this._vertexData[a].colors=b},_boundaryTexCoord:function(a){if(a<cc.PROGRESS_TEXTURE_COORDS_COUNT)switch(this._type){case cc.CCPROGRESS_TIMER_TYPE_RADIAL_CW:return cc.ccp(cc.PROGRESS_TEXTURE_COORDS>>
(a<<1)+1&1,cc.PROGRESS_TEXTURE_COORDS>>(a<<1)&1);case cc.CCPROGRESS_TIMER_RADIAL_CCW:return cc.ccp(cc.PROGRESS_TEXTURE_COORDS>>7-(a<<1)&1,cc.PROGRESS_TEXTURE_COORDS>>7-((a<<1)+1)&1)}return cc.PointZero()},_type:null,_percentage:0,_sprite:null,_vertexDataCount:0,_vertexData:null});cc.ProgressTimer.create=function(a){var b=new cc.ProgressTimer;return b.initWithFile(a)?b:null};cc.ProgressTimer.createWithTexture=function(a){var b=new cc.ProgressTimer;return b.initWithTexture(a)?b:null};cc=cc=cc||{};
cc.GridBase=cc.Class.extend({_active:null,_reuseGrid:null,_gridSize:null,_texture:null,_step:new cc.Point,_grabber:null,_isTextureFlipped:null,isActive:function(){return this._active},setActive:function(a){this._active=a;if(!a){var a=cc.Director.sharedDirector(),b=a.getProjection();a.setProjection(b)}},getReuseGrid:function(){return this._reuseGrid},setReuseGrid:function(a){this._reuseGrid=a},getGridSize:function(){return this._gridSize},setGridSize:function(a){this._gridSize.x=parseInt(a.x);this._gridSize.y=
parseInt(a.y)},getStep:function(){return this._step},setStep:function(a){this._step=a},isTextureFlipped:function(){return this._isTextureFlipped},setIsTextureFlipped:function(a){this._isTextureFlipped!=a&&(this._isTextureFlipped=a,this.calculateVertexPoints())},initWithSize:function(a){var b=cc.Director.sharedDirector().getWinSizeInPixels(),c=cc.NextPOT(b.width),d=cc.NextPOT(b.height),e=cc.CCTEXTURE_2D_PIXEL_FORMAT_RGBA8888,f=new cc.Texture2D;f.initWithData(e,c,d,b);if(!f)return cc.Log("cocos2d: CCGrid: error creating texture"),
!1;b=!0;this._active=!1;this._reuseGrid=0;this._gridSize=a;this._texture=f;this._isTextureFlipped=!1;a=this._texture.getContentSizeInPixels();this._step.x=a.width/this._gridSize.x;this._step.y=a.height/this._gridSize.y;(this._grabber=new cc.Grabber)?this._grabber.grab(this._texture):b=!1;this.calculateVertexPoints();return b},beforeDraw:function(){this.set2DProjection();this._grabber.beforeRender(this._texture)},afterDraw:function(a){this._grabber.afterRender(this._texture);this.set3DProjection();
this._applyLandscape();a.getCamera().getDirty()&&(a.getAnchorPointInPixels(),a.getCamera().locate());cc.Director.sharedDirector().setProjection(cc.Director.sharedDirector().getProjection());cc.Director.sharedDirector().applyOrientation();this.blit()},blit:function(){cc.Assert(0,"")},reuse:function(){cc.Assert(0,"")},calculateVertexPoints:function(){cc.Assert(0,"")},set2DProjection:function(){cc.Director.sharedDirector().getWinSizeInPixels()},set3DProjection:function(){cc.Director.sharedDirector().getDisplaySizeInPixels()},
_applyLandscape:function(){var a=cc.Director.sharedDirector();a.getDisplaySizeInPixels();a.getDeviceOrientation()}});cc.GridBase.create=function(){return new cc.GridBase};
cc.Grid3D=cc.GridBase.extend({_texCoordinates:null,_vertices:null,_originalVertices:null,_indices:null,vertex:function(a){var a=3*(a.x*(this._gridSize.y+1)+a.y),b=this._vertices;return new cc.Vertex3F(b[a],b[a+1],b[a+2])},originalVertex:function(a){var a=3*(a.x*(this._gridSize.y+1)+a.y),b=this._originalVertices;return new cc.Vertex3F(b[a],b[a+1],b[a+2])},setVertex:function(a,b){var c=3*(a.x*(this._gridSize.y+1)+a.y),d=this._vertices;d[c]=b.x;d[c+1]=b.y;d[c+2]=b.z},blit:function(){},reuse:function(){0<
this._reuseGrid&&--this._reuseGrid},calculateVertexPoints:function(){var a=this._texture.getPixelsWide(),b=this._texture.getPixelsHigh(),c=this._texture.getContentSizeInPixels().height,d=this._gridSize.x*this._gridSize.y;this._vertices=[];this._originalVertices=[];this._texCoordinates=[];this._indices=[];var e=this._vertices,f=this._texCoordinates,h=this._indices,g,i;for(g=0;g<this._gridSize.x;g++)for(i=0;i<this._gridSize.y;i++){var j=g*this._step.x,l=j+this._step.x,k=i*this._step.y,m=k+this._step.y;
e[g*i]=j;e[g*i+1]=k;e[g*i+2]=0;e[g*i+3]=l;e[g*i+4]=k;e[g*i+5]=0;e[g*i+6]=j;e[g*i+7]=m;e[g*i+8]=0;e[g*i+9]=l;e[g*i+10]=m;e[g*i+11]=0;var n=k,o=m;this._isTextureFlipped&&(n=c-k,o=c-m);f[g*i+12]=j/a;f[g*i+13]=n/b;f[g*i+14]=l/a;f[g*i+15]=n/b;f[g*i+16]=j/a;f[g*i+17]=o/b;f[g*i+18]=l/a;f[g*i+19]=o/b}for(g=0;g<d;g++)h[6*g+0]=4*g+0,h[6*g+1]=4*g+1,h[6*g+2]=4*g+2,h[6*g+3]=4*g+1,h[6*g+4]=4*g+2,h[6*g+5]=4*g+3}});cc.Grid3D.create=function(){};
cc.TiledGrid3D=cc.GridBase.extend({_texCoordinates:null,_vertices:null,_originalVertices:null,_indices:null,tile:function(){return new cc.Quad3},originalTile:function(a){var a=12*(this._gridSize.y*a.x+a.y),b=this._originalVertices;return new cc.Quad3(b[a],b[a+1],b[a+2],b[a+3])},setTile:function(a,b){this._vertices[12*(this._gridSize.y*a.x+a.y)]=b},blit:function(){},reuse:function(){if(0<this._reuseGrid){for(var a=0,b=12*(this._gridSize.x*this._gridSize.y).length;a<b;a++)this._originalVertices.push(this._vertices[a]);
--this._reuseGrid}},calculateVertexPoints:function(){var a=this._texture.getPixelsWide(),b=this._texture.getPixelsHigh(),c=this._texture.getContentSizeInPixels().height,d=this._gridSize.x*this._gridSize.y;this._vertices=[];this._originalVertices=[];this._texCoordinates=[];this._indices=[];var e=this._vertices,f=this._texCoordinates,h=this._indices,g,i;for(g=0;g<this._gridSize.x;g++)for(i=0;i<this._gridSize.y;i++){var j=g*this._step.x,l=j+this._step.x,k=i*this._step.y,m=k+this._step.y;e[g*i]=j;e[g*
i+1]=k;e[g*i+2]=0;e[g*i+3]=l;e[g*i+4]=k;e[g*i+5]=0;e[g*i+6]=j;e[g*i+7]=m;e[g*i+8]=0;e[g*i+9]=l;e[g*i+10]=m;e[g*i+11]=0;var n=k,o=m;this._isTextureFlipped&&(n=c-k,o=c-m);f[g*i+12]=j/a;f[g*i+13]=n/b;f[g*i+14]=l/a;f[g*i+15]=n/b;f[g*i+16]=j/a;f[g*i+17]=o/b;f[g*i+18]=l/a;f[g*i+19]=o/b}for(g=0;g<d;g++)h[6*g+0]=4*g+0,h[6*g+1]=4*g+1,h[6*g+2]=4*g+2,h[6*g+3]=4*g+1,h[6*g+4]=4*g+2,h[6*g+5]=4*g+3;a=0;for(d=12*d.length;a<d;a++)this._originalVertices.push(this._vertices[a])}});
cc.TiledGrid3D.create=function(a,b,c){var d=new cc.TiledGrid3D;d.initWithSize(a,b,c);return d};cc=cc=cc||{};cc.Grabber=cc.Class.extend({_fbo:0,_oldFBO:0,_glesVersion:null,ctor:function(){},grab:function(){},beforeRender:function(){},afterRender:function(){}});cc.CCACTION_TAG_INVALID=-1;
cc.Action=cc.Class.extend({_originalTarget:null,_target:null,_tag:cc.CCACTION_TAG_INVALID,description:function(){return"<cc.Action | Tag = "+this._tag+">"},copyWithZone:function(){return this.copy()},copy:function(){return cc.clone(this)},isDone:function(){return!0},startWithTarget:function(a){this._target=this._originalTarget=a},stop:function(){this._target=null},step:function(){cc.Log("[Action step]. override me")},update:function(){cc.Log("[Action update]. override me")},getTarget:function(){return this._target},
setTarget:function(a){this._target=a},getOriginalTarget:function(){return this._originalTarget},setOriginalTarget:function(a){this._originalTarget=a},getTag:function(){return this._tag},setTag:function(a){this._tag=a}});cc.Action.create=function(){return new cc.Action};cc.FiniteTimeAction=cc.Action.extend({_duration:0,getDuration:function(){return this._duration},setDuration:function(a){this._duration=a},reverse:function(){cc.Log("cocos2d: FiniteTimeAction#reverse: Implement me");return null}});
cc.Speed=cc.Action.extend({_speed:0,_innerAction:null,getSpeed:function(){return this._speed},setSpeed:function(a){this._speed=a},initWithAction:function(a,b){cc.Assert(null!=a,"");this._innerAction=a;this._speed=b;return!0},startWithTarget:function(a){this._super(a);this._innerAction.startWithTarget(a)},stop:function(){this._innerAction.stop();cc.Action.stop()},step:function(a){this._innerAction.step(a*this._speed)},isDone:function(){return this._innerAction.isDone()},reverse:function(){return cc.Speed.create(this._innerAction.reverse(),
this._speed)},setInnerAction:function(a){this._innerAction!=a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}});cc.Speed.create=function(a,b){var c=new cc.Speed;return c&&c.initWithAction(a,b)?c:null};
cc.Follow=cc.Action.extend({isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(a){this._boundarySet=a},initWithTarget:function(a,b){cc.Assert(null!=a,"");this._followedNode=a;this._boundaryFullyCovered=this._boundarySet=!1;var c=cc.Director.sharedDirector().getWinSize();this._fullScreenSize=cc.PointMake(c.width,c.height);this._halfScreenSize=cc.ccpMult(this._fullScreenSize,0.5);if(b&&(this.leftBoundary=-(b.origin.x+b.size.width-this._fullScreenSize.x),this.rightBoundary=-b.origin.x,
this.topBoundary=-b.origin.y,this.bottomBoundary=-(b.origin.y+b.size.height-this._fullScreenSize.y),this.rightBoundary<this.leftBoundary&&(this.rightBoundary=this.leftBoundary=(this.leftBoundary+this.rightBoundary)/2),this.topBoundary<this.bottomBoundary&&(this.topBoundary=this.bottomBoundary=(this.topBoundary+this.bottomBoundary)/2),this.topBoundary==this.bottomBoundary&&this.leftBoundary==this.rightBoundary))this._boundaryFullyCovered=!0;return!0},step:function(){if(this._boundarySet){if(!this._boundaryFullyCovered){var a=
cc.ccpSub(this._halfScreenSize,this._followedNode.getPosition());this._target.setPosition(cc.ccp(cc.clampf(a.x,this.leftBoundary,this.rightBoundary),cc.clampf(a.y,this.bottomBoundary,this.topBoundary)))}}else this._target.setPosition(cc.ccpSub(this._halfScreenSize,this._followedNode.getPosition()))},isDone:function(){return!this._followedNode.getIsRunning()},stop:function(){this._target=null;cc.Action.stop()},_followedNode:null,_boundarySet:!1,_boundaryFullyCovered:!1,_halfScreenSize:null,_fullScreenSize:null,
leftBoundary:0,rightBoundary:0,topBoundary:0,bottomBoundary:0});cc.Follow.create=function(a,b){var c=new cc.Follow;return null!=b&&c&&c.initWithTarget(a,b)||c&&c.initWithTarget(a)?c:null};cc.ActionInterval=cc.FiniteTimeAction.extend({_elapsed:0,_firstTick:!1,getElapsed:function(){return this._elapsed},initWithDuration:function(a){this._duration=0==a?cc.FLT_EPSILON:a;this._elapsed=0;return this._firstTick=!0},isDone:function(){return this._elapsed>=this._duration},step:function(a){this._firstTick?(this._firstTick=!1,this._elapsed=0):this._elapsed+=a;this.update(1>this._elapsed/this._duration?this._elapsed/this._duration:1)},startWithTarget:function(a){this._super(a);this._elapsed=0;
this._firstTick=!0},reverse:function(){return null},setAmplitudeRate:function(){cc.Assert(0,"Actioninterval setAmplitudeRate")},getAmplitudeRate:function(){cc.Assert(0,"Actioninterval getAmplitudeRate");return 0}});cc.ActionInterval.create=function(a){var b=new cc.ActionInterval;b.initWithDuration(a);return b};
cc.Sequence=cc.ActionInterval.extend({_actions:null,_split:null,_last:0,ctor:function(){this._actions=[]},initOneTwo:function(a,b){cc.Assert(null!=a,"Sequence.initOneTwo");cc.Assert(null!=b,"Sequence.initOneTwo");var c=a.getDuration(),d=b.getDuration();if(isNaN(c)||isNaN(d))console.log(a),console.log(b);this.initWithDuration(a.getDuration()+b.getDuration());this._actions[0]=a;this._actions[1]=b;return!0},startWithTarget:function(a){this._super(a);this._split=this._actions[0].getDuration()/this._duration;
this._last=-1},stop:function(){this._actions[0].stop();this._actions[1].stop();this._super()},update:function(a){var b=0,c=0;a>=this._split?(b=1,c=1==this._split?1:(a-this._split)/(1-this._split)):(b=0,c=0!=this._split?a/this._split:1);-1==this._last&&1==b&&(this._actions[0].startWithTarget(this._target),this._actions[0].update(1),this._actions[0].stop());this._last!=b&&(-1!=this._last&&(this._actions[this._last].update(1),this._actions[this._last].stop()),this._actions[b].startWithTarget(this._target));
this._actions[b].update(c);this._last=b},reverse:function(){return cc.Sequence._actionOneTwo(this._actions[1].reverse(),this._actions[0].reverse())}});cc.Sequence.create=function(a){for(var b="Array"==typeof a?a:arguments,c=b[0],d=1;d<b.length;d++)null!=b[d]&&(c=cc.Sequence._actionOneTwo(c,b[d]));return c};cc.Sequence._actionOneTwo=function(a,b){var c=new cc.Sequence;c.initOneTwo(a,b);return c};
cc.Repeat=cc.ActionInterval.extend({_times:0,_total:0,_innerAction:null,initWithAction:function(a,b){return this.initWithDuration(a.getDuration()*b)?(this._times=b,this._innerAction=a,this._total=0,!0):!1},startWithTarget:function(a){this._total=0;this._super(a);this._innerAction.startWithTarget(a)},stop:function(){this._innerAction.stop();this._super()},update:function(a){var b=a*this._times;b>this._total+1?(this._innerAction.update(1),this._total++,this._innerAction.stop(),this._innerAction.startWithTarget(this._target),
this._total==this._times?this._innerAction.update(0):this._innerAction.update(b-this._total)):(b%=1,1==a&&(b=1,this._total++),this._innerAction.update(1<b?1:b))},isDone:function(){return this._total==this._times},reverse:function(){return cc.Repeat.create(this._innerAction.reverse(),this._times)},setInnerAction:function(a){this._innerAction!=a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}});cc.Repeat.create=function(a,b){var c=new cc.Repeat;c.initWithAction(a,b);return c};
cc.RepeatForever=cc.ActionInterval.extend({_innerAction:null,initWithAction:function(a){cc.Assert(null!=a,"");this._innerAction=a;return!0},startWithTarget:function(a){this._super(a);this._innerAction.startWithTarget(a)},step:function(a){this._innerAction.step(a);this._innerAction.isDone()&&(a=a+this._innerAction.getDuration()-this._innerAction.getElapsed(),this._innerAction.startWithTarget(this._target),this._innerAction.step(a))},isDone:function(){return!1},reverse:function(){return cc.RepeatForever.create(this._innerAction.reverse())},
setInnerAction:function(a){this._innerAction!=a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}});cc.RepeatForever.create=function(a){var b=new cc.RepeatForever;return b&&b.initWithAction(a)?b:null};
cc.Spawn=cc.ActionInterval.extend({initOneTwo:function(a,b){cc.Assert(null!=a,"no action1");cc.Assert(null!=b,"no action2");var c=!1,d=a.getDuration(),e=b.getDuration();this.initWithDuration(Math.max(d,e))&&(this._one=a,this._two=b,d>e?this._two=cc.Sequence._actionOneTwo(b,cc.DelayTime.create(d-e)):d<e&&(this._one=cc.Sequence._actionOneTwo(a,cc.DelayTime.create(e-d))),c=!0);return c},startWithTarget:function(a){this._super(a);this._one.startWithTarget(a);this._two.startWithTarget(a)},stop:function(){this._one.stop();
this._two.stop();this._super()},update:function(a){this._one&&this._one.update(a);this._two&&this._two.update(a)},reverse:function(){return cc.Spawn._actionOneTwo(this._one.reverse(),this._two.reverse())},_one:null,_two:null});cc.Spawn.create=function(a){for(var b="Array"==typeof a?a:arguments,c=b[0],d=1;d<b.length;d++)null!=b[d]&&(c=this._actionOneTwo(c,b[d]));return c};cc.Spawn._actionOneTwo=function(a,b){var c=new cc.Spawn;c.initOneTwo(a,b);return c};
cc.RotateTo=cc.ActionInterval.extend({_dstAngle:0,_startAngle:0,_diffAngle:0,initWithDuration:function(a,b){return this._super(a)?(this._dstAngle=b,!0):!1},startWithTarget:function(a){this._super(a);this._startAngle=a.getRotation();this._startAngle%=360;this._diffAngle=this._dstAngle-this._startAngle;180<this._diffAngle&&(this._diffAngle-=360);-180>this._diffAngle&&(this._diffAngle+=360)},reverse:function(){cc.Assert(0,"RotateTo reverse not implemented")},update:function(a){this._target&&this._target.setRotation(this._startAngle+
this._diffAngle*a)}});cc.RotateTo.create=function(a,b){var c=new cc.RotateTo;c.initWithDuration(a,b);return c};cc.RotateBy=cc.ActionInterval.extend({_angle:0,_startAngle:0,initWithDuration:function(a,b){return this._super(a)?(this._angle=b,!0):!1},startWithTarget:function(a){this._super(a);this._startAngle=a.getRotation()},update:function(a){this._target&&this._target.setRotation(this._startAngle+this._angle*a)},reverse:function(){return cc.RotateBy.create(this._duration,-this._angle)}});
cc.RotateBy.create=function(a,b){var c=new cc.RotateBy;c.initWithDuration(a,b);return c};
cc.MoveTo=cc.ActionInterval.extend({initWithDuration:function(a,b){return this._super(a)?(this._endPosition=b,!0):!1},startWithTarget:function(a){this._super(a);this._startPosition=a.getPosition();this._delta=cc.ccpSub(this._endPosition,this._startPosition)},update:function(a){this._target&&this._target.setPosition(cc.ccp(this._startPosition.x+this._delta.x*a,this._startPosition.y+this._delta.y*a))},reverse:function(){cc.Assert(0,"moveto reverse is not implemented")},_endPosition:new cc.Point,_startPosition:new cc.Point,
_delta:new cc.Point});cc.MoveTo.create=function(a,b){var c=new cc.MoveTo;c.initWithDuration(a,b);return c};cc.MoveBy=cc.MoveTo.extend({initWithDuration:function(a,b){return this._super(a,b)?(this._delta=b,!0):!1},startWithTarget:function(a){var b=this._delta;this._super(a);this._delta=b},reverse:function(){return cc.MoveBy.create(this._duration,cc.ccp(-this._delta.x,-this._delta.y))}});cc.MoveBy.create=function(a,b){var c=new cc.MoveBy;c.initWithDuration(a,b);return c};
cc.SkewTo=cc.ActionInterval.extend({initWithDuration:function(a,b,c){var d=!1;this._super(a)&&(this._endSkewX=b,this._endSkewY=c,d=!0);return d},startWithTarget:function(a){this._super(a);this._startSkewX=a.getSkewX();this._startSkewX=0<this._startSkewX?this._startSkewX%180:this._startSkewX%-180;this._deltaX=this._endSkewX-this._startSkewX;180<this._deltaX&&(this._deltaX-=360);-180>this._deltaX&&(this._deltaX+=360);this._startSkewY=a.getSkewY();this._startSkewY=0<this._startSkewY?this._startSkewY%
360:this._startSkewY%-360;this._deltaY=this._endSkewY-this._startSkewY;180<this._deltaY&&(this._deltaY-=360);-180>this._deltaY&&(this._deltaY+=360)},update:function(a){this._target.setSkewX(this._startSkewX+this._deltaX*a);this._target.setSkewY(this._startSkewY+this._deltaY*a)},_skewX:0,_skewY:0,_startSkewX:0,_startSkewY:0,_endSkewX:0,_endSkewY:0,_deltaX:0,_deltaY:0});cc.SkewTo.create=function(a,b,c){var d=new cc.SkewTo;d&&d.initWithDuration(a,b,c);return d};
cc.SkewBy=cc.SkewTo.extend({initWithDuration:function(a,b,c){var d=!1;this._super(a,b,c)&&(this._skewX=b,this._skewY=c,d=!0);return d},startWithTarget:function(a){this._super(a);this._deltaX=this._skewX;this._deltaY=this._skewY;this._endSkewX=this._startSkewX+this._deltaX;this._endSkewY=this._startSkewY+this._deltaY},reverse:function(){return cc.SkewBy.create(this._duration,-this._skewX,-this._skewY)}});cc.SkewBy.create=function(a,b,c){var d=new cc.SkewBy;d&&d.initWithDuration(a,b,c);return d};
cc.JumpBy=cc.ActionInterval.extend({initWithDuration:function(a,b,c,d){return this._super(a)?(this._delta=b,this._height=c,this._jumps=d,!0):!1},startWithTarget:function(a){this._super(a);this._startPosition=a.getPosition()},update:function(a){if(this._target){var b=a*this._jumps%1,b=4*this._height*b*(1-b),b=b+this._delta.y*a;this._target.setPosition(cc.ccp(this._startPosition.x+this._delta.x*a,this._startPosition.y+b))}},reverse:function(){return cc.JumpBy.create(this._duration,cc.ccp(-this._delta.x,
-this._delta.y),this._height,this._jumps)},_startPosition:new cc.Point,_delta:new cc.Point,_height:0,_jumps:0});cc.JumpBy.create=function(a,b,c,d){var e=new cc.JumpBy;e.initWithDuration(a,b,c,d);return e};cc.JumpTo=cc.JumpBy.extend({startWithTarget:function(a){this._super(a);this._delta=cc.ccp(this._delta.x-this._startPosition.x,this._delta.y-this._startPosition.y)}});cc.JumpTo.create=function(a,b,c,d){var e=new cc.JumpTo;e.initWithDuration(a,b,c,d);return e};
cc.BezierConfig=cc.Class.extend({ctor:function(){this.endPosition=new cc.Point;this.controlPoint_1=new cc.Point;this.controlPoint_2=new cc.Point}});cc.bezierat=function(a,b,c,d,e){return Math.pow(1-e,3)*a+3*e*Math.pow(1-e,2)*b+3*Math.pow(e,2)*(1-e)*c+Math.pow(e,3)*d};
cc.BezierBy=cc.ActionInterval.extend({initWithDuration:function(a,b){return this._super(a)?(this._config=b,!0):!1},startWithTarget:function(a){this._super(a);this._startPosition=a.getPosition()},update:function(a){if(this._target){var b=this._config.controlPoint_1.y,c=this._config.controlPoint_2.y,d=this._config.endPosition.y,e=cc.bezierat(0,this._config.controlPoint_1.x,this._config.controlPoint_2.x,this._config.endPosition.x,a),a=cc.bezierat(0,b,c,d,a);this._target.setPosition(cc.ccpAdd(this._startPosition,
cc.ccp(e,a)))}},reverse:function(){var a=new cc.BezierConfig;a.endPosition=cc.ccpNeg(this._config.endPosition);a.controlPoint_1=cc.ccpAdd(this._config.controlPoint_2,cc.ccpNeg(this._config.endPosition));a.controlPoint_2=cc.ccpAdd(this._config.controlPoint_1,cc.ccpNeg(this._config.endPosition));return cc.BezierBy.create(this._duration,a)},ctor:function(){this._config=new cc.BezierConfig;this._startPosition=new cc.Point}});
cc.BezierBy.create=function(a,b){var c=new cc.BezierBy;c.initWithDuration(a,b);return c};cc.BezierTo=cc.BezierBy.extend({startWithTarget:function(a){this._super(a);this._config.controlPoint_1=cc.ccpSub(this._config.controlPoint_1,this._startPosition);this._config.controlPoint_2=cc.ccpSub(this._config.controlPoint_2,this._startPosition);this._config.endPosition=cc.ccpSub(this._config.endPosition,this._startPosition)}});
cc.BezierTo.create=function(a,b){var c=new cc.BezierTo;c.initWithDuration(a,b);return c};
cc.ScaleTo=cc.ActionInterval.extend({initWithDuration:function(a,b,c){return this._super(a)?(this._endScaleX=b,this._endScaleY=null!=c?c:b,!0):!1},startWithTarget:function(a){this._super(a);this._startScaleX=a.getScaleX();this._startScaleY=a.getScaleY();this._deltaX=this._endScaleX-this._startScaleX;this._deltaY=this._endScaleY-this._startScaleY},update:function(a){this._target&&(this._target.setScaleX(this._startScaleX+this._deltaX*a),this._target.setScaleY(this._startScaleY+this._deltaY*a))},_scaleX:1,
_scaleY:1,_startScaleX:1,_startScaleY:1,_endScaleX:0,_endScaleY:0,_deltaX:0,_deltaY:0});cc.ScaleTo.create=function(a,b,c){var d=new cc.ScaleTo;c?d.initWithDuration(a,b,c):d.initWithDuration(a,b);return d};cc.ScaleBy=cc.ScaleTo.extend({startWithTarget:function(a){this._super(a);this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX;this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},reverse:function(){return cc.ScaleBy.create(this._duration,1/this._endScaleX,1/this._endScaleY)}});
cc.ScaleBy.create=function(a,b,c){var d=new cc.ScaleBy;3==arguments.length?d.initWithDuration(a,b,c):d.initWithDuration(a,b);return d};cc.Blink=cc.ActionInterval.extend({initWithDuration:function(a,b){return this._super(a)?(this._times=b,!0):!1},update:function(a){if(this._target&&!this.isDone()){var b=1/this._times;this._target.setIsVisible(a%b>b/2?!0:!1)}},reverse:function(){return cc.Blink.create(this._duration,this._times)},_times:0});
cc.Blink.create=function(a,b){var c=new cc.Blink;c.initWithDuration(a,b);return c};cc.FadeIn=cc.ActionInterval.extend({update:function(a){this._target.setOpacity(255*a)},reverse:function(){return cc.FadeOut.create(this._duration)}});cc.FadeIn.create=function(a){var b=new cc.FadeIn;b.initWithDuration(a);return b};cc.FadeOut=cc.ActionInterval.extend({update:function(a){this._target.setOpacity(255*(1-a))},reverse:function(){return cc.FadeIn.create(this._duration)}});
cc.FadeOut.create=function(a){var b=new cc.FadeOut;b.initWithDuration(a);return b};cc.FadeTo=cc.ActionInterval.extend({initWithDuration:function(a,b){return this._super(a)?(this._toOpacity=b,!0):!1},update:function(a){this._target.setOpacity(this._fromOpacity+(this._toOpacity-this._fromOpacity)*a)},startWithTarget:function(a){this._super(a);this._fromOpacity=a.getOpacity()},_toOpacity:"",_fromOpacity:""});cc.FadeTo.create=function(a,b){var c=new cc.FadeTo;c.initWithDuration(a,b);return c};
cc.TintTo=cc.ActionInterval.extend({initWithDuration:function(a,b,c,d){return this._super(a)?(this._to=cc.ccc3(b,c,d),!0):!1},startWithTarget:function(a){this._super(a);this._from=this._target.getColor()},update:function(a){this._target.setColor(cc.ccc3(this._from.r+(this._to.r-this._from.r)*a,this._from.g+(this._to.g-this._from.g)*a,this._from.b+(this._to.b-this._from.b)*a))},_to:new cc.Color3B,_from:new cc.Color3B});
cc.TintTo.create=function(a,b,c,d){var e=new cc.TintTo;e.initWithDuration(a,b,c,d);return e};
cc.TintBy=cc.ActionInterval.extend({initWithDuration:function(a,b,c,d){return this._super(a)?(this._deltaR=b,this._deltaG=c,this._deltaB=d,!0):!1},startWithTarget:function(a){this._super(a);a=a.getColor();this._fromR=a.r;this._fromG=a.g;this._fromB=a.b},update:function(a){this._target.setColor(cc.ccc3(this._fromR+this._deltaR*a,this._fromG+this._deltaG*a,this._fromB+this._deltaB*a))},reverse:function(){return cc.TintBy.create(this._duration,-this._deltaR,-this._deltaG,-this._deltaB)},_deltaR:0,_deltaG:0,
_deltaB:0,_fromR:0,_fromG:0,_fromB:0});cc.TintBy.create=function(a,b,c,d){var e=new cc.TintBy;e.initWithDuration(a,b,c,d);return e};cc.DelayTime=cc.ActionInterval.extend({update:function(){},reverse:function(){return cc.DelayTime.create(this._duration)}});cc.DelayTime.create=function(a){var b=new cc.DelayTime;b.initWithDuration(a);return b};
cc.ReverseTime=cc.ActionInterval.extend({initWithAction:function(a){cc.Assert(null!=a,"");cc.Assert(a!=this._other,"");return this._super(a.getDuration())?(this._other=a,!0):!1},startWithTarget:function(a){this._super(a);this._other.startWithTarget(a)},update:function(a){this._other&&this._other.update(1-a)},reverse:function(){return this._other.copy()},stop:function(){this._other.stop();this._super()},_other:null});cc.ReverseTime.create=function(a){var b=new cc.ReverseTime;b.initWithAction(a);return b};
cc.Animate=cc.ActionInterval.extend({_animation:null,_origFrame:null,_restoreOriginalFrame:!1,getAnimation:function(){return this._animation},setAnimation:function(a){this._animation=a},initWithAnimation:function(a,b){cc.Assert(null!=a,"");return this.initWithDuration(a.getFrames().length*a.getDelay(),null,null,!0)?(this._restoreOriginalFrame=b,this._animation=a,this._origFrame=null,!0):!1},initWithDuration:function(a,b,c,d){if(d)return this._super(a);cc.Assert(null!=b,"");return this._super(a)?(this._restoreOriginalFrame=
c,this._animation=b,this._origFrame=null,!0):!1},startWithTarget:function(a){this._super(a);this._restoreOriginalFrame&&(this._origFrame=a.displayedFrame())},update:function(a){var b=this._animation.getFrames(),c=b.length,a=0|a*c;a>=c&&(a=c-1);c=this._target;c.isFrameDisplayed(b[a])||c.setDisplayFrame(b[a])},reverse:function(){var a=cc.Animation.create(this._animation.getFrames().reverse(),this._animation.getDelay());return cc.Animate.create(this._duration,a,this._restoreOriginalFrame)},stop:function(){this._restoreOriginalFrame&&
this._target&&this._target.setDisplayFrame(this._origFrame);this._super()}});cc.Animate.create=function(){var a=new cc.Animate;3==arguments.length?a.initWithDuration(arguments[0],arguments[1],arguments[2]):a.initWithAnimation(arguments[0],arguments[1]);return a};cc.ActionInstant=cc.FiniteTimeAction.extend({isDone:function(){return!0},step:function(){this.update(1)},update:function(){}});cc.Show=cc.ActionInstant.extend({startWithTarget:function(a){this._super(a);a.setIsVisible(!0)},reverse:function(){return cc.Hide.create.call(this)}});cc.Show.create=function(){return new cc.Show};cc.Hide=cc.ActionInstant.extend({startWithTarget:function(a){this._super(a);a.setIsVisible(!1)},reverse:function(){return cc.Show.create.call(this)}});cc.Hide.create=function(){return new cc.Hide};
cc.ToggleVisibility=cc.ActionInstant.extend({startWithTarget:function(a){this._super();a.setIsVisible(!a.getIsVisible())},reverse:function(){return new cc.ToggleVisibility}});cc.ToggleVisibility.create=function(){return new cc.ToggleVisibility};cc.FlipX=cc.ActionInstant.extend({initWithFlipX:function(a){this._flipX=a;return!0},startWithTarget:function(a){this._super();a.setFlipX(this._flipX)},reverse:function(){return this.actionWithFlipX(!this._flipX)},_flipX:!1});
cc.FlipX.create=function(a){var b=new cc.FlipX;if(b.initWithFlipX(a))return b};cc.FlipY=cc.ActionInstant.extend({initWithFlipY:function(a){this._flipY=a;return!0},startWithTarget:function(a){this._super();a.setFlipY(this._flipY)},reverse:function(){return this.actionWithFlipY(!this._flipY)},_flipY:!1});cc.FlipY.create=function(a){var b=new cc.FlipY;if(b.initWithFlipY(a))return b};
cc.Place=cc.ActionInstant.extend({initWithPosition:function(a){this._position=a;return!0},startWithTarget:function(a){this._super(a);this._target.setPosition(this._position)}});cc.Place.create=function(a){var b=new cc.Place;b.initWithPosition(a);return b};
cc.CallFunc=cc.ActionInstant.extend({initWithTarget:function(a,b,c){this._data=c||null;this._callFunc=b||null;this._selectorTarget=a||null;return!0},execute:function(){null!=this._callFunc&&this._callFunc.call(this._selectorTarget,this._target,this._data)},startWithTarget:function(a){this._super(a);this.execute()},getTargetCallback:function(){return this._selectorTarget},setTargetCallback:function(a){a!=this._selectorTarget&&(this._selectorTarget&&(this._selectorTarget=null),this._selectorTarget=
a)},_selectorTarget:null,_callFunc:null});cc.CallFunc.create=function(a,b,c){var d=new cc.CallFunc;return d&&d.initWithTarget(a,b,c)?(d._callFunc=b,d):null};cc.HashElement=cc.Class.extend({actions:null,target:null,actionIndex:0,currentAction:null,currentActionSalvaged:!1,paused:!1,hh:null,ctor:function(){this.actions=[]}});
cc.ActionManager=cc.Class.extend({_targets:null,_currentTarget:null,_currentTargetSalvaged:!1,_searchElementByTarget:function(a,b){for(var c=0;c<a.length;c++)if(b==a[c].target)return a[c];return null},ctor:function(){cc.Assert(null==cc.sharedManager,"");this._targets=[]},init:function(){cc.Scheduler.sharedScheduler().scheduleUpdateForTarget(this,0,!1);return!0},selTarget:null,addAction:function(a,b,c){cc.Assert(null!=a,"no action");cc.Assert(null!=b,"");var d=this._searchElementByTarget(this._targets,
b);d||(d=new cc.HashElement,d.paused=c,d.target=b,d.id=b.id||"no id",this.selTarget=d,this._targets.push(d));this._actionAllocWithHashElement(d);cc.Assert(-1==d.actions.indexOf(a),"ActionManager.addAction(),");d.actions.push(a);a.startWithTarget(b)},removeAllActions:function(){for(var a=0;a<this._targets.length;a++){var b=this._targets[a];b&&this.removeAllActionsFromTarget(b.target)}},removeAllActionsFromTarget:function(a){if(null!=a&&(a=this._searchElementByTarget(this._targets,a)))a.currentAction in
a.actions&&!a.currentActionSalvaged&&(a.currentActionSalvaged=!0),a.actions=[],this._currentTarget==a?this._currentTargetSalvaged=!0:this._deleteHashElement(a)},removeAction:function(a){if(null!=a){var b=this._searchElementByTarget(this._targets,a.getOriginalTarget());if(b)for(var c=0;c<b.actions.length;c++){if(b.actions[c]==a){b.actions.splice(c,1);break}}else cc.Log("cocos2d: removeAction: Target not found")}},removeActionByTag:function(a,b){cc.Assert(a!=cc.CCACTION_TAG_INVALID,"");cc.Assert(null!=
b,"");var c=this._searchElementByTarget(this._targets,b);if(c)for(var d=c.actions.length,e=0;e<d;++e){var f=c.actions[e];if(f&&f.getTag()==a&&f.getOriginalTarget()==b){this._removeActionAtIndex(e,c);break}}},getActionByTag:function(a,b){cc.Assert(a!=cc.CCACTION_TAG_INVALID,"");var c=this._searchElementByTarget(this._targets,b);if(c&&null!=c.actions)for(var d=0;d<c.actions.length;++d){var e=c.actions[d];if(e&&e.getTag()==a)return e}return null},numberOfRunningActionsInTarget:function(a){return(a=this._searchElementByTarget(this._targets,
a))?a.actions?a.actions.length:0:0},pauseTarget:function(a){if(a=this._searchElementByTarget(this._targets,a))a.paused=!0},resumeTarget:function(a){if(a=this._searchElementByTarget(this._targets,a))a.paused=!1},purgeSharedManager:function(){cc.Scheduler.sharedScheduler().unscheduleUpdateForTarget(this)},_removeActionAtIndex:function(a,b){b.actions[a]==b.currentAction&&!b.currentActionSalvaged&&(b.currentActionSalvaged=!0);b.actions[a]=null;b.actionIndex>=a&&b.actionIndex--;0==b.actions.length&&(this._currentTarget==
b?this._currentTargetSalvaged=!0:this._deleteHashElement(b))},_deleteHashElement:function(a){cc.ArrayRemoveObject(this._targets,a);a&&(a.actions=null,a.target=null)},_actionAllocWithHashElement:function(a){null==a.actions&&(a.actions=[])},update:function(a){for(var b=0;b<this._targets.length;b++){this._currentTarget=this._targets[b];this._currentTargetSalvaged=!1;if(!this._currentTarget.paused)for(this._currentTarget.actionIndex=0;this._currentTarget.actionIndex<this._currentTarget.actions.length;this._currentTarget.actionIndex++)if(this._currentTarget.currentAction=
this._currentTarget.actions[this._currentTarget.actionIndex],null!=this._currentTarget.currentAction){this._currentTarget.currentActionSalvaged=!1;this._currentTarget.currentAction.step(a);if(this._currentTarget.currentActionSalvaged)this._currentTarget.currentAction=null;else if(this._currentTarget.currentAction.isDone()){this._currentTarget.currentAction.stop();var c=this._currentTarget.currentAction;this._currentTarget.currentAction=null;this.removeAction(c)}this._currentTarget.currentAction=null}this._currentTargetSalvaged&&
0==this._currentTarget.actions.length&&this._deleteHashElement(this._currentTarget)}}});cc.ActionManager.sharedManager=function(){cc.sharedManager||(cc.sharedManager=new cc.ActionManager,cc.sharedManager.init()||delete cc.sharedManager);return cc.sharedManager};cc.sharedManager=null;cc.ProgressTo=cc.ActionInterval.extend({_to:0,_from:0,initWithDuration:function(a,b){return this._super(a)?(this._to=b,!0):!1},copyWithZone:function(a){var b=null;a&&a._copyObject?b=a._copyObject:(b=new cc.ProgressTo,a=new cc.Zone(b));this._super(a);b.initWithDuration(this._duration,this._to);return b},startWithTarget:function(a){this._super(a);this._from=a.getPercentage();100==this._from&&(this._from=0)},update:function(a){this._target instanceof cc.ProgressTimer&&this._target.setPercentage(this._from+
(this._to-this._from)*a)}});cc.ProgressTo.create=function(a,b){var c=new cc.ProgressTo;c.initWithDuration(a,b);return c};
cc.ProgressFromTo=cc.ActionInterval.extend({_to:0,_from:0,initWithDuration:function(a,b,c){return this._super(a)?(this._to=c,this._from=b,!0):!1},copyWithZone:function(a){var b=null;a&&a._copyObject?b=a._copyObject:(b=new cc.ProgressFromTo,a=new cc.Zone(b));this._super(a);b.initWithDuration(this._duration,this._from,this._to);return b},reverse:function(){return cc.ProgressFromTo.create(this._duration,this._to,this._from)},startWithTarget:function(a){this._super(a)},update:function(a){this._target instanceof
cc.ProgressTimer&&this._target.setPercentage(this._from+(this._to-this._from)*a)}});cc.ProgressFromTo.create=function(a,b,c){var d=new cc.ProgressFromTo;d.initWithDuration(a,b,c);return d};cc=cc=cc||{};cc.ActionCamera=cc.ActionInterval.extend({centerXOrig:0,centerYOrig:0,centerZOrig:0,eyeXOrig:0,eyeYOrig:0,eyeZOrig:0,upXOrig:0,upYOrig:0,upZOrig:0,startWithTarget:function(a){this._super(a);a=a.getCamera();a.getCenterXYZ(this.centerXOrig,this.centerYOrig,this.centerZOrig);a.getEyeXYZ(this.eyeXOrig,this.eyeYOrig,this.eyeZOrig);a.getUpXYZ(this.upXOrig,this.upYOrig,this.upZOrig)},reverse:function(){return cc.ReverseTime.create(this)}});
cc.OrbitCamera=cc.ActionCamera.extend({radius:0,deltaRadius:0,angleZ:0,deltaAngleZ:0,angleX:0,deltaAngleX:0,radZ:0,radDeltaZ:0,radX:0,radDeltaX:0,initWithDuration:function(a,b,c,d,e,f,h){return this._super(a)?(this.radius=b,this.deltaRadius=c,this.angleZ=d,this.deltaAngleZ=e,this.angleX=f,this.deltaAngleX=h,this.radDeltaZ=cc.DEGREES_TO_RADIANS(e),this.radDeltaX=cc.DEGREES_TO_RADIANS(h),!0):!1},sphericalRadius:function(){var a,b;a=this._target.getCamera();a.getEyeXYZ(void 0,void 0,void 0);a.getCenterXYZ(void 0,
void 0,void 0);a=Math.sqrt(Math.pow(NaN,2)+Math.pow(NaN,2)+Math.pow(NaN,2));b=Math.sqrt(Math.pow(NaN,2)+Math.pow(NaN,2));0==b&&(b=cc.FLT_EPSILON);0==a&&(a=cc.FLT_EPSILON);Math.acos(NaN/a);Math.asin(NaN/b);cc.Camera.getZEye()},copyWithZone:function(a){var b=null;a&&a.copyObject?b=a.copyObject:(b=new cc.OrbitCamera,a=new cc.Zone(b));cc.ActionInterval.copyWithZone(a);b.initWithDuration(this._duration,this.radius,this.deltaRadius,this.angleZ,this.deltaAngleZ,this.angleX,this.deltaAngleX);return b},startWithTarget:function(a){this._super(a);
this.sphericalRadius(void 0,void 0,void 0);isNaN(this.radius)&&(this.radius=void 0);isNaN(this.angleZ)&&(this.angleZ=cc.RADIANS_TO_DEGREES(void 0));isNaN(this.angleX)&&(this.angleX=cc.RADIANS_TO_DEGREES(void 0));this.radZ=cc.DEGREES_TO_RADIANS(this.angleZ);this.radX=cc.DEGREES_TO_RADIANS(this.angleX)},update:function(a){var b=(this.radius+this.deltaRadius*a)*cc.Camera.getZEye(),c=this.radZ+this.radDeltaZ*a,d=this.radX+this.radDeltaX*a,a=Math.sin(c)*Math.cos(d)*b+this.centerXOrig,d=Math.sin(c)*Math.sin(d)*
b+this.centerYOrig,b=Math.cos(c)*b+this.centerZOrig;this._target.getCamera().setEyeXYZ(a,d,b)}});cc.OrbitCamera.create=function(a,b,c,d,e,f,h){var g=new cc.OrbitCamera;return g.initWithDuration(a,b,c,d,e,f,h)?g:null};cc.ActionEase=cc.ActionInterval.extend({initWithAction:function(a){cc.Assert(null!=a,"");return this.initWithDuration(a.getDuration())?(this._other=a,!0):!1},copyWithZone:function(){},startWithTarget:function(a){this._super(a);this._other.startWithTarget(this._target)},stop:function(){this._other.stop();this._super()},update:function(a){this._other.update(a)},reverse:function(){return cc.ActionEase.create(this._other.reverse())},_other:null});
cc.ActionEase.create=function(a){var b=new cc.ActionEase;b&&b.initWithAction(a);return b};cc.EaseRateAction=cc.ActionEase.extend({setRate:function(a){this._rate=a},getRate:function(){return this._rate},initWithAction:function(a,b){return this._super(a)?(this._rate=b,!0):!1},copyWithZone:function(){},reverse:function(){return cc.EaseRateAction.create(this._other.reverse(),1/this._rate)},_rate:null});cc.EaseRateAction.create=function(a,b){var c=new cc.EaseRateAction;c&&c.initWithAction(a,b);return c};
cc.EaseIn=cc.EaseRateAction.extend({update:function(a){this._other.update(Math.pow(a,this._rate))},copyWithZone:function(){}});cc.EaseIn.create=function(a,b){var c=new cc.EaseIn;c&&c.initWithAction(a,b);return c};cc.EaseOut=cc.EaseRateAction.extend({update:function(a){this._other.update(Math.pow(a,1/this._rate))},copyWithZone:function(){}});cc.EaseOut.create=function(a,b){var c=new cc.EaseOut;c&&c.initWithAction(a,b);return c};
cc.EaseInOut=cc.EaseRateAction.extend({update:function(a){var b=1;0==this._rate%2&&(b=-1);a*=2;1>a?this._other.update(0.5*Math.pow(a,this._rate)):this._other.update(0.5*b*(Math.pow(a-2,this._rate)+2*b))},copyWithZone:function(){},reverse:function(){return cc.EaseInOut.create(this._other.reverse(),this._rate)}});cc.EaseInOut.create=function(a,b){var c=new cc.EaseInOut;c&&c.initWithAction(a,b);return c};
cc.EaseExponentialIn=cc.ActionEase.extend({update:function(a){this._other.update(0==a?0:Math.pow(2,10*(a/1-1))-0.001)},reverse:function(){return cc.EaseExponentialOut.create(this._other.reverse())},copyWithZone:function(){}});cc.EaseExponentialIn.create=function(a){var b=new cc.EaseExponentialIn;b&&b.initWithAction(a);return b};
cc.EaseExponentialOut=cc.ActionEase.extend({update:function(a){this._other.update(1==a?1:-Math.pow(2,-10*a/1)+1)},reverse:function(){return cc.EaseExponentialIn.create(this._other.reverse())},copyWithZone:function(){}});cc.EaseExponentialOut.create=function(a){var b=new cc.EaseExponentialOut;b&&b.initWithAction(a);return b};cc.EaseExponentialInOut=cc.ActionEase.extend({update:function(a){a/=0.5;a=1>a?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,10*(a-1))+2);this._other.update(a)},copyWithZone:function(){}});
cc.EaseExponentialInOut.create=function(a){var b=new cc.EaseExponentialInOut;b&&b.initWithAction(a);return b};cc.EaseSineIn=cc.ActionEase.extend({update:function(a){this._other.update(-1*Math.cos(a*Math.PI/2)+1)},reverse:function(){return cc.EaseSineOut.create(this._other.reverse())},copyWithZone:function(){}});cc.EaseSineIn.create=function(a){var b=new cc.EaseSineIn;b&&b.initWithAction(a);return b};
cc.EaseSineOut=cc.ActionEase.extend({update:function(a){this._other.update(Math.sin(a*Math.PI/2))},reverse:function(){return cc.EaseSineIn.create(this._other.reverse())},copyWithZone:function(){}});cc.EaseSineOut.create=function(a){var b=new cc.EaseSineOut;b&&b.initWithAction(a);return b};cc.EaseSineInOut=cc.ActionEase.extend({update:function(a){this._other.update(-0.5*(Math.cos(Math.PI*a)-1))},copyWithZone:function(){}});
cc.EaseSineInOut.create=function(a){var b=new cc.EaseSineInOut;b&&b.initWithAction(a);return b};cc.EaseElastic=cc.ActionEase.extend({getPeriod:function(){return this._period},setPeriod:function(a){this._period=a},initWithAction:function(a,b){this._super(a);this._period=null==b?3:b;return!0},reverse:function(){cc.Assert(0,"");return null},copyWithZone:function(){},_period:null});cc.EaseElastic.create=function(a,b){var c=new cc.EaseElastic;c&&(null==b?c.initWithAction(a):c.initWithAction(a,b));return c};
cc.EaseElasticIn=cc.EaseElastic.extend({update:function(a){var b=0;0==a||1==a?b=a:(b=this._period/4,a-=1,b=-Math.pow(2,10*a)*Math.sin(2*(a-b)*Math.PI/this._period));this._other.update(b)},reverse:function(){return cc.EaseElasticOut.create(this._other.reverse(),this._period)},copyWithZone:function(){}});cc.EaseElasticIn.create=function(a,b){var c=new cc.EaseElasticIn;c&&(null==b?c.initWithAction(a):c.initWithAction(a,b));return c};
cc.EaseElasticOut=cc.EaseElastic.extend({update:function(a){var b=0;0==a||1==a?b=a:(b=this._period/4,b=Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/this._period)+1);this._other.update(b)},reverse:function(){return cc.EaseElasticIn.create(this._other.reverse(),this._period)},copyWithZone:function(){}});cc.EaseElasticOut.create=function(a,b){var c=new cc.EaseElasticOut;c&&(null==b?c.initWithAction(a):c.initWithAction(a,b));return c};
cc.EaseElasticInOut=cc.EaseElastic.extend({update:function(a){var b=0;0==a||1==a?b=a:(this._period||(this._period=0.3*1.5),b=this._period/4,a=2*a-1,b=0>a?-0.5*Math.pow(2,10*a)*Math.sin(2*(a-b)*Math.PI/this._period):0.5*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/this._period)+1);this._other.update(b)},reverse:function(){return cc.EaseInOut.create(this._other.reverse(),this._period)},copyWithZone:function(){}});
cc.EaseElasticInOut.create=function(a,b){var c=new cc.EaseElasticInOut;c&&(null==b?c.initWithAction(a):c.initWithAction(a,b));return c};cc.EaseBounce=cc.ActionEase.extend({bounceTime:function(a){if(a<1/2.75)return 7.5625*a*a;if(a<2/2.75)return a-=1.5/2.75,7.5625*a*a+0.75;if(a<2.5/2.75)return a-=2.25/2.75,7.5625*a*a+0.9375;a-=2.625/2.75;return 7.5625*a*a+0.984375},copyWithZone:function(){}});cc.EaseBounce.create=function(a){var b=new cc.EaseBounce;b&&b.initWithAction(a);return b};
cc.EaseBounceIn=cc.EaseBounce.extend({update:function(a){this._other.update(1-this.bounceTime(1-a))},reverse:function(){return cc.EaseBounceOut.create(this._other.reverse())},copyWithZone:function(){}});cc.EaseBounceIn.create=function(a){var b=new cc.EaseBounceIn;b&&b.initWithAction(a);return b};cc.EaseBounceOut=cc.EaseBounce.extend({update:function(a){this._other.update(this.bounceTime(a))},reverse:function(){return cc.EaseBounceIn.create(this._other.reverse())},copyWithZone:function(){}});
cc.EaseBounceOut.create=function(a){var b=new cc.EaseBounceOut;b&&b.initWithAction(a);return b};cc.EaseBounceInOut=cc.EaseBounce.extend({update:function(a){var b=0,b=0.5>a?0.5*(1-this.bounceTime(1-2*a)):0.5*this.bounceTime(2*a-1)+0.5;this._other.update(b)},copyWithZone:function(){}});cc.EaseBounceInOut.create=function(a){var b=new cc.EaseBounceInOut;b&&b.initWithAction(a);return b};
cc.EaseBackIn=cc.ActionEase.extend({update:function(a){this._other.update(a*a*(2.70158*a-1.70158))},reverse:function(){return cc.EaseBackOut.create(this._other.reverse())},copyWithZone:function(){}});cc.EaseBackIn.create=function(a){var b=new cc.EaseBackIn;b&&b.initWithAction(a);return b};cc.EaseBackOut=cc.ActionEase.extend({update:function(a){a-=1;this._other.update(a*a*(2.70158*a+1.70158)+1)},reverse:function(){return cc.EaseBackIn.create(this._other.reverse())},copyWithZone:function(){}});
cc.EaseBackOut.create=function(a){var b=new cc.EaseBackOut;b&&b.initWithAction(a);return b};cc.EaseBackInOut=cc.ActionEase.extend({update:function(a){a*=2;1>a?this._other.update(a*a*(3.5949095*a-2.5949095)/2):(a-=2,this._other.update(a*a*(3.5949095*a+2.5949095)/2+1))},copyWithZone:function(){}});cc.EaseBackInOut.create=function(a){var b=new cc.EaseBackInOut;b&&b.initWithAction(a);return b};cc=cc=cc||{};
cc.GridAction=cc.ActionInterval.extend({_gridSize:null,startWithTarget:function(a){this._super(a);var a=this.getGrid(),b=this._target,c=b.getGrid();c&&0<c.getReuseGrid()?c.isActive()&&c.getGridSize().x==this._gridSize.x&&c.getGridSize().y==this._gridSize.y?c.reuse():cc.Assert(0,""):(c&&c.isActive()&&c.setActive(!1),b.setGrid(a),b.getGrid().setActive(!0))},reverse:function(){return cc.ReverseTime.create(this)},initWithSize:function(a,b){return this.initWithDuration(b)?(this._gridSize=a,!0):!1},getGrid:function(){cc.Assert(0,
"");return null}});cc.GridAction.create=function(a,b){var c=new cc.GridAction;c.initWithSize(a,b);return c};cc.Grid3DAction=cc.GridAction.extend({getGrid:function(){return cc.Grid3D.create(this._gridSize)},vertex:function(a){return this._target.getGrid().vertex(a)},originalVertex:function(a){return this._target.getGrid().originalVertex(a)},setVertex:function(a,b){this._target.getGrid().setVertex(a,b)}});cc.Grid3DAction.create=function(){};
cc.TiledGrid3DAction=cc.GridAction.extend({tile:function(a){return this._target.getGrid().tile(a)},originalTile:function(a){return this._target.getGrid().originalTile(a)},setTile:function(a,b){return this._target.getGrid().setTile(a,b)},getGrid:function(){return cc.TiledGrid3D.create(this._gridSize)}});cc.TiledGrid3DAction.create=function(){};
cc.AccelDeccelAmplitude=cc.ActionInterval.extend({_rate:null,_other:null,initWithAction:function(a,b){return cc.ActionInterval.initWithDuration(b)?(this._rate=1,this._other=a,!0):!1},startWithTarget:function(a){cc.ActionInterval.startWithTarget(a);this._other.startWithTarget(a)},update:function(a){a*=2;1<a&&(a=1-(a-1));this._other.setAmplitudeRate(Math.pow(a,this._rate))},reverse:function(){return cc.AccelDeccelAmplitude.create(this._other.reverse(),this._duration)},getRate:function(){return this._rate},
setRate:function(a){this._rate=a}});cc.AccelDeccelAmplitude.create=function(){return new cc.AccelDeccelAmplitude};
cc.AccelAmplitude=cc.ActionInterval.extend({_rate:null,_other:null,initWithAction:function(a,b){return cc.ActionInterval.initWithDuration(b)?(this._rate=1,this._other=a,!0):!1},getRate:function(){return this._rate},setRate:function(a){this._rate=a},startWithTarget:function(a){cc.ActionInterval.startWithTarget(a);this._other.startWithTarget(a)},update:function(a){this._other.setAmplitudeRate(Math.pow(a,this._rate));this._other.update(a)},reverse:function(){return cc.AccelAmplitude.create(this._other.reverse(),
this._duration)}});cc.AccelAmplitude.create=function(){return new cc.AccelAmplitude};
cc.DeccelAmplitude=cc.ActionInterval.extend({_rate:null,_other:null,initWithAction:function(a,b){return cc.ActionInterval.initWithDuration(b)?(this._rate=1,this._other=a,!0):!1},getRate:function(){return this._rate},setRate:function(a){this._rate=a},startWithTarget:function(a){cc.ActionInterval.startWithTarget(a);this._other.startWithTarget(a)},update:function(a){this._other.setAmplitudeRate(Math.pow(1-a,this._rate));this._other.update(a)},reverse:function(){return cc.DeccelAmplitude.create(this._other.reverse(),
this._duration)}});cc.DeccelAmplitude.create=function(){return new cc.DeccelAmplitude};cc.StopGrid=cc.ActionInstant.extend({startWithTarget:function(a){this._super(a);(a=this._target.getGrid())&&a.isActive()&&a.setActive(!1)}});cc.StopGrid.create=function(){return new cc.StopGrid};
cc.ReuseGrid=cc.ActionInstant.extend({_times:null,initWithTimes:function(a){this._times=a;return!0},startWithTarget:function(a){cc.ActionInstant.startWithTarget(a);this._target.getGrid()&&this._target.getGrid().isActive()&&this._target.getGrid().setReuseGrid(this._target.getGrid().getReuseGrid()+this._times)}});cc.ReuseGrid.create=function(){return new cc.ReuseGrid};cc.TurnOffTiles=cc.TiledGrid3DAction.extend({_seed:null,_tilesCount:0,_tilesOrder:[],initWithSeed:function(a,b,c){return this.initWithSize(a,b)?(this._seed=c,this._tilesOrder=null,!0):!1},shuffle:function(a,b){var c;for(c=b-1;0<=c;c--){var d=parseInt(Math.random()*(c+1)),e=a[c];a[c]=a[d];a[d]=e}},turnOnTile:function(a){this.setTile(a,this.originalTile(a))},turnOffTile:function(a){var b=new cc.Quad3;this.setTile(a,b)},startWithTarget:function(a){this._super(a);-1!=this._seed&&parseInt(Math.random()*
this._seed);this._tilesCount=this._gridSize.x*this._gridSize.y;this._tilesOrder=[];for(a=0;a<this._tilesCount;++a)this._tilesOrder[a]=a;this.shuffle(this._tilesOrder,this._tilesCount)},update:function(a){var b,c;b=a*this._tilesCount;for(a=0;a<this._tilesCount;a++)c=this._tilesOrder[a],c=cc.ccg(c/this._gridSize.y,c%this._gridSize.y),a<b?this.turnOffTile(c):this.turnOnTile(c)}});
cc.TurnOffTiles.create=function(a,b,c){var d=new cc.TurnOffTiles;2==arguments.length?d.initWithSize(a,b):3==arguments.length&&d.initWithSeed(a,b,c);return d};cc.Scene=cc.Node.extend({ctor:function(){this._isRelativeAnchorPoint=!1;var a=cc.Director.sharedDirector();this.setAnchorPoint(cc.ccp(0.5,0.5));this.setContentSize(a.getWinSize())},init:function(){this.setContentSize(cc.Director.sharedDirector().getWinSize());return!0}});cc.Scene.create=function(){return new cc.Scene};cc.Layer=cc.Node.extend({_isTouchEnabled:!1,_isAccelerometerEnabled:!1,_isKeypadEnabled:!1,ctor:function(){this._super();this.setAnchorPoint(cc.ccp(0.5,0.5));this._isRelativeAnchorPoint=!1;var a=cc.Director.sharedDirector();if(!a)return!1;this.setContentSize(a.getWinSize());this._isAccelerometerEnabled=this._isTouchEnabled=!1},init:function(){return!0},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addStandardDelegate(this,0)},getIsTouchEnabled:function(){return this._isTouchEnabled},
setIsTouchEnabled:function(a){this._isTouchEnabled!=a&&(this._isTouchEnabled=a,this._isRunning&&(a?this.registerWithTouchDispatcher():cc.TouchDispatcher.sharedDispatcher().removeDelegate(this)))},getIsAccelerometerEnabled:function(){return this._isAccelerometerEnabled},setIsAccelerometerEnabled:function(a){a!=this._isAccelerometerEnabled&&(this._isAccelerometerEnabled=a,this._isRunning&&(a?cc.Accelerometer.sharedAccelerometer().setDelegate(this):cc.Accelerometer.sharedAccelerometer().setDelegate(null)))},
getIsKeypadEnabled:function(){return this._isKeypadEnabled},setIsKeypadEnabled:function(a){a!=this._isKeypadEnabled&&(this._isKeypadEnabled=a,this._isRunning&&(a?cc.KeypadDispatcher.sharedDispatcher().addDelegate(this):cc.KeypadDispatcher.sharedDispatcher().removeDelegate(this)))},onEnter:function(){this._isTouchEnabled&&this.registerWithTouchDispatcher();this._super();this._isAccelerometerEnabled&&cc.Accelerometer.sharedAccelerometer().setDelegate(this);this._isKeypadEnabled&&cc.KeypadDispatcher.sharedDispatcher().addDelegate(this)},
onExit:function(){this._isTouchEnabled&&cc.TouchDispatcher.sharedDispatcher().removeDelegate(this);this._isAccelerometerEnabled&&cc.Accelerometer.sharedAccelerometer().setDelegate(null);this._isKeypadEnabled&&cc.KeypadDispatcher.sharedDispatcher().removeDelegate(this);this._super()},onEnterTransitionDidFinish:function(){this._isAccelerometerEnabled&&cc.Accelerometer.sharedAccelerometer().setDelegate(this);this._super()},ccTouchBegan:function(){cc.Assert(!1,"Layer#ccTouchBegan override me");return!0},
ccTouchMoved:function(){},ccTouchEnded:function(){},ccTouchCancelled:function(){},ccTouchesBegan:function(){},ccTouchesMoved:function(){},ccTouchesEnded:function(){},ccTouchesCancelled:function(){},didAccelerate:function(){},addLayer:function(a){cc.Assert(this._layers,"cc.Layer addLayer");this._layers.addObject(a)}});cc.Layer.create=function(){var a=new cc.Layer;return a&&a.init()?a:null};
cc.LayerColor=cc.Layer.extend({_squareVertices:[],_squareColors:[],_opacity:0,_color:new cc.Color3B(255,255,255),_blendFunc:new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST),ctor:function(){this._squareVertices=[new cc.Vertex2F(0,0),new cc.Vertex2F(0,0),new cc.Vertex2F(0,0),new cc.Vertex2F(0,0)];this._squareColors=[new cc.Color4B(0,0,0,1),new cc.Color4B(0,0,0,1),new cc.Color4B(0,0,0,1),new cc.Color4B(0,0,0,1)];this._color=new cc.Color3B(0,0,0);this._super()},getOpacity:function(){return this._opacity},
setOpacity:function(a){this._opacity=a;this._updateColor();this.setNodeDirty()},getColor:function(){return this._color},setColor:function(a){this._color=a;this._updateColor();this.setNodeDirty()},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a){this._blendFunc=a},initWithColor:function(a){this._blendFunc.src=cc.BLEND_SRC;this._blendFunc.dst=cc.BLEND_DST;this._color=new cc.Color3B(a.r,a.g,a.b);this._opacity=a.a;for(a=0;a<this._squareVertices.length;a++)this._squareVertices[a].x=
0,this._squareVertices[a].y=0;this._updateColor();return!0},setContentSize:function(a){this._squareVertices[1].x=a.width*cc.CONTENT_SCALE_FACTOR();this._squareVertices[2].y=a.height*cc.CONTENT_SCALE_FACTOR();this._squareVertices[3].x=a.width*cc.CONTENT_SCALE_FACTOR();this._squareVertices[3].y=a.height*cc.CONTENT_SCALE_FACTOR();this._super(a)},changeWidthAndHeight:function(a,b){this.setContentSize(cc.SizeMake(a,b))},changeWidth:function(a){this.setContentSize(cc.SizeMake(a,this._contentSize.height))},
changeHeight:function(a){this.setContentSize(cc.SizeMake(this._contentSize.width,a))},_updateColor:function(){for(var a=0;4>a;a++)this._squareColors[a].r=Math.round(this._color.r),this._squareColors[a].g=Math.round(this._color.g),this._squareColors[a].b=Math.round(this._color.b),this._squareColors[a].a=Math.round(this._opacity)},setIsOpacityModifyRGB:function(){},getIsOpacityModifyRGB:function(){return!1},draw:function(a){a=a||cc.renderContext;if(cc.renderContextType==cc.CANVAS){var b=this.getContentSize().width,
c=this.getContentSize().height,d=a.createLinearGradient(-this.getAnchorPointInPixels().x,this.getAnchorPointInPixels().y,-this.getAnchorPointInPixels().x+b,-(this.getAnchorPointInPixels().y+c));d.addColorStop(0,"rgba("+this._squareColors[0].r+","+this._squareColors[0].g+","+this._squareColors[0].b+","+this._squareColors[0].a/255+")");d.addColorStop(1,"rgba("+this._squareColors[3].r+","+this._squareColors[3].g+","+this._squareColors[3].b+","+this._squareColors[3].a/255+")");a.fillStyle=d;a.fillRect(-this.getAnchorPointInPixels().x,
this.getAnchorPointInPixels().y,b,-c)}this._super()}});cc.LayerColor.create=function(a,b,c){var d=new cc.LayerColor;a?d.initWithColor(a):d.init();b&&c&&d.setContentSize(cc.SizeMake(b,c));return d};
cc.LayerGradient=cc.LayerColor.extend({_startColor:new cc.Color3B(0,0,0),_endColor:new cc.Color3B(0,0,0),_startOpacity:null,_endOpacity:null,_alongVector:null,_compressedInterpolation:!1,ctor:function(){this._startColor=new cc.Color3B(0,0,0);this._endColor=new cc.Color3B(0,0,0);this._super()},getStartColor:function(){return this._color},setStartColor:function(a){this.setColor(a)},setEndColor:function(a){this._endColor=a;this._updateColor()},getEndColor:function(){return this._endColor},setStartOpacity:function(a){this._startOpacity=
a;this._updateColor()},getStartOpacity:function(){return this._startOpacity},setEndOpacity:function(a){this._endOpacity=a;this._updateColor()},getEndOpacity:function(){return this._endOpacity},setVector:function(a){this.alongVector=a;this._updateColor()},getVector:function(){return this.alongVector},getIsCompressedInterpolation:function(){return this._compressedInterpolation},setIsCompressedInterpolation:function(a){this._compressedInterpolation=a;this._updateColor()},initWithColor:function(a,b,c){2==
arguments.length&&(c=cc.ccp(0,-1));this._startColor.r=a.r;this._startColor.g=a.g;this._startColor.b=a.b;this._startOpacity=a.a;this._endColor.r=b.r;this._endColor.g=b.g;this._endColor.b=b.b;this._endOpacity=b.a;this.alongVector=c;this._compressedInterpolation=!0;return this._super(cc.ccc4(a.r,a.g,a.b,255))},_updateColor:function(){this._super();var a=cc.ccpLength(this.alongVector);if(0!=a){var b=Math.sqrt(2),c=new cc.Point,c=cc.ccp(this.alongVector.x/a,this.alongVector.y/a);this._compressedInterpolation&&
(a=1/(Math.abs(c.x)+Math.abs(c.y)),c=cc.ccpMult(c,a*b));var d=this._opacity/255,a=new cc.Color4B(this._startColor.r,this._startColor.g,this._startColor.b,this._startOpacity*d),d=new cc.Color4B(this._endColor.r,this._endColor.g,this._endColor.b,this._endOpacity*d);this._squareColors[0].r=parseInt(d.r+(a.r-d.r)*((b+c.x+c.y)/(2*b)));this._squareColors[0].g=parseInt(d.g+(a.g-d.g)*((b+c.x+c.y)/(2*b)));this._squareColors[0].b=parseInt(d.b+(a.b-d.b)*((b+c.x+c.y)/(2*b)));this._squareColors[0].a=parseInt(d.a+
(a.a-d.a)*((b+c.x+c.y)/(2*b)));this._squareColors[1].r=parseInt(d.r+(a.r-d.r)*((b-c.x+c.y)/(2*b)));this._squareColors[1].g=parseInt(d.g+(a.g-d.g)*((b-c.x+c.y)/(2*b)));this._squareColors[1].b=parseInt(d.b+(a.b-d.b)*((b-c.x+c.y)/(2*b)));this._squareColors[1].a=parseInt(d.a+(a.a-d.a)*((b-c.x+c.y)/(2*b)));this._squareColors[2].r=parseInt(d.r+(a.r-d.r)*((b+c.x-c.y)/(2*b)));this._squareColors[2].g=parseInt(d.g+(a.g-d.g)*((b+c.x-c.y)/(2*b)));this._squareColors[2].b=parseInt(d.b+(a.b-d.b)*((b+c.x-c.y)/(2*
b)));this._squareColors[2].a=parseInt(d.a+(a.a-d.a)*((b+c.x-c.y)/(2*b)));this._squareColors[3].r=parseInt(d.r+(a.r-d.r)*((b-c.x-c.y)/(2*b)));this._squareColors[3].g=parseInt(d.g+(a.g-d.g)*((b-c.x-c.y)/(2*b)));this._squareColors[3].b=parseInt(d.b+(a.b-d.b)*((b-c.x-c.y)/(2*b)));this._squareColors[3].a=parseInt(d.a+(a.a-d.a)*((b-c.x-c.y)/(2*b)))}}});
cc.LayerGradient.create=function(a,b,c){var d=arguments.length,e=new cc.LayerGradient;switch(d){case 2:return e&&e.initWithColor(a,b)?e:null;case 3:return e&&e.initWithColor(a,b,c)?e:null;case 0:e.init();break;default:throw"Arguments error ";}};
cc.LayerMultiplex=cc.Layer.extend({_enabledLayer:0,_layers:null,ctor:function(){this._super()},initWithLayer:function(a){this._layers=[];this._layers.push(a);this._enabledLayer=0;this.addChild(a);return!0},initWithLayers:function(a){this._layers=a;this._enabledLayer=0;this.addChild(this._layers[this._enabledLayer]);return!0},switchTo:function(a){cc.Assert(a<this._layers.length,"Invalid index in MultiplexLayer switchTo message");this.removeChild(this._layers[this._enabledLayer],!0);this._enabledLayer=
a;this.addChild(this._layers[a])},switchToAndReleaseMe:function(a){cc.Assert(a<this._layers.count(),"Invalid index in MultiplexLayer switchTo message");this.removeChild(this._layers[this._enabledLayer],!0);this._layers[this._enabledLayer]=null;this._enabledLayer=a;this.addChild(this._layers[a])}});cc.LayerMultiplex.create=function(){var a=new cc.LayerMultiplex;return a.initWithLayers(arguments)?a:null};
cc.LazyLayer=cc.Node.extend({_layerCanvas:null,_layerContext:null,_isNeedUpdate:!1,_canvasZOrder:-10,ctor:function(){this._super();this.setAnchorPoint(new cc.Point(0,0));this._setupHtml()},setLayerZOrder:function(a){if(0<=a)throw"LazyLayer zOrder must Less than Zero.Because LazyLayer is a background Layer!";this._canvasZOrder=a;this._layerCanvas.style.zIndex=this._canvasZOrder},getLayerZOrder:function(){return this._canvasZOrder},_setupHtml:function(){var a=document.getElementById("Cocos2dGameContainer");
a||(cc.setupHTML(),a=document.getElementById("Cocos2dGameContainer"));this._layerCanvas=document.createElement("canvas");this._layerCanvas.width=cc.canvas.width;this._layerCanvas.height=cc.canvas.height;this._layerCanvas.id="lazyCanvas"+Date.now();this._layerCanvas.style.zIndex=this._canvasZOrder;this._layerCanvas.style.position="absolute";this._layerCanvas.style.top="0";this._layerCanvas.style.left="0";this._layerContext=this._layerCanvas.getContext("2d");this._layerContext.fillStyle="rgba(0,0,0,1)";
this._layerContext.translate(0,this._layerCanvas.height);a.appendChild(this._layerCanvas);var b=this;window.addEventListener("resize",function(){b.adjustSizeForCanvas()})},adjustSizeForCanvas:function(){this._isNeedUpdate=!0;this._layerCanvas.width=cc.canvas.width;this._layerCanvas.height=cc.canvas.height;var a=cc.canvas.width/cc.originalCanvasSize.width,b=cc.canvas.height/cc.originalCanvasSize.height;a>b&&(a=b);this._layerContext.translate(0,this._layerCanvas.height);this._layerContext.scale(a,a)},
addChild:function(a,b,c){this._isNeedUpdate=!0;this._super(a,b,c)},removeChild:function(a,b){this._isNeedUpdate=!0;this._super(a,b)},visit:function(){if(this._isVisible&&this._isNeedUpdate){this._isNeedUpdate=!1;var a=this._layerContext;a.save();a.clearRect(0,0,this._layerCanvas.width,-this._layerCanvas.height);this._grid&&this._grid.isActive()&&(this._grid.beforeDraw(),this.transformAncestors());if(this._children)for(var b=0;b<this._children.length;b++){var c=this._children[b];c&&0>c._zOrder&&c.visit(a)}if(this._children)for(b=
0;b<this._children.length;b++)(c=this._children[b])&&0<=c._zOrder&&c.visit(a);this._grid&&this._grid.isActive()&&this._grid.afterDraw(this);a.restore()}},_setNodeDirtyForCache:function(){this._isNeedUpdate=this._isCacheDirty=!0}});cc.SCENE_FADE=4208917214;cc.TransitionEaseScene=cc.Class.extend({easeActionWithAction:function(){}});cc.ORIENTATION_LEFT_OVER=0;cc.ORIENTATION_RIGHT_OVER=1;cc.ORIENTATION_UP_OVER=0;cc.ORIENTATION_DOWN_OVER=1;
cc.TransitionScene=cc.Scene.extend({_inScene:null,_outScene:null,_duration:null,_isInSceneOnTop:!1,_isSendCleanupToScene:!1,_setNewScene:function(){this.unschedule(this._setNewScene);var a=cc.Director.sharedDirector();this._isSendCleanupToScene=a.isSendCleanupToScene();a.replaceScene(this._inScene);cc.TouchDispatcher.sharedDispatcher().setDispatchEvents(!0);this._outScene.setIsVisible(!0)},_sceneOrder:function(){this._isInSceneOnTop=!0},draw:function(){this._super();this._isInSceneOnTop?(this._outScene.visit(),
this._inScene.visit()):(this._inScene.visit(),this._outScene.visit())},onEnter:function(){this._super();this._inScene.onEnter()},onExit:function(){this._super();this._outScene.onExit();this._inScene.onEnterTransitionDidFinish()},cleanup:function(){this._super();this._isSendCleanupToScene&&this._outScene.cleanup()},initWithDuration:function(a,b){cc.Assert(null!=b,"CCTransitionScene.initWithDuration() Argument scene must be non-nil");return this.init()?(this._duration=a,this.setAnchorPoint(cc.ccp(0,
0)),this.setPosition(cc.ccp(0,0)),this._inScene=b,this._outScene=cc.Director.sharedDirector().getRunningScene(),cc.Assert(this._inScene!=this._outScene,"CCTransitionScene.initWithDuration() Incoming scene must be different from the outgoing scene"),cc.TouchDispatcher.sharedDispatcher().setDispatchEvents(!1),this._sceneOrder(),!0):!1},finish:function(){this._inScene.setIsVisible(!0);this._inScene.setPosition(cc.ccp(0,0));this._inScene.setScale(1);this._inScene.setRotation(0);this._inScene.getCamera().restore();
this._outScene.setIsVisible(!1);this._outScene.setPosition(cc.ccp(0,0));this._outScene.setScale(1);this._outScene.setRotation(0);this._outScene.getCamera().restore();this.schedule(this._setNewScene,0)},hideOutShowIn:function(){this._inScene.setIsVisible(!0);this._outScene.setIsVisible(!1)}});cc.TransitionScene.create=function(a,b){var c=new cc.TransitionScene;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionSceneOriented=cc.TransitionScene.extend({_orientation:0,initWithDuration:function(a,b,c){this._super(a,b)&&(this._orientation=c);return!0}});cc.TransitionSceneOriented.create=function(a,b,c){var d=new cc.TransitionSceneOriented;d.initWithDuration(a,b,c);return d};
cc.TransitionRotoZoom=cc.TransitionScene.extend({ctor:function(){},onEnter:function(){this._super();this._inScene.setScale(0.001);this._outScene.setScale(1);this._inScene.setAnchorPoint(cc.ccp(0.5,0.5));this._outScene.setAnchorPoint(cc.ccp(0.5,0.5));var a=cc.Sequence.create(cc.Spawn.create(cc.ScaleBy.create(this._duration/2,0.001),cc.RotateBy.create(this._duration/2,720),null),cc.DelayTime.create(this._duration/2),null);this._outScene.runAction(a);this._inScene.runAction(cc.Sequence.create(a.reverse(),
cc.CallFunc.create(this,this.finish),null))}});cc.TransitionRotoZoom.create=function(a,b){var c=new cc.TransitionRotoZoom;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionJumpZoom=cc.TransitionScene.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize();this._inScene.setScale(0.5);this._inScene.setPosition(cc.ccp(a.width,0));this._inScene.setAnchorPoint(cc.ccp(0.5,0.5));this._outScene.setAnchorPoint(cc.ccp(0.5,0.5));var b=cc.JumpBy.create(this._duration/4,cc.ccp(-a.width,0),a.width/4,2),c=cc.ScaleTo.create(this._duration/4,1),a=cc.ScaleTo.create(this._duration/4,0.5),a=cc.Sequence.create(a,b,null),b=cc.Sequence.create(b,
c,null),c=cc.DelayTime.create(this._duration/2);this._outScene.runAction(a);this._inScene.runAction(cc.Sequence.create(c,b,cc.CallFunc.create(this,this.finish),null))}});cc.TransitionJumpZoom.create=function(a,b){var c=new cc.TransitionJumpZoom;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionMoveInL=cc.TransitionScene.extend({onEnter:function(){this._super();this.initScenes();var a=this.action();this._inScene.runAction(cc.Sequence.create(this.easeActionWithAction(a),cc.CallFunc.create(this,this.finish),null))},initScenes:function(){this._inScene.setPosition(cc.ccp(-cc.Director.sharedDirector().getWinSize().width,0))},action:function(){return cc.MoveTo.create(this._duration,cc.ccp(0,0))},easeActionWithAction:function(a){return cc.EaseOut.create(a,2)}});
cc.TransitionMoveInL.create=function(a,b){var c=new cc.TransitionMoveInL;return null!=c&&c.initWithDuration(a,b)?c:null};cc.TransitionMoveInR=cc.TransitionMoveInL.extend({initScenes:function(){var a=cc.Director.sharedDirector().getWinSize();this._inScene.setPosition(cc.ccp(a.width,0))}});cc.TransitionMoveInR.create=function(a,b){var c=new cc.TransitionMoveInR;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionMoveInT=cc.TransitionMoveInL.extend({initScenes:function(){var a=cc.Director.sharedDirector().getWinSize();this._inScene.setPosition(cc.ccp(a.height,0))}});cc.TransitionMoveInT.create=function(a,b){var c=new cc.TransitionMoveInT;return null!=c&&c.initWithDuration(a,b)?c:null};cc.TransitionMoveInB=cc.TransitionMoveInL.extend({initScenes:function(){var a=cc.Director.sharedDirector().getWinSize();this._inScene.setPosition(cc.ccp(0,-a.height))}});
cc.TransitionMoveInB.create=function(a,b){var c=new cc.TransitionMoveInB;return null!=c&&c.initWithDuration(a,b)?c:null};cc.ADJUST_FACTOR=0.5;
cc.TransitionSlideInL=cc.TransitionScene.extend({_sceneOrder:function(){this._isInSceneOnTop=!1},ctor:function(){},onEnter:function(){this._super();this.initScenes();var a=this.action(),b=this.action(),a=this.easeActionWithAction(a),b=cc.Sequence.create(this.easeActionWithAction(b),cc.CallFunc.create(this,this.finish),null);this._inScene.runAction(a);this._outScene.runAction(b)},initScenes:function(){var a=cc.Director.sharedDirector().getWinSize();this._inScene.setPosition(cc.ccp(-(a.width-cc.ADJUST_FACTOR),
0))},action:function(){var a=cc.Director.sharedDirector().getWinSize();return cc.MoveBy.create(this._duration,cc.ccp(a.width-cc.ADJUST_FACTOR,0))},easeActionWithAction:function(a){return cc.EaseOut.create(a,2)}});cc.TransitionSlideInL.create=function(a,b){var c=new cc.TransitionSlideInL;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionSlideInR=cc.TransitionSlideInL.extend({_sceneOrder:function(){this._isInSceneOnTop=!0},initScenes:function(){var a=cc.Director.sharedDirector().getWinSize();this._inScene.setPosition(cc.ccp(a.width-cc.ADJUST_FACTOR,0))},action:function(){var a=cc.Director.sharedDirector().getWinSize();return cc.MoveBy.create(this._duration,cc.ccp(-(a.width-cc.ADJUST_FACTOR),0))}});cc.TransitionSlideInR.create=function(a,b){var c=new cc.TransitionSlideInR;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionSlideInB=cc.TransitionSlideInL.extend({_sceneOrder:function(){this._isInSceneOnTop=!1},initScenes:function(){var a=cc.Director.sharedDirector().getWinSize();this._inScene.setPosition(cc.ccp(0,a.height-cc.ADJUST_FACTOR))},action:function(){var a=cc.Director.sharedDirector().getWinSize();return cc.MoveBy.create(this._duration,cc.ccp(0,-(a.height-cc.ADJUST_FACTOR)))}});cc.TransitionSlideInB.create=function(a,b){var c=new cc.TransitionSlideInB;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionSlideInT=cc.TransitionSlideInL.extend({_sceneOrder:function(){this._isInSceneOnTop=!0},initScenes:function(){var a=cc.Director.sharedDirector().getWinSize();this._inScene.setPosition(cc.ccp(0,-(a.height-cc.ADJUST_FACTOR)))},action:function(){var a=cc.Director.sharedDirector().getWinSize();return cc.MoveBy.create(this._duration,cc.ccp(0,a.height-cc.ADJUST_FACTOR))}});cc.TransitionSlideInT.create=function(a,b){var c=new cc.TransitionSlideInT;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionShrinkGrow=cc.TransitionScene.extend({onEnter:function(){this._super();this._inScene.setScale(0.001);this._outScene.setScale(1);this._inScene.setAnchorPoint(cc.ccp(2/3,0.5));this._outScene.setAnchorPoint(cc.ccp(1/3,0.5));var a=cc.ScaleTo.create(this._duration,0.01);this._inScene.runAction(this.easeActionWithAction(cc.ScaleTo.create(this._duration,1)));this._outScene.runAction(cc.Sequence.create(this.easeActionWithAction(a),cc.CallFunc.create(this,this.finish),null))},easeActionWithAction:function(a){return cc.EaseOut.create(a,
2)}});cc.TransitionShrinkGrow.create=function(a,b){var c=new cc.TransitionShrinkGrow;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionFlipX=cc.TransitionSceneOriented.extend({onEnter:function(){this._super();var a,b;this._inScene.setIsVisible(!1);var c;this._orientation==cc.ORIENTATION_RIGHT_OVER?(a=90,c=270,b=90):(a=-90,c=90,b=-90);a=cc.Sequence.create(cc.DelayTime.create(this._duration/2),cc.Show.create(),cc.OrbitCamera.create(this._duration/2,1,0,c,a,0,0),cc.CallFunc.create(this,this.finish),null);b=cc.Sequence.create(cc.OrbitCamera.create(this._duration/2,1,0,0,b,0,0),cc.Hide.create(),cc.DelayTime.create(this._duration/
2),null);this._inScene.runAction(a);this._outScene.runAction(b)}});cc.TransitionFlipX.create=function(a,b,c){null==c&&(c=cc.ORIENTATION_RIGHT_OVER);var d=new cc.TransitionFlipX;d.initWithDuration(a,b,c);return d};
cc.TransitionFlipY=cc.TransitionSceneOriented.extend({onEnter:function(){this._super();var a,b;this._inScene.setIsVisible(!1);var c;this._orientation==cc.ORIENTATION_UP_OVER?(a=90,c=270,b=90):(a=-90,c=90,b=-90);a=cc.Sequence.create(cc.DelayTime.create(this._duration/2),cc.Show.create(),cc.OrbitCamera.create(this._duration/2,1,0,c,a,90,0),cc.CallFunc.create(this,this.finish),null);b=cc.Sequence.create(cc.OrbitCamera.create(this._duration/2,1,0,0,b,90,0),cc.Hide.create(),cc.DelayTime.create(this._duration/
2),null);this._inScene.runAction(a);this._outScene.runAction(b)}});cc.TransitionFlipY.create=function(a,b,c){null==c&&(c=cc.ORIENTATION_UP_OVER);var d=new cc.TransitionFlipY;d.initWithDuration(a,b,c);return d};
cc.TransitionFlipAngular=cc.TransitionSceneOriented.extend({onEnter:function(){this._super();var a,b;this._inScene.setIsVisible(!1);var c;this._orientation==cc.ORIENTATION_RIGHT_OVER?(a=90,c=270,b=90):(a=-90,c=90,b=-90);a=cc.Sequence.create(cc.DelayTime.create(this._duration/2),cc.Show.create(),cc.OrbitCamera.create(this._duration/2,1,0,c,a,-45,0),cc.CallFunc.create(this,this.finish),null);b=cc.Sequence.create(cc.OrbitCamera.create(this._duration/2,1,0,0,b,45,0),cc.Hide.create(),cc.DelayTime.create(this._duration/
2),null);this._inScene.runAction(a);this._outScene.runAction(b)}});cc.TransitionFlipAngular.create=function(a,b,c){null==c&&(c=cc.ORIENTATION_RIGHT_OVER);var d=new cc.TransitionFlipAngular;d.initWithDuration(a,b,c);return d};
cc.TransitionZoomFlipX=cc.TransitionSceneOriented.extend({onEnter:function(){this._super();var a,b;this._inScene.setIsVisible(!1);var c;this._orientation==cc.ORIENTATION_RIGHT_OVER?(a=90,c=270,b=90):(a=-90,c=90,b=-90);a=cc.Sequence.create(cc.DelayTime.create(this._duration/2),cc.Spawn.create(cc.OrbitCamera.create(this._duration/2,1,0,c,a,0,0),cc.ScaleTo.create(this._duration/2,1),cc.Show.create(),null),cc.CallFunc.create(this,this.finish),null);b=cc.Sequence.create(cc.Spawn.create(cc.OrbitCamera.create(this._duration/
2,1,0,0,b,0,0),cc.ScaleTo.create(this._duration/2,0.5),null),cc.Hide.create(),cc.DelayTime.create(this._duration/2),null);this._inScene.setScale(0.5);this._inScene.runAction(a);this._outScene.runAction(b)}});cc.TransitionZoomFlipX.create=function(a,b,c){null==c&&(c=cc.ORIENTATION_RIGHT_OVER);var d=new cc.TransitionZoomFlipX;d.initWithDuration(a,b,c);return d};
cc.TransitionZoomFlipY=cc.TransitionSceneOriented.extend({onEnter:function(){this._super();var a,b;this._inScene.setIsVisible(!1);var c;this._orientation==cc.ORIENTATION_UP_OVER?(a=90,c=270,b=90):(a=-90,c=90,b=-90);a=cc.Sequence.create(cc.DelayTime.create(this._duration/2),cc.Spawn.create(cc.OrbitCamera.create(this._duration/2,1,0,c,a,90,0),cc.ScaleTo.create(this._duration/2,1),cc.Show.create(),null),cc.CallFunc.create(this,this.finish),null);b=cc.Sequence.create(cc.Spawn.create(cc.OrbitCamera.create(this._duration/
2,1,0,0,b,90,0),cc.ScaleTo.create(this._duration/2,0.5),null),cc.Hide.create(),cc.DelayTime.create(this._duration/2),null);this._inScene.setScale(0.5);this._inScene.runAction(a);this._outScene.runAction(b)}});cc.TransitionZoomFlipY.create=function(a,b,c){null==c&&(c=cc.ORIENTATION_UP_OVER);var d=new cc.TransitionZoomFlipY;d.initWithDuration(a,b,c);return d};
cc.TransitionZoomFlipAngular=cc.TransitionSceneOriented.extend({onEnter:function(){this._super();var a,b;this._inScene.setIsVisible(!1);var c;this._orientation==cc.ORIENTATION_RIGHT_OVER?(a=90,c=270,b=90):(a=-90,c=90,b=-90);a=cc.Sequence.create(cc.DelayTime.create(this._duration/2),cc.Spawn.create(cc.OrbitCamera.create(this._duration/2,1,0,c,a,-45,0),cc.ScaleTo.create(this._duration/2,1),cc.Show.create(),null),cc.Show.create(),cc.CallFunc.create(this,this.finish),null);b=cc.Sequence.create(cc.Spawn.create(cc.OrbitCamera.create(this._duration/
2,1,0,0,b,45,0),cc.ScaleTo.create(this._duration/2,0.5),null),cc.Hide.create(),cc.DelayTime.create(this._duration/2),null);this._inScene.setScale(0.5);this._inScene.runAction(a);this._outScene.runAction(b)}});cc.TransitionZoomFlipAngular.create=function(a,b,c){null==c&&(c=cc.ORIENTATION_RIGHT_OVER);var d=new cc.TransitionZoomFlipAngular;d.initWithDuration(a,b,c);return d};
cc.TransitionFade=cc.TransitionScene.extend({_color:new cc.Color3B,ctor:function(){},onEnter:function(){this._super();var a=cc.LayerColor.create(this._color);this._inScene.setIsVisible(!1);this.addChild(a,2,cc.SCENE_FADE);var a=this.getChildByTag(cc.SCENE_FADE),b=cc.Sequence.create(cc.FadeIn.create(this._duration/2),cc.CallFunc.create(this,this.hideOutShowIn),cc.FadeOut.create(this._duration/2),cc.CallFunc.create(this,this.finish),null);a.runAction(b)},onExit:function(){this._super();this.removeChildByTag(cc.SCENE_FADE,
!1)},initWithDuration:function(a,b,c){if("undefined"==c||null==c)c=cc.BLACK();this._super(a,b)&&(this._color.r=c.r,this._color.g=c.g,this._color.b=c.b,this._color.a=0);return!0}});cc.TransitionFade.create=function(a,b,c){var d=new cc.TransitionFade;d.initWithDuration(a,b,c);return d};
cc.TransitionCrossFade=cc.TransitionScene.extend({onEnter:function(){this._super();var a=new cc.Color4B(0,0,0,0),b=cc.Director.sharedDirector().getWinSize(),a=cc.LayerColor.create(a),c=cc.RenderTexture.create(b.width,b.height);if(null!=c){c.getSprite().setAnchorPoint(cc.ccp(0.5,0.5));c.setPosition(cc.ccp(b.width/2,b.height/2));c.setAnchorPoint(cc.ccp(0.5,0.5));c.begin();this._inScene.visit();c.end();var d=cc.RenderTexture.create(b.width,b.height);d.getSprite().setAnchorPoint(cc.ccp(0.5,0.5));d.setPosition(cc.ccp(b.width/
2,b.height/2));d.setAnchorPoint(cc.ccp(0.5,0.5));d.begin();this._outScene.visit();d.end();var b=new cc.BlendFunc(cc.GL_ONE,cc.GL_ONE),e=cc.BlendFunc(cc.GL_SRC_ALPHA,cc.GL_ONE_MINUS_SRC_ALPHA);c.getSprite().setBlendFunc(b);d.getSprite().setBlendFunc(e);a.addChild(c);a.addChild(d);c.getSprite().setOpacity(255);d.getSprite().setOpacity(255);c=cc.Sequence.create(cc.FadeTo.create(this._duration,0),cc.CallFunc.create(this,this.hideOutShowIn),cc.CallFunc.create(this,this.finish),null);d.getSprite().runAction(c);
this.addChild(a,2,cc.SCENE_FADE)}},onExit:function(){this.removeChildByTag(cc.SCENE_FADE,!1);this._super()},draw:function(){}});cc.TransitionCrossFade.create=function(a,b){var c=new cc.TransitionCrossFade;c.initWithDuration(a,b);return c};
cc.TransitionTurnOffTiles=cc.TransitionScene.extend({_sceneOrder:function(){this._isInSceneOnTop=!1},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),a=this.easeActionWithAction(cc.TurnOffTiles.create(cc.ccg(12*(a.width/a.height),12),this._duration));this._outScene.runAction(cc.Sequence.create(a,cc.CallFunc.create(this,this.finish),cc.StopGrid.create(),null))},easeActionWithAction:function(a){return a}});
cc.TransitionTurnOffTiles.create=function(a,b){var c=new cc.TransitionTurnOffTiles;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionSplitCols=cc.TransitionScene.extend({onEnter:function(){this._super();this._inScene.setIsVisible(!1);var a=this.action(),a=cc.Sequence.create(a,cc.CallFunc.create(this,this.hideOutShowIn),a.reverse(),null);this.runAction(cc.Sequence.create(this.easeActionWithAction(a),cc.CallFunc.create(this,this.finish),cc.StopGrid.create(),null))},easeActionWithAction:function(a){return cc.EaseInOut.create(a,3)},action:function(){return cc.SplitCols.actionWithCols(3,this._duration/2)}});
cc.TransitionSplitCols.create=function(a,b){var c=new cc.TransitionSplitCols;return null!=c&&c.initWithDuration(a,b)?c:null};cc.TransitionSplitRows=cc.TransitionSplitCols.extend({action:function(){return cc.SplitRows.actionWithRows(3,this._duration/2)}});cc.TransitionSplitRows.create=function(a,b){var c=new cc.TransitionSplitRows;return null!=c&&c.initWithDuration(a,b)?c:null};
cc.TransitionFadeTR=cc.TransitionScene.extend({_sceneOrder:function(){this._isInSceneOnTop=!1},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),a=this.actionWithSize(cc.ccg(12*(a.width/a.height),12));this._outScene.runAction(cc.Sequence.create(this.easeActionWithAction(a),cc.CallFunc.create(this,this.finish),cc.StopGrid.create(),null))},easeActionWithAction:function(a){return a},actionWithSize:function(a){return cc.FadeOutTRTiles.create(a,this._duration)}});
cc.TransitionFadeTR.create=function(a,b){var c=new cc.TransitionFadeTR;return null!=c&&c.initWithDuration(a,b)?c:null};cc.TransitionFadeBL=cc.TransitionFadeTR.extend({actionWithSize:function(a){return cc.FadeOutBLTiles.create(a,this._duration)}});cc.TransitionFadeBL.create=function(a,b){var c=new cc.TransitionFadeBL;return null!=c&&c.initWithDuration(a,b)?c:null};cc.TransitionFadeUp=cc.TransitionFadeTR.extend({actionWithSize:function(a){return cc.FadeOutUpTiles.create(a,this._duration)}});
cc.TransitionFadeUp.create=function(a,b){var c=new cc.TransitionFadeUp;return null!=c&&c.initWithDuration(a,b)?c:null};cc.TransitionFadeDown=cc.TransitionFadeTR.extend({actionWithSize:function(a){return cc.FadeOutDownTiles.create(a,this._duration)}});cc.TransitionFadeDown.create=function(a,b){var c=new cc.TransitionFadeDown;return null!=c&&c.initWithDuration(a,b)?c:null};cc.SCENE_RADIAL=49153;
cc.TransitionRadialCCW=cc.TransitionScene.extend({onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b=cc.RenderTexture.create(a.width,a.height);null!=b&&(b.getSprite().setAnchorPoint(cc.ccp(0.5,0.5)),b.setPosition(cc.ccp(a.width/2,a.height/2)),b.setAnchorPoint(cc.ccp(0.5,0.5)),b.clear(0,0,0,1),b.begin(),this._outScene.visit(),b.end(),this.hideOutShowIn(),b=cc.ProgressTimer.createWithTexture(b.getSprite().getTexture()),b.getSprite().setFlipY(!0),b.setType(_radialType()),
b.setPercentage(100),b.setPosition(cc.ccp(a.width/2,a.height/2)),b.setAnchorPoint(cc.ccp(0.5,0.5)),a=cc.Sequence.create(cc.ProgressFromTo.create(this._duration,100,0),cc.CallFunc.create(this,cc.TransitionScene.finish),null),b.runAction(a),this.addChild(b,2,cc.SCENE_RADIAL))},onExit:function(){this.removeChildByTag(cc.SCENE_RADIAL,!1);this._super()},_sceneOrder:function(){this._isInSceneOnTop=!1},_radialType:function(){return cc.CCPROGRESS_TIMER_RADIAL_CCW}});cc.TransitionRadialCW=cc.TransitionRadialCCW.extend({_radialType:function(){return cc.CCPROGRESS_TIMER_TYPE_RADIAL_CW}});
cc.TransitionRadialCCW.create=function(a,b){var c=new cc.TransitionRadialCCW;c.initWithDuration(a,b);return c};cc.TransitionRadialCW.create=function(a,b){var c=new cc.TransitionRadialCW;c.initWithDuration(a,b);return c};cc.TransitionPageTurn=cc.TransitionScene.extend({_back:!0,initWithDuration:function(a,b,c){this._back=c;this._super(a,b);return!0},actionWithSize:function(a){return this._back?cc.ReverseTime.create(this._super(a,this._duration)):this._super(a,this._duration)},onEnter:function(){this._super();var a=cc.Director.sharedDirector().getWinSize(),b;a.width>a.height?(a=16,b=12):(a=12,b=16);a=this.actionWithSize(cc.ccg(a,b));this._back?(this._inScene.setIsVisible(!1),this._inScene.runAction(cc.Sequence.create(cc.Show.create(),
a,cc.CallFunc.create(this,cc.TransitionScene.finish),cc.StopGrid.create(),null))):this._outScene.runAction(cc.Sequence.create(a,cc.CallFunc.create(this,cc.TransitionScene.finish),cc.StopGrid.create(),null))},_sceneOrder:function(){this.isInSceneOnTop=this._back}});cc.TransitionPageTurn.create=function(a,b,c){var d=new cc.TransitionPageTurn;d.initWithDuration(a,b,c);return d};cc.SPRITE_INDEX_NOT_INITIALIZED="0xffffffff";
cc.generateTextureCacheForColor=function(a){var b=a.width,c=a.height,d=[],e=document.createElement("canvas");e.width=b;e.height=c;var f=e.getContext("2d");f.drawImage(a,0,0);e=document.createElement("canvas");e.width=b;e.height=c;for(var e=e.getContext("2d"),f=f.getImageData(0,0,b,c).data,h=0;4>h;h++){var g=document.createElement("canvas");g.width=b;g.height=c;var i=g.getContext("2d");e.drawImage(a,0,0);for(var j=e.getImageData(0,0,b,c),l=j.data,k=0;k<f.length;k+=4)l[k]=0===h?f[k]:0,l[k+1]=1===h?
f[k+1]:0,l[k+2]=2===h?f[k+2]:0,l[k+3]=f[k+3];i.putImageData(j,0,0);d.push(g)}return d};
cc.generateTintImage=function(a,b,c,d){d||(d=new cc.Rect,d.size=new cc.Size(a.width,a.height));a=c instanceof cc.Color4F?cc.ccc3(255*c.r,255*c.g,255*c.b):c;c=document.createElement("canvas");c.width=d.size.width;c.height=d.size.height;var e=c.getContext("2d");e.globalAlpha=1;e.globalCompositeOperation="copy";e.drawImage(b[3],d.origin.x,d.origin.y,d.size.width,d.size.height,0,0,d.size.width,d.size.height);e.globalCompositeOperation="lighter";0<a.r&&(e.globalAlpha=a.r/255,e.drawImage(b[0],d.origin.x,
d.origin.y,d.size.width,d.size.height,0,0,d.size.width,d.size.height));0<a.g&&(e.globalAlpha=a.g/255,e.drawImage(b[1],d.origin.x,d.origin.y,d.size.width,d.size.height,0,0,d.size.width,d.size.height));0<a.b&&(e.globalAlpha=a.b/255,e.drawImage(b[2],d.origin.x,d.origin.y,d.size.width,d.size.height,0,0,d.size.width,d.size.height));return c};cc.HONOR_PARENT_TRANSFORM_TRANSLATE=1;cc.HONOR_PARENT_TRANSFORM_ROTATE=2;cc.HONOR_PARENT_TRANSFORM_SCALE=4;cc.HONOR_PARENT_TRANSFORM_SKEW=8;
cc.HONOR_PARENT_TRANSFORM_ALL=cc.HONOR_PARENT_TRANSFORM_TRANSLATE|cc.HONOR_PARENT_TRANSFORM_ROTATE|cc.HONOR_PARENT_TRANSFORM_SCALE|cc.HONOR_PARENT_TRANSFORM_SKEW;cc.TransformValues=function(a,b,c,d,e,f){this.pos=a;this.scale=b;this.rotation=c;this.skew=d;this.ap=e;this.visible=f};cc.RENDER_IN_SUBPIXEL=function(a){return cc.SPRITEBATCHNODE_RENDER_SUBPIXEL?a:parseInt(a)};
cc.Sprite=cc.Node.extend({_textureAtlas:null,_atlasIndex:0,_batchNode:null,_honorParentTransform:null,_dirty:null,_recursiveDirty:null,_hasChildren:null,_blendFunc:new cc.BlendFunc,_texture:new cc.Texture2D,_originalTexture:null,_usesBatchNode:null,_rect:new cc.Rect,_rectInPixels:cc.RectZero(),_rectRotated:null,_offsetPositionInPixels:cc.PointZero(),_unflippedOffsetPositionFromCenter:cc.PointZero(),_quad:cc.V3F_C4B_T2F_QuadZero(),colorUnmodified:null,_opacityModifyRGB:null,_flipX:null,_flipY:null,
_opacity:255,ctor:function(a){this._super();if(a)if("string"==typeof a)this.initWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName(a));else if("object"==typeof a)if(a instanceof cc.SpriteFrame)this.initWithSpriteFrame(a);else if(a instanceof cc.SpriteBatchNode){if(1<arguments.length){var b=arguments[1];b instanceof cc.Rect&&this.initWithBatchNode(a,b)}}else a instanceof HTMLImageElement||a instanceof HTMLCanvasElement?this.initWithTexture(a):a instanceof cc.Texture2D&&
this.initWithTexture(a)},isDirty:function(){return this._dirty},setDirty:function(a){this._dirty=a},getQuad:function(){return this._quad},isTextureRectRotated:function(){return this._rectRotated},getAtlasIndex:function(){return this._atlasIndex},setAtlasIndex:function(a){this._atlasIndex=a},getTextureRect:function(){return new cc.Rect(this._rect)},isUsesBatchNode:function(){return this._usesBatchNode},setUsesSpriteBatchNode:function(a){this._usesBatchNode=a},getTextureAtlas:function(){return this._textureAtlas},
setTextureAtlas:function(a){this._textureAtlas=a},getSpriteBatchNode:function(){return this._batchNode},setSpriteBatchNode:function(a){this._batchNode=a},getHonorParentTransform:function(){return this._honorParentTransform},setHonorParentTransform:function(a){this._honorParentTransform=a},getOffsetPositionInPixels:function(){return new cc.Point(this._offsetPositionInPixels.x,this._offsetPositionInPixels.y)},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a){this._blendFunc=a},
initWithBatchNode:function(a,b){return this.initWithTexture(a.getTexture(),b)?(this.useBatchNode(a),!0):!1},initWithBatchNodeRectInPixels:function(a,b){return this.initWithTexture(a.getTexture())?(this.setTextureRectInPixels(b,!1,b.size),this.useBatchNode(a),!0):!1},init:function(){this._dirty=this._recursiveDirty=!1;this.useSelfRender();this._opacityModifyRGB=!0;this._opacity=255;this._color=cc.WHITE();this._colorUnmodified=cc.WHITE();this._blendFunc.src=cc.BLEND_SRC;this._blendFunc.dst=cc.BLEND_DST;
this.setTexture(null);this._flipX=this._flipY=!1;this.setAnchorPoint(cc.ccp(0.5,0.5));this._offsetPositionInPixels=cc.PointZero();this._honorParentTransform=cc.HONOR_PARENT_TRANSFORM_ALL;this._hasChildren=!1;var a=new cc.Color4B(255,255,255,255);this._quad.bl.colors=a;this._quad.br.colors=a;this._quad.tl.colors=a;this._quad.tr.colors=a;this.setTextureRectInPixels(cc.RectZero(),!1,cc.SizeZero());return!0},initWithTexture:function(a,b){var c=arguments.length;if(0==c)throw"Sprite.initWithTexture(): Argument must be non-nil ";
cc.Assert(null!=a,"");if(1==c)if(b=new cc.Rect,a instanceof cc.Texture2D)b.size=a.getContentSize();else if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement)b.size=new cc.Size(a.width,a.height);cc.renderContextType==cc.CANVAS&&(this._originalTexture=a);this.init();this.setTexture(a);this.setTextureRect(b);return!0},initWithFile:function(a,b){var c=arguments.length;cc.Assert(null!=a,"");var d=cc.TextureCache.sharedTextureCache().textureForKey(a);d||(d=cc.TextureCache.sharedTextureCache().addImage(a));
switch(c){case 1:return d?(b=cc.RectZero(),b.size=cc.renderContextType==cc.CANVAS?new cc.Size(d.width,d.height):d.getContentSize(),this.initWithTexture(d,b)):!1;case 2:return d?this.initWithTexture(d,b):!1;default:throw"initWithFile():Argument must be non-nil ";}},initWithSpriteFrame:function(a){cc.Assert(null!=a,"");var b=this.initWithTexture(a.getTexture(),a.getRect());this.setDisplayFrame(a);return b},initWithSpriteFrameName:function(a){cc.Assert(null!=a,"");return this.initWithSpriteFrame(cc.SpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName(a))},
useSelfRender:function(){this._atlasIndex=cc.SPRITE_INDEX_NOT_INITIALIZED;this._usesBatchNode=!1;this._batchNode=this._textureAtlas=null;this._dirty=this._recursiveDirty=!1;var a=0+this._offsetPositionInPixels.x,b=0+this._offsetPositionInPixels.y,c=a+this._rectInPixels.size.width,d=b+this._rectInPixels.size.height;this._quad.bl.vertices=cc.vertex3(a,b,0);this._quad.br.vertices=cc.vertex3(c,b,0);this._quad.tl.vertices=cc.vertex3(a,d,0);this._quad.tr.vertices=cc.vertex3(c,d,0)},useBatchNode:function(a){this._usesBatchNode=
!0;this._textureAtlas=a.getTextureAtlas();this._batchNode=a},setTextureRect:function(a){a=cc.RECT_POINTS_TO_PIXELS(a);this.setTextureRectInPixels(a,!1,a.size)},setTextureRectInPixels:function(a,b,c){this._rectInPixels=a;this._rect=cc.RECT_PIXELS_TO_POINTS(a);this._rectRotated=b;this.setContentSizeInPixels(c);this._updateTextureCoords(this._rectInPixels);a=this._unflippedOffsetPositionFromCenter;this._offsetPositionInPixels.x=a.x+(this._contentSizeInPixels.width-this._rectInPixels.size.width)/2;this._offsetPositionInPixels.y=
a.y+(this._contentSizeInPixels.height-this._rectInPixels.size.height)/2;if(this._usesBatchNode)this._dirty=!0;else{var a=0+this._offsetPositionInPixels.x,b=0+this._offsetPositionInPixels.y,c=a+this._rectInPixels.size.width,d=b+this._rectInPixels.size.height;this._quad.bl.vertices=cc.vertex3(a,b,0);this._quad.br.vertices=cc.vertex3(c,b,0);this._quad.tl.vertices=cc.vertex3(a,d,0);this._quad.tr.vertices=cc.vertex3(c,d,0)}},_updateTextureCoords:function(a){if(cc.renderContextType==cc.WEBGL){var b=this._usesBatchNode?
this._textureAtlas.getTexture():this._texture;if(b){var c=b.getPixelsWide(),d=b.getPixelsHigh(),e;this._rectRotated?(cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(b=(2*a.origin.x+1)/(2*c),c=b+(2*a.size.height-2)/(2*c),e=(2*a.origin.y+1)/(2*d),a=e+(2*a.size.width-2)/(2*d)):(b=a.origin.x/c,c=b+a.size.height/c,e=a.origin.y/d,a=e+a.size.width/d),this._flipX&&cc.SWAP(e,a),this._flipY&&cc.SWAP(b,c),this._quad.bl.texCoords.u=b,this._quad.bl.texCoords.v=e,this._quad.br.texCoords.u=b,this._quad.br.texCoords.v=a,this._quad.tl.texCoords.u=
c,this._quad.tl.texCoords.v=e,this._quad.tr.texCoords.u=c,this._quad.tr.texCoords.v=a):(cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(b=(2*a.origin.x+1)/(2*c),c=b+(2*a.size.width-2)/(2*c),e=(2*a.origin.y+1)/(2*d),a=e+(2*a.size.height-2)/(2*d)):(b=a.origin.x/c,c=b+a.size.width/c,e=a.origin.y/d,a=e+a.size.height/d),this._flipX&&cc.SWAP(b,c),this._flipY&&cc.SWAP(e,a),this._quad.bl.texCoords.u=b,this._quad.bl.texCoords.v=a,this._quad.br.texCoords.u=c,this._quad.br.texCoords.v=a,this._quad.tl.texCoords.u=b,this._quad.tl.texCoords.v=
e,this._quad.tr.texCoords.u=c,this._quad.tr.texCoords.v=e)}}},updateTransform:function(){cc.Assert(this._usesBatchNode,"");if(this._dirty){var a=new cc.AffineTransform;if(this._isVisible){if(!this._parent||this._parent==this._batchNode){var b=-cc.DEGREES_TO_RADIANS(this._rotation),c=Math.cos(b),b=Math.sin(b),a=cc.AffineTransformMake(c*this._scaleX,b*this._scaleX,-b*this._scaleY,c*this._scaleY,this._positionInPixels.x,this._positionInPixels.y);if(this._skewX||this._skewY)c=cc.AffineTransformMake(1,
Math.tan(cc.DEGREES_TO_RADIANS(this._skewY)),Math.tan(cc.DEGREES_TO_RADIANS(this._skewX)),1,0,0),a=cc.AffineTransformConcat(c,a);a=cc.AffineTransformTranslate(a,-this._anchorPointInPixels.x,-this._anchorPointInPixels.y)}else{a=cc.AffineTransformIdentity();c=cc.HONOR_PARENT_TRANSFORM_ALL;for(b=this;b&&b!=this._batchNode;b=b.getParent()){var d=new cc.TransformValues;b._getTransformValues(d);if(!d.visible){this._quad.br.vertices=this._quad.tl.vertices=this._quad.tr.vertices=this._quad.bl.vertices=cc.vertex3(0,
0,0);this._textureAtlas.updateQuad(this._quad,this._atlasIndex);this._dirty=this._recursiveDirty=!1;return}var e=cc.AffineTransformIdentity();c&cc.HONOR_PARENT_TRANSFORM_TRANSLATE&&(e=cc.AffineTransformTranslate(e,d.pos.x,d.pos.y));c&cc.HONOR_PARENT_TRANSFORM_ROTATE&&(e=cc.AffineTransformRotate(e,-cc.DEGREES_TO_RADIANS(d.rotation)));if(c&cc.HONOR_PARENT_TRANSFORM_SKEW)var f=new cc.AffineTransform,f=cc.AffineTransformMake(1,Math.tan(cc.DEGREES_TO_RADIANS(d.skew.y)),Math.tan(cc.DEGREES_TO_RADIANS(d.skew.x)),
1,0,0),e=cc.AffineTransformConcat(f,e);c&cc.HONOR_PARENT_TRANSFORM_SCALE&&(e=cc.AffineTransformScale(e,d.scale.x,d.scale.y));e=cc.AffineTransformTranslate(e,-d.ap.x,-d.ap.y);a=cc.AffineTransformConcat(a,e);c=b;this.getHonorParentTransform()}}var d=new cc.Size,d=this._rectInPixels.size,c=this._offsetPositionInPixels.x,b=this._offsetPositionInPixels.y,h=c+d.width,f=b+d.height,d=a.tx,g=a.ty,e=a.a,i=a.b,j=a.d,a=-a.c,l=c*i+b*j+g,k=h*e-b*a+d,m=h*i+b*j+g,n=h*e-f*a+d,h=h*i+f*j+g,o=c*e-f*a+d,f=c*i+f*j+g;this._quad.bl.vertices=
cc.vertex3(cc.RENDER_IN_SUBPIXEL(c*e-b*a+d),cc.RENDER_IN_SUBPIXEL(l),this._vertexZ);this._quad.br.vertices=cc.vertex3(cc.RENDER_IN_SUBPIXEL(k),cc.RENDER_IN_SUBPIXEL(m),this._vertexZ);this._quad.tl.vertices=cc.vertex3(cc.RENDER_IN_SUBPIXEL(o),cc.RENDER_IN_SUBPIXEL(f),this._vertexZ);this._quad.tr.vertices=cc.vertex3(cc.RENDER_IN_SUBPIXEL(n),cc.RENDER_IN_SUBPIXEL(h),this._vertexZ)}else this._quad.br.vertices=this._quad.tl.vertices=this._quad.tr.vertices=this._quad.bl.vertices=cc.vertex3(0,0,0);this._textureAtlas.updateQuad(this._quad,
this._atlasIndex);this._dirty=this._recursiveDirty=!1}},_getTransformValues:function(a){a.pos=this._positionInPixels;a.scale.x=this._scaleX;a.scale.y=this._scaleY;a.rotation=this._rotation;a.skew.x=this._skewX;a.skew.y=this._skewY;a.ap=this._anchorPointInPixels;a.visible=this._isVisible;return a},draw:function(a){this._super();a=a||cc.renderContext;if(cc.renderContextType==cc.CANVAS){a.globalAlpha=this._opacity/255;this._flipX&&a.scale(-1,1);this._flipY&&a.scale(1,-1);var b=this._offsetPositionInPixels,
b=new cc.Point(0|-this._anchorPointInPixels.x+b.x,0|-this._anchorPointInPixels.y+b.y);this._texture?this._texture instanceof HTMLImageElement?0==this._contentSize.width&&0==this._contentSize.height?(this.setContentSize(new cc.Size(this._texture.width,this._texture.height)),this._rect.size.width=this._texture.width,this._rect.size.height=this._texture.height,a.drawImage(this._texture,b.x,-(b.y+this._texture.height))):a.drawImage(this._texture,this._rect.origin.x,this._rect.origin.y,this._rect.size.width,
this._rect.size.height,b.x,-(b.y+this._rect.size.height),this._rect.size.width,this._rect.size.height):0==this._contentSize.width&&0==this._contentSize.height?(this.setContentSize(new cc.Size(this._texture.width,this._texture.height)),this._rect.size.width=this._texture.width,this._rect.size.height=this._texture.height,a.drawImage(this._texture,b.x,-(b.y+this._texture.height))):a.drawImage(this._texture,0,0,this._rect.size.width,this._rect.size.height,b.x,-(b.y+this._rect.size.height),this._rect.size.width,
this._rect.size.height):(a.fillStyle="rgba("+this._color.r+","+this._color.g+","+this._color.b+",1)",a.fillRect(b.x,b.y,this._contentSize.width,this._contentSize.height));1==cc.SPRITE_DEBUG_DRAW?(a=this._contentSize,a=[cc.ccp(0,0),cc.ccp(a.width,0),cc.ccp(a.width,a.height),cc.ccp(0,a.height)],cc.drawingUtil.drawPoly(a,4,!0)):2==cc.SPRITE_DEBUG_DRAW&&(a=this._rect.size,b=this.getOffsetPositionInPixels(),a=[cc.ccp(b.x,b.y),cc.ccp(b.x+a.width,b.y),cc.ccp(b.x+a.width,b.y+a.height),cc.ccp(b.x,b.y+a.height)],
cc.drawingUtil.drawPoly(a,4,!0))}else cc.Assert(!this._usesBatchNode,""),cc.offsetof(cc.V3F_C4B_T2F,cc.vertices),cc.offsetof(cc.V3F_C4B_T2F,cc.colors),cc.offsetof(cc.V3F_C4B_T2F,cc.texCoords),1==cc.SPRITE_DEBUG_DRAW?(a=this._contentSize,a=[cc.ccp(0,0),cc.ccp(a.width,0),cc.ccp(a.width,a.height),cc.ccp(0,a.height)],cc.drawingUtil.drawPoly(a,4,!0)):2==cc.SPRITE_DEBUG_DRAW&&(a=this._rect.size,new cc.Point,b=this.getOffsetPositionInPixels(),a=[cc.ccp(b.x,b.y),cc.ccp(b.x+a.width,b.y),cc.ccp(b.x+a.width,
b.y+a.height),cc.ccp(b.x,b.y+a.height)],cc.drawingUtil.drawPoly(a,4,!0))},addChild:function(a,b,c){switch(arguments.length){case 1:this._super(a);break;case 2:this._super(a,b);break;case 3:cc.Assert(null!=a,"");this._super(a,b,c);if(cc.renderContextType==cc.WEBGL){if(this._usesBatchNode){cc.Assert(a.getTexture().getName()==this._textureAtlas.getTexture().getName(),"");var d=this._batchNode.atlasIndexForChild(a,b);this._batchNode._insertChild(a,d)}this._hasChildren=!0}break;default:throw"Sprite.addChild():Argument must be non-nil ";
}},reorderChild:function(a,b){cc.Assert(null!=a,"child is null");cc.Assert(-1<this._children.indexOf(a),"");b!=a.getZOrder()&&(this._usesBatchNode?(this.removeChild(a,!1),this.addChild(a,b)):this._super(a,b))},removeChild:function(a,b){this._usesBatchNode&&this._batchNode.removeSpriteFromAtlas(a);this._super(a,b)},removeAllChildrenWithCleanup:function(a){if(this._usesBatchNode&&null!=this._children)for(var b=0;b<this._children.length;b++)this._children[b]instanceof cc.Sprite&&this._batchNode.removeSpriteFromAtlas(this._children[b]);
this._super(a);this._hasChildren=!1},setDirtyRecursively:function(a){this._dirty=this._recursiveDirty=a;if(null!=this._children)for(var b in this._children)this._children[b]instanceof cc.Sprite&&this._children[b].setDirtyRecursively(!0)},SET_DIRTY_RECURSIVELY:function(){this._usesBatchNode&&!this._recursiveDirty&&(this._dirty=this._recursiveDirty=!0,this._hasChildren&&this.setDirtyRecursively(!0))},setPosition:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setPositionInPixels:function(a){this._super(a);
this.SET_DIRTY_RECURSIVELY()},setRotation:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setSkewX:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setSkewY:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setScaleX:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setScaleY:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setScale:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setVertexZ:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setAnchorPoint:function(a){this._super(a);
this.SET_DIRTY_RECURSIVELY()},setIsRelativeAnchorPoint:function(a){cc.Assert(!this._usesBatchNode,"");this._super(a)},setIsVisible:function(a){this._super(a);this.SET_DIRTY_RECURSIVELY()},setFlipX:function(a){this._flipX!=a&&(this._flipX=a,this.setTextureRectInPixels(this._rectInPixels,this._rectRotated,this._contentSizeInPixels),this.setNodeDirty())},setFlipY:function(a){this._flipY!=a&&(this._flipY=a,this.setNodeDirty())},isFlipX:function(){return this._flipX},isFlipY:function(){return this._flipY},
updateColor:function(){var a=new cc.Color4B(this._color.r,this._color.g,this._color.b,this._opacity);this._quad.bl.colors=a;this._quad.br.colors=a;this._quad.tl.colors=a;this._quad.tr.colors=a;this._usesBatchNode&&(this._atlasIndex!=cc.SPRITE_INDEX_NOT_INITIALIZED?this._textureAtlas.updateQuad(this._quad,this._atlasIndex):this._dirty=!0)},getOpacity:function(){return this._opacity},setOpacity:function(a){this._opacity=a;this.setNodeDirty()},getColor:function(){return this._opacityModifyRGB?new cc.Color3B(this._colorUnmodified):
new cc.Color3B(this._color)},setColor:function(a){this._color.r==a.r&&this._color.g==a.g&&this._color.b==a.b||(this._color=this._colorUnmodified=new cc.Color3B(a.r,a.g,a.b),this.getTexture()&&cc.renderContextType==cc.CANVAS&&(a=cc.TextureCache.sharedTextureCache().getTextureColors(this._originalTexture))&&this.setTexture(cc.generateTintImage(this.getTexture(),a,this._color,this.getTextureRect())),this.updateColor(),this.setNodeDirty())},setIsOpacityModifyRGB:function(a){var b=this._color;this._opacityModifyRGB=
a;this._color=b},getIsOpacityModifyRGB:function(){return this._opacityModifyRGB},setDisplayFrame:function(a){this.setNodeDirty();this._unflippedOffsetPositionFromCenter=a.getOffsetInPixels();var b=a.getTexture();b!=this._texture&&this.setTexture(b);(this._rectRotated=a.isRotated())&&this.setRotation(-90);this.setTextureRectInPixels(a.getRectInPixels(),a.isRotated(),a.getOriginalSizeInPixels())},setDisplayFrameWithAnimationName:function(a,b){cc.Assert(a,"");var c=cc.AnimationCache.sharedAnimationCache().animationByName(a);
cc.Assert(c,"");c=c.getFrames()[b];cc.Assert(c,"");this.setDisplayFrame(c)},isFrameDisplayed:function(a){return cc.renderContextType==cc.CANVAS?a.getTexture()!=this._texture?!1:cc.Rect.CCRectEqualToRect(a.getRect(),this._rect):cc.Rect.CCRectEqualToRect(a.getRect(),this._rect)&&a.getTexture().getName()==this._texture.getName()},displayedFrame:function(){return cc.renderContextType==cc.CANVAS?cc.SpriteFrame._frameWithTextureForCanvas(this._texture,this._rectInPixels,this._rectRotated,this._unflippedOffsetPositionFromCenter,
this._contentSizeInPixels):cc.SpriteFrame.create(this._texture,this._rectInPixels,this._rectRotated,this._unflippedOffsetPositionFromCenter,this._contentSizeInPixels)},_updateBlendFunc:function(){cc.renderContextType==cc.WEBGL&&(cc.Assert(!this._usesBatchNode,"CCSprite: _updateBlendFunc doesn't work when the sprite is rendered using a CCSpriteSheet"),!this._texture||!this._texture.getHasPremultipliedAlpha()?(this._blendFunc.src=cc.GL_SRC_ALPHA,this._blendFunc.dst=cc.GL_ONE_MINUS_SRC_ALPHA,this.setIsOpacityModifyRGB(!1)):
(this._blendFunc.src=cc.BLEND_SRC,this._blendFunc.dst=cc.BLEND_DST,this.setIsOpacityModifyRGB(!0)))},setTexture:function(a){cc.renderContextType!=cc.CANVAS&&cc.Assert(!this._usesBatchNode,"setTexture doesn't work when the sprite is rendered using a CCSpriteSheet");this._texture=a;this._updateBlendFunc()},getTexture:function(){return this._texture}});
cc.Sprite.createWithTexture=function(a,b,c){var d=arguments.length,e=new cc.Sprite;switch(d){case 1:return e&&e.initWithTexture(a)?e:null;case 2:return e&&e.initWithTexture(a,b)?e:null;case 3:return cc.Assert(0,""),null;default:throw"Sprite.spriteWithTexture(): Argument must be non-nil ";}};cc.Sprite.create=function(a,b){var c=arguments.length,d=new cc.Sprite;return 2>c?d&&d.initWithFile(a)?d:null:d&&d.initWithFile(a,b)?d:null};
cc.Sprite.createWithSpriteFrame=function(a){var b=new cc.Sprite;return b&&b.initWithSpriteFrame(a)?b:null};cc.Sprite.createWithBatchNode=function(a,b){var c=new cc.Sprite;return c&&c.initWithBatchNode(a,b)?c:null};cc.Animation=cc.Class.extend({_name:"",_delay:0,_frames:null,ctor:function(){this._frames=[]},getName:function(){return this._name},setName:function(a){this._name=a},getDelay:function(){return this._delay},setDelay:function(a){this._delay=a},getFrames:function(){return this._frames},setFrames:function(a){this._frames=a},initWithFrames:function(a,b){this._delay=b;this._frames=a?a:[];return!0},addFrame:function(a){this._frames.push(a)},addFrameWithFileName:function(a){var a=cc.TextureCache.sharedTextureCache().addImage(a),
b=cc.RectZero();b.size=a instanceof HTMLImageElement||a instanceof HTMLCanvasElement?cc.SizeMake(a.width,a.height):a.getContentSize();this._frames.push(cc.SpriteFrame.create(a,b))},addFrameWithTexture:function(a,b){this._frames.push(cc.SpriteFrame.create(a,b))},init:function(){return this.initWithFrames(null,0)}});cc.Animation.create=function(a,b){var c=new cc.Animation;null==a?c.init():(b||(b=0),c.initWithFrames(a,b));return c};cc.AnimationCache=cc.Class.extend({addAnimation:function(a,b){this._animations[b]=a},removeAnimationByName:function(a){a&&delete this._animations[a]},animationByName:function(a){return this._animations[a]},init:function(){this._animations={};return!0},_animations:null});cc.AnimationCache.purgeSharedAnimationCache=function(){cc.sharedAnimationCache=null};
cc.AnimationCache.sharedAnimationCache=function(){null==cc.sharedAnimationCache&&(cc.sharedAnimationCache=new cc.AnimationCache,cc.sharedAnimationCache.init());return cc.sharedAnimationCache};cc.sharedAnimationCache=null;cc.SpriteFrame=cc.Class.extend({_rectInPixels:new cc.Rect,_rotated:null,_rect:new cc.Rect,_offsetInPixels:new cc.Point,_originalSizeInPixels:new cc.Size,_texture:null,getRectInPixels:function(){return this._rectInPixels},setRectInPixels:function(a){this._rectInPixels=a;this._rect=cc.RECT_PIXELS_TO_POINTS(a)},isRotated:function(){return this._rotated},setRotated:function(a){this._rotated=a},getRect:function(){return this._rect},setRect:function(a){this._rect=a;this._rectInPixels=cc.RECT_POINTS_TO_PIXELS(this._rect)},
getOffsetInPixels:function(){return this._offsetInPixels},setOffsetInPixels:function(a){this._offsetInPixels=a},getOriginalSizeInPixels:function(){return this._originalSizeInPixels},setOriginalSizeInPixels:function(a){this._originalSizeInPixels=a},getTexture:function(){return this._texture},setTexture:function(a){this._texture=a},copyWithZone:function(){var a=new cc.SpriteFrame;a.initWithTexture(this._texture,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels);return a},
initWithTexture:function(a,b,c,d,e){switch(arguments.length){case 2:var f=cc.RECT_POINTS_TO_PIXELS(b);return this.initWithTexture(a,f,!1,cc.PointZero(),f.size);case 5:return this._texture=a,this._rectInPixels=b,this._rect=cc.RECT_PIXELS_TO_POINTS(b),this._rotated=c,this._offsetInPixels=d,this._originalSizeInPixels=e,!0;default:throw"Argument must be non-nil ";}}});
cc.SpriteFrame.create=function(a,b,c,d,e){var f=arguments.length,h=new cc.SpriteFrame;switch(f){case 2:h.initWithTexture(a,b);break;case 5:h.initWithTexture(a,b,c,d,e);break;default:throw"Argument must be non-nil ";}return h};cc.SpriteFrame._frameWithTextureForCanvas=function(a,b,c,d,e){var f=new cc.SpriteFrame;f._texture=a;f._rectInPixels=b;f._rect=cc.RECT_PIXELS_TO_POINTS(b);f._rotated=c;f._offsetInPixels=d;f._originalSizeInPixels=e;return f};cc.SpriteFrameCache=cc.Class.extend({_spriteFrames:null,_spriteFramesAliases:null,ctor:function(){this._spriteFrames={};this._spriteFramesAliases={}},addSpriteFramesWithDictionary:function(a,b){var c=a.metadata,d=a.frames,e=0;null!=c&&(e=parseInt(this._valueForKey("format",c)));cc.Assert(0<=e&&3>=e,"");var f=null,h;for(h in d)if(f=d[h])if(c=this._spriteFrames[h],!c){if(0==e){var g=parseFloat(this._valueForKey("x",f)),i=parseFloat(this._valueForKey("y",f)),j=parseFloat(this._valueForKey("width",f)),
l=parseFloat(this._valueForKey("height",f)),k=parseFloat(this._valueForKey("offsetX",f)),m=parseFloat(this._valueForKey("offsetY",f)),n=parseInt(this._valueForKey("originalWidth",f)),f=parseInt(this._valueForKey("originalHeight",f));(!n||!f)&&cc.Log("cocos2d: WARNING: originalWidth/Height not found on the cc.SpriteFrame. AnchorPoint won't work as expected. Regenrate the .plist");n=Math.abs(n);f=Math.abs(f);c=new cc.SpriteFrame;c.initWithTexture(b,cc.RectMake(g,i,j,l),!1,cc.PointMake(k,m),cc.SizeMake(n,
f))}else if(1==e||2==e)g=cc.RectFromString(this._valueForKey("frame",f)),i=!1,2==e&&(i="true"==this._valueForKey("rotated",f)),j=cc.PointFromString(this._valueForKey("offset",f)),f=cc.SizeFromString(this._valueForKey("sourceSize",f)),c=new cc.SpriteFrame,c.initWithTexture(b,g,i,j,f);else if(3==e){var g=new cc.Size,i=new cc.Point,j=new cc.Size,l=new cc.Rect,g=cc.SizeFromString(this._valueForKey("spriteSize",f)),i=cc.PointFromString(this._valueForKey("spriteOffset",f)),j=cc.SizeFromString(this._valueForKey("spriteSourceSize",
f)),l=cc.RectFromString(this._valueForKey("textureRect",f)),k="true"==this._valueForKey("textureRotated",f),c=f.aliases,f=h.toString(),o;for(o in c)this._spriteFramesAliases.hasOwnProperty(c[o])&&cc.Log("cocos2d: WARNING: an alias with name "+o+" already exists"),this._spriteFramesAliases[c[o]]=f;c=new cc.SpriteFrame;c.initWithTexture(b,cc.RectMake(l.origin.x,l.origin.y,g.width,g.height),k,i,j)}c.isRotated()&&(f=c.getRect(),c.setRect(new cc.Rect(f.origin.x,f.origin.y,f.size.height,f.size.width)));
this._spriteFrames[h]=c}},addSpriteFramesWithJson:function(a){var b="",c=a.metadata;c&&(b=this._valueForKey("textureFileName",c),b=b.toString());(b=cc.TextureCache.sharedTextureCache().addImage(b))?this.addSpriteFramesWithDictionary(a,b):cc.Log("cocos2d: cc.SpriteFrameCache: Couldn't load texture")},addSpriteFramesWithFile:function(a,b){var c=arguments.length,d=cc.FileUtils.dictionaryWithContentsOfFileThreadSafe(a);switch(c){case 1:var c="",e=d.metadata;e&&(c=this._valueForKey("textureFileName",e).toString());
""!=c?(e=a.lastIndexOf("/"),c=(e?a.substring(0,e+1):"")+c):(c=a,e=c.lastIndexOf(".",c.length),c=c.substr(0,e),c+=".png",cc.Log("cocos2d: cc.SpriteFrameCache: Trying to use file "+c.toString()+" as texture"));(b=cc.TextureCache.sharedTextureCache().addImage(c))?this.addSpriteFramesWithDictionary(d,b):cc.Log("cocos2d: cc.SpriteFrameCache: Couldn't load texture");break;case 2:arguments[1]instanceof cc.Texture2D?this.addSpriteFramesWithDictionary(d,b):(a=arguments[0],c=arguments[1],cc.Assert(c,"texture name should not be null"),
(b=cc.TextureCache.sharedTextureCache().addImage(c))?this.addSpriteFramesWithDictionary(d,b):cc.Log("cocos2d: cc.SpriteFrameCache: couldn't load texture file. File not found "+c));break;default:throw"Argument must be non-nil ";}},addSpriteFrame:function(a,b){this._spriteFrames[b]=a},removeSpriteFrames:function(){this._spriteFrames=[];this._spriteFramesAliases=[]},removeSpriteFrameByName:function(a){a&&(this._spriteFramesAliases.hasOwnProperty(a)&&delete this._spriteFramesAliases[a],this._spriteFrames.hasOwnProperty(a)&&
delete this._spriteFrames[a])},removeSpriteFramesFromFile:function(a){a=cc.FileUtils.fullPathFromRelativePath(a);this.removeSpriteFramesFromDictionary(cc.FileUtils.dictionaryWithContentsOfFileThreadSafe(a))},removeSpriteFramesFromDictionary:function(a){var a=a.frames,b;for(b in a)this._spriteFrames.hasOwnProperty(b)&&delete this._spriteFrames[b]},removeSpriteFramesFromTexture:function(a){for(var b in this._spriteFrames){var c=this._spriteFrames[b];c&&c.getTexture()==a&&delete this._spriteFrames[b]}},
spriteFrameByName:function(a){var b;this._spriteFrames.hasOwnProperty(a)&&(b=this._spriteFrames[a]);if(!b){var c;this._spriteFramesAliases.hasOwnProperty(a)&&(c=this._spriteFramesAliases[a]);c&&(this._spriteFrames.hasOwnProperty(c.toString())&&(b=this._spriteFrames[c.toString()]),b||cc.Log("cocos2d: cc.SpriteFrameCahce: Frame "+a+" not found"))}return b},_valueForKey:function(a,b){return b&&b.hasOwnProperty(a)?b[a].toString():""}});cc.sharedSpriteFrameCache=null;
cc.SpriteFrameCache.sharedSpriteFrameCache=function(){cc.sharedSpriteFrameCache||(cc.sharedSpriteFrameCache=new cc.SpriteFrameCache);return cc.sharedSpriteFrameCache};cc.SpriteFrameCache.purgeSharedSpriteFrameCache=function(){cc.sharedSpriteFrameCache=null};cc.DEFAULT_CAPACITY=29;cc.UINT_MAX=4294967295;cc.GL_SRC_ALPHA=770;cc.GL_ONE_MINUS_SRC_ALPHA=771;
cc.SpriteBatchNode=cc.Node.extend({_textureAtlas:new cc.TextureAtlas,_blendFunc:new cc.BlendFunc(0,0),_descendants:[],_renderTexture:null,_isUseCache:!1,_originalTexture:null,ctor:function(a){this._super();a&&this.initWithFile(a,cc.DEFAULT_CAPACITY);this.setContentSize(new cc.Size(cc.canvas.width,cc.canvas.height));this._renderTexture=cc.RenderTexture.create(cc.canvas.width,cc.canvas.height)},_updateBlendFunc:function(){this._textureAtlas.getTexture().getHasPremultipliedAlpha()||(this._blendFunc.src=
cc.GL_SRC_ALPHA,this._blendFunc.dst=cc.GL_ONE_MINUS_SRC_ALPHA)},addQuadFromSprite:function(a,b){cc.Assert(null!=a,"SpriteBatchNode.addQuadFromSprite():Argument must be non-nil");a.useBatchNode(this);a.setAtlasIndex(b);this._textureAtlas.insertQuad(a.getQuad(),b);a.setDirty(!0);a.updateTransform();this._children=cc.ArrayAppendObjectToIndex(this._children,a,b)},addSpriteWithoutQuad:function(a,b,c){cc.Assert(null!=a,"SpriteBatchNode.addQuadFromSprite():Argument must be non-nil");a.setAtlasIndex(b);var d=
0;if(this._descendants&&0<this._descendants.length)for(var e=null,f=0;f<this._descendants.length;f++)(e=this._descendants[f])&&e.getAtlasIndex()>=b&&++d;this._descendants=cc.ArrayAppendObjectToIndex(this._descendants,a,d);this.addChild(a,b,c,!0);return this},getTextureAtlas:function(){return this._textureAtlas},setTextureAtlas:function(a){a!=this._textureAtlas&&(this._textureAtlas=a)},getDescendants:function(){return this._descendants},initWithTexture:function(a,b){this._children=[];this._descendants=
[];this._blendFunc.src=cc.BLEND_SRC;this._blendFunc.dst=cc.BLEND_DST;this._textureAtlas=new cc.TextureAtlas;this._textureAtlas.initWithTexture(a,b);cc.renderContextType==cc.CANVAS&&(this._originalTexture=a);cc.renderContextType==cc.WEBGL&&this._updateBlendFunc();return!0},setNodeDirty:function(){this._setNodeDirtyForCache();this._isTransformDirty=this._isInverseDirty=!0;cc.NODE_TRANSFORM_USING_AFFINE_MATRIX&&(this._isTransformGLDirty=!0)},_setNodeDirtyForCache:function(){this._isCacheDirty=!0},setContentSizeInPixels:function(a){a&&
(this._super(a),this._renderTexture.setContentSize(a))},initWithFile:function(a,b){var c=cc.TextureCache.sharedTextureCache().textureForKey(a);c||(c=cc.TextureCache.sharedTextureCache().addImage(a));return this.initWithTexture(c,b)},increaseAtlasCapacity:function(){var a=4*(this._textureAtlas.getCapacity()+1)/3;cc.Log("cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from "+this._textureAtlas.getCapacity()+" to ["+a+"].");this._textureAtlas.resizeCapacity(a)||(cc.Log("cocos2d: WARNING: Not enough memory to resize the atlas"),
cc.Assert(!1,"Not enough memory to resize the atla"))},removeChildAtIndex:function(a,b){this.removeChild(this._children[a],b)},insertChild:function(a,b){a.useBatchNode(this);a.setAtlasIndex(b);a.setDirty(!0);this._textureAtlas.getTotalQuads()==this._textureAtlas.getCapacity()&&this.increaseAtlasCapacity();this._textureAtlas.insertQuad(a.getQuad(),b);this._descendants=cc.ArrayAppendObjectToIndex(this._descendants,a,b);var c=0;if(this._descendants&&0<this._descendants.length)for(b=0;b<this._descendants.length;b++){var d=
this._descendants[b];d&&(c>b&&d.setAtlasIndex(d.getAtlasIndex()+1),++c)}if((d=a.getChildren())&&0<d.length)for(b=0;b<this._descendants.length;b++)if(d=this._descendants[b])c=this.atlasIndexForChild(d,d.getZOrder()),this.insertChild(d,c)},removeSpriteFromAtlas:function(a){this._textureAtlas.removeQuadAtIndex(a.getAtlasIndex());a.useSelfRender();var b=cc.ArrayGetIndexOfObject(this._descendants,a);if(-1!=b){cc.ArrayRemoveObjectAtIndex(this._descendants,b);for(var c=this._descendants.length;b<c;++b){var d=
this._descendants[b];d.setAtlasIndex(d.getAtlasIndex()-1)}}if((a=a.getChildren())&&0<a.length)for(b=0;b<a.length;b++)a[b]&&this.removeSpriteFromAtlas(a[b])},rebuildIndexInOrder:function(a,b){var c=a.getChildren();if(c&&0<c.length)for(var d=0;d<c.length;d++){var e=c[d];e&&0>e.getZOrder()&&(b=this.rebuildIndexInOrder(e,b))}a.isEqual(this)||(a.setAtlasIndex(b),b++);if(c&&0<c.length)for(d=0;d<c.length;d++)(e=c[d])&&0<=e.getZOrder()&&(b=this.rebuildIndexInOrder(e,b));return b},highestAtlasIndexInChild:function(a){var b=
a.getChildren();return!b||0==b.length?a.getAtlasIndex():this.highestAtlasIndexInChild(b.pop())},lowestAtlasIndexInChild:function(a){var b=a.getChildren();return!b||0==b.length?a.getAtlasIndex():this.lowestAtlasIndexInChild(b.pop())},atlasIndexForChild:function(a,b){var c=a.getParent().getChildren(),d=cc.ArrayGetIndexOfObject(c,a),e=a.getParent()==this,f=null;0<d&&d<cc.UINT_MAX&&(f=c[d-1]);if(e)return 0==d?0:this.highestAtlasIndexInChild(f)+1;if(0==d)return c=a.getParent(),0>b?c.getAtlasIndex():c.getAtlasIndex()+
1;if(0>f.getZOrder()&&0>b||0<=f.getZOrder()&&0<=b)return this.highestAtlasIndexInChild(f)+1;c=a.getParent();return c.getAtlasIndex()+1},getTexture:function(){return this._textureAtlas.getTexture()},setTexture:function(a){this._textureAtlas.setTexture(a);for(var b=0;b<this._children.length;b++)this._children[b].setTexture(a)},setBlendFunc:function(a){this._blendFunc=a},getBlendFunc:function(){return this._blendFunc},visit:function(a){if(cc.renderContextType==cc.CANVAS&&(a=a||cc.renderContext,this._isVisible)){a.save();
this._grid&&this._grid.isActive()&&(this._grid.beforeDraw(),this.transformAncestors());this.transform();if(this._isUseCache){if(this._isCacheDirty){this._renderTexture.clear();this._renderTexture.context.translate(this._anchorPointInPixels.x,-this._anchorPointInPixels.y);if(this._children)for(var b=0;b<this._children.length;b++)this._children[b]&&this._children[b].visit(this._renderTexture.context);this._isCacheDirty=!1}this.draw()}else if(this._children)for(b=0;b<this._children.length;b++)this._children[b]&&
this._children[b].visit(a);this._grid&&this._grid.isActive()&&this._grid.afterDraw(this);a.restore()}},addChild:function(a,b,c){switch(arguments.length){case 1:this._super(a);break;case 2:this._super(a,b);break;case 3:cc.Assert(null!=a,"SpriteBatchNode.addChild():child should not be null");cc.renderContextType!=cc.CANVAS&&cc.Assert(a.getTexture().getName()==this._textureAtlas.getTexture().getName(),"SpriteBatchNode.addChild():check CCSprite is using the same texture id");this._super(a,b,c);var d=
this.atlasIndexForChild(a,b);this.insertChild(a,d);break;case 4:arguments[3]&&this._super(a,b,c);break;default:throw"Argument must be non-nil ";}this.setNodeDirty()},reorderChild:function(a,b){cc.Assert(null!=a,"SpriteBatchNode.addChild():the child should not be null");cc.Assert(-1<this._children.indexOf(a),"SpriteBatchNode.addChild():sprite batch node should contain the child");b!=a.getZOrder()&&(this.removeChild(a,!1),this.addChild(a,b),this.setNodeDirty())},removeChild:function(a,b){null!=a&&(cc.Assert(-1<
this._children.indexOf(a),"SpriteBatchNode.addChild():sprite batch node should contain the child"),this.removeSpriteFromAtlas(a),this._super(a,b))},removeAllChildrenWithCleanup:function(a){if(this._children&&0<this._children.length)for(var b=0;b<this._children.length;b++){var c=this._children[b];c&&this.removeSpriteFromAtlas(c)}this._super(a);this._descendants=[];this._textureAtlas.removeAllQuads()},draw:function(a){this._super();if(cc.renderContextType==cc.CANVAS){var a=a||cc.renderContext,b=new cc.Point(0|
-this._anchorPointInPixels.x,0|-this._anchorPointInPixels.y);this._renderTexture&&a.drawImage(this._renderTexture.getCanvas(),b.x,-(b.y+this._renderTexture.getCanvas().height))}else if(0!=this._textureAtlas.getTotalQuads()){if(this._descendants&&0<this._descendants.length){b=null;for(a=0;a<this._descendants.length;a++)if(b=this._descendants[a])b.updateTransform(),b=b.boundingBox(),b=[cc.ccp(b.origin.x,b.origin.y),cc.ccp(b.origin.x+b.size.width,b.origin.y),cc.ccp(b.origin.x+b.size.width,b.origin.y+
b.size.height),cc.ccp(b.origin.x,b.origin.y+b.size.height)],cc.drawingUtil.drawPoly(b,4,!0)}this._textureAtlas.drawQuads()}}});cc.SpriteBatchNode.create=function(a,b){b||(b=cc.DEFAULT_CAPACITY);var c=new cc.SpriteBatchNode;c.initWithFile(a,b);return c};cc.SpriteBatchNode.createWithTexture=function(a,b){b||(b=cc.DEFAULT_CAPACITY);var c=new cc.SpriteBatchNode;c.initWithTexture(a,b);return c};cc.LabelAtlas=cc.AtlasNode.extend({initWithString:function(a,b,c,d,e){cc.Assert(null!=a,"");return this.initWithTileFile(b,c,d,a.length)?(this._mapStartChar=e,this.setString(a),!0):!1},updateAtlasValues:function(){for(var a=this.getTexture(),b=0;b<this._string.length;b++){var c=this._string.charCodeAt(b)-this._mapStartChar.charCodeAt(0),d=parseInt(c%this._itemsPerRow),c=parseInt(c/this._itemsPerRow),d=cc.RectMake(d*this._itemWidth,c*this._itemHeight,this._itemWidth,this._itemHeight),c=this._string.charCodeAt(b),
e=this.getChildByTag(b);e?32==c?(e.init(),e.setTextureRect(cc.RectMake(0,0,0,0))):(e.initWithTexture(a,d),e.setIsVisible(!0),e.setOpacity(this._opacity)):(e=new cc.Sprite,32==c?(e.init(),e.setTextureRect(cc.RectMake(0,0,0,0))):e.initWithTexture(a,d),this.addChild(e,0,b));e.setPosition(new cc.Point(b*this._itemWidth+this._itemWidth/2,this._itemHeight/2))}},setString:function(a){this._string=a;a=a.length;this._textureAtlas.resizeCapacity(a);var b=new cc.Size;b.width=a*this._itemWidth;b.height=this._itemHeight;
this.setContentSizeInPixels(b);if(this._children)for(a=0;a<this._children.length;a++)(b=this._children[a])&&b.setIsVisible(!1);this.updateAtlasValues()},setColor:function(a){this._super(a);this.updateAtlasValues()},getString:function(){return this._string},draw:function(){this._super();if(cc.LABELATLAS_DEBUG_DRAW){var a=this.getContentSize(),a=[cc.ccp(0,0),cc.ccp(a.width,0),cc.ccp(a.width,a.height),cc.ccp(0,a.height)];cc.drawingUtil.drawPoly(a,4,!0)}},convertToLabelProtocol:function(){return this},
_string:null,_mapStartChar:null});cc.LabelAtlas.create=function(a,b,c,d,e){var f=new cc.LabelAtlas;return f&&f.initWithString(a,b,c,d,e)?f:null};cc.LabelTTF=cc.Sprite.extend({_dimensions:null,_alignment:cc.TEXT_ALIGNMENT_CENTER,_fontName:"Arial",_fontSize:0,_string:null,_fontStyleStr:null,ctor:function(){this._super();this._string="";this._color=cc.WHITE();this._opacityModifyRGB=!1;this._fontStyleStr=""},description:function(){return"<cc.LabelTTF | FontName ="+this._fontName+" FontSize = "+this._fontSize.toFixed(1)+">"},initWithString:function(a,b,c,d,e){cc.Assert(null!=a,"cc.LabelTTF.initWithString() label is null");if(3<arguments.length){if(this.init())return this._dimensions=
cc.SizeMake(b.width*cc.CONTENT_SCALE_FACTOR(),b.height*cc.CONTENT_SCALE_FACTOR()),this._alignment=c,this._fontName=d,this._fontSize=e*cc.CONTENT_SCALE_FACTOR(),this.setString(a),this._fontStyleStr=this._fontSize+"px '"+this._fontName+"'",!0}else if(d=arguments[1],e=arguments[2],this.init())return this._dimensions=cc.SizeZero(),this._fontName=d,this._fontSize=e*cc.CONTENT_SCALE_FACTOR(),this.setString(a),this._fontStyleStr=this._fontSize+"px '"+this._fontName+"'",!0;return!1},setString:function(a){this._string=
a;cc.renderContext.save();cc.renderContext.font=this._fontSize+"px '"+this._fontName+"'";a=cc.renderContext.measureText(this._string);this.setContentSize(new cc.Size(a.width,this._fontSize));cc.renderContext.restore();this.setNodeDirty()},draw:function(a){if(cc.renderContextType==cc.CANVAS){a=a||cc.renderContext;this._flipX&&a.scale(-1,1);this._flipY&&a.scale(1,-1);var b=this._color;a.fillStyle="rgba("+b.r+","+b.g+","+b.b+", "+this._opacity/255+")";a.font!=this._fontStyleStr&&(a.font=this._fontStyleStr);
b=0;switch(this._alignment){case cc.TEXT_ALIGNMENT_LEFT:b=-(this._dimensions.width-this._contentSize.width)/2;break;case cc.TEXT_ALIGNMENT_RIGHT:b=(this._dimensions.width-this._contentSize.width)/2}this._contentSize.width>this._dimensions.width&&0!==this._dimensions.width?this._wrapText(a,this._string,-this._dimensions.width*this._anchorPoint.x,-this._dimensions.height*this._anchorPoint.y,this._dimensions.width,1.2*this._fontSize,this._alignment):a.fillText(this._string,-this._contentSize.width*this._anchorPoint.x+
b,this._contentSize.height*this._anchorPoint.y)}},_wrapText:function(a,b,c,d,e,f,h){for(var b=b.split(" "),g="",i=0;i<b.length;i++){var j=g+b[i]+" ",l=a.measureText(j).width-a.measureText(" ").width;if(l>=e){var k=l-a.measureText(b[i]).width-2*a.measureText(" ").width;switch(h){case cc.TEXT_ALIGNMENT_LEFT:k=0;break;case cc.TEXT_ALIGNMENT_RIGHT:k=e-k;break;default:k=(e-k)/2}a.fillText(g,c+k,d);d+=f;g=b[i]+" "}else g=j,i==b.length-1&&a.fillText(g,c+k,d)}},getString:function(){return this._string},convertToLabelProtocol:function(){return this}});
cc.LabelTTF.create=function(a,b,c,d,e){var f=new cc.LabelTTF;if(3<arguments.length)return null!=f&&f.initWithString(a,b,c,d,e)?f:null;d=arguments[1];e=arguments[2];return null!=f&&f.initWithString(a,d,e)?f:null};cc._KerningHashElement=function(a,b){this.key=a;this.amount=b};cc._BMFontDef=function(a,b,c,d,e){this.charID=a||0;this.rect=b||new cc.RectMake(0,0,10,10);this.xOffset=c||0;this.yOffset=d||0;this.xAdvance=e||0};cc._BMFontPadding=function(a,b,c,d){this.left=a||0;this.top=b||0;this.right=c||0;this.bottom=d||0};
cc.BMFontConfiguration=cc.Class.extend({bitmapFontArray:{},commonHeight:0,padding:new cc._BMFontPadding,atlasName:"",kerningDictionary:{},description:function(){return"<cc.BMFontConfiguration | Kernings:"+this.kerningDictionary+" | Image = "+this.atlasName.toString()+">"},initWithFNTfile:function(a){cc.Assert(null!=a&&0!=a.length,"");this._parseConfigFile(a);return!0},_parseConfigFile:function(a){var b=cc.SAXParser.shareParser().getList(a);cc.Assert(b,"cc.BMFontConfiguration._parseConfigFile | Open file error.");
var c,d;d=/padding+[a-z0-9\-= ",]+/gi;(c=d.exec(b)[0])&&this._parseInfoArguments(c);d=/common lineHeight+[a-z0-9\-= ",]+/gi;(c=d.exec(b)[0])&&this._parseCommonArguments(c);d=/page id=[a-zA-Z0-9\.\-= ",]+/gi;(c=d.exec(b)[0])&&this._parseImageFileName(c,a);d=/chars c+[a-z0-9\-= ",]+/gi;d.exec(b);d=/char id=\w[a-z0-9\-= ]+/gi;if(c=b.match(d))for(a=0;a<c.length;a++)d=new cc._BMFontDef,this._parseCharacterDefinition(c[a],d),this.bitmapFontArray[d.charID]=d;d=/kernings count+[a-z0-9\-= ",]+/gi;d.test(b)&&
(c=RegExp.$1[0]);c&&this._parseKerningCapacity(c);d=/first=\w[a-z0-9\-= ]+/gi;if(c=b.match(d))for(a=0;a<c.length;a++)this._parseKerningEntry(c[a])},_parseCharacterDefinition:function(a,b){var c=/id=(\d+)/gi.exec(a)[1];b.charID=c.toString();c=/x=([\-\d]+)/gi.exec(a)[1];b.rect.origin.x=parseInt(c);c=/y=([\-\d]+)/gi.exec(a)[1];b.rect.origin.y=parseInt(c);c=/width=([\-\d]+)/gi.exec(a)[1];b.rect.size.width=parseInt(c);c=/height=([\-\d]+)/gi.exec(a)[1];b.rect.size.height=parseInt(c);c=/xoffset=([\-\d]+)/gi.exec(a)[1];
b.xOffset=parseInt(c);c=/yoffset=([\-\d]+)/gi.exec(a)[1];b.yOffset=parseInt(c);c=/xadvance=([\-\d]+)/gi.exec(a)[1];b.xAdvance=parseInt(c)},_parseInfoArguments:function(a){a=/padding=(\d+)[,](\d+)[,](\d+)[,](\d+)/gi.exec(a);this.padding.left=a[1];this.padding.top=a[2];this.padding.right=a[3];this.padding.bottom=a[4]},_parseCommonArguments:function(a){this.commonHeight=/lineHeight=(\d+)/gi.exec(a)[1];a=/pages=(\d+)/gi.exec(a)[1];cc.Assert(1==parseInt(a),"cc.BitfontAtlas: only supports 1 page")},_parseImageFileName:function(a,
b){var c;c=/id=(\d+)/gi.exec(a)[1];cc.Assert(0==parseInt(c),"LabelBMFont file could not be found");c=/file="([a-zA-Z0-9\-\._]+)/gi.exec(a)[1];this.atlasName=cc.FileUtils.fullPathFromRelativeFile(c,b)},_parseKerningCapacity:function(){},_parseKerningEntry:function(a){var b=/first=([\-\d]+)/gi.exec(a)[1],c=parseInt(b),b=/second=([\-\d]+)/gi.exec(a)[1],d=parseInt(b),b=/amount=([\-\d]+)/gi.exec(a)[1],a=parseInt(b),b=new cc._KerningHashElement;b.amount=a;b.key=c<<16|d&65535;this.kerningDictionary[b.key]=
b},_purgeKerningDictionary:function(){this.kerningDictionary={}}});cc.BMFontConfiguration.create=function(a){var b=new cc.BMFontConfiguration;return b.initWithFNTfile(a)?b:null};
cc.LabelBMFont=cc.SpriteBatchNode.extend({_opacity:0,_color:null,_isOpacityModifyRGB:!1,_string:"",_configuration:null,ctor:function(){this._super();if(cc.LABELBMFONT_DEBUG_DRAW){this.draw();var a=this.getContentSize(),a=[cc.ccp(0,0),cc.ccp(a.width,0),cc.ccp(a.width,a.height),cc.ccp(0,a.height)];cc.drawPoly(a,4,!0)}},getOpacity:function(){return this._opacity},setOpacity:function(a){this._opacity=a;if(this._children)for(var a=0,b=this._children.length;a<b;a++){var c=this._children[a];c&&c.setOpacity(this._opacity)}},
getColor:function(){return this._color},setColor:function(a){if(!(this._color.r==a.r&&this._color.g==a.g&&this._color.b==a.b)&&(this._color=a,this.getTexture()&&cc.renderContextType==cc.CANVAS&&(a=cc.TextureCache.sharedTextureCache().getTextureColors(this._originalTexture)))){var b=this.getTexture(),c=new cc.Rect(0,0,b.width,b.height),a=cc.generateTintImage(b,a,this._color,c),b=new Image;b.src=a.toDataURL();this.setTexture(b)}},getIsOpacityModifyRGB:function(){return this._isOpacityModifyRGB},setIsOpacityModifyRGB:function(a){this._isOpacityModifyRGB=
a;if(this._children&&0!=this._children.length)for(var a=0,b=this._children.length;a<b;a++){var c=this._children[a];c&&(c=c instanceof cc.RGBAProtocol)&&c.setIsOpacityModifyRGB(this._isOpacityModifyRGB)}},initWithString:function(a,b){cc.Assert(null!=a,"");this._configuration=cc.FNTConfigLoadFile(b);cc.Assert(this._configuration,"Error creating config for LabelBMFont");return this.initWithFile(this._configuration.atlasName,a.length)?(this._opacity=255,this._color=cc.WHITE(),this._contentSize=cc.SizeZero(),
this.setAnchorPoint(cc.ccp(0.5,0.5)),this.setString(a),!0):!1},createFontChars:function(){var a=0,b=0,c=-1,d=0,e=cc.SizeZero(),f=0,h=0,b=1,g=this._string.length;if(0!=g){for(var i=0;i<g;i++){var j=this._string.charCodeAt(i);10==j&&b++}h=this._configuration.commonHeight*b;b=-(this._configuration.commonHeight-this._configuration.commonHeight*b);for(i=0;i<g;i++)if(j=this._string.charCodeAt(i),10==j)a=0,b-=this._configuration.commonHeight;else{var d=this._kerningAmountForFirst(c,j),c=this._configuration.bitmapFontArray[j],
l=c.rect,k=this.getChildByTag(i);k?32==j?(k.init(),k.setTextureRect(cc.RectMake(0,0,0,0))):(k.initWithBatchNodeRectInPixels(this,l),k.setIsVisible(!0),k.setOpacity(255)):(k=new cc.Sprite,32==j?(k.init(),k.setTextureRect(l)):k.initWithBatchNodeRectInPixels(this,l),this.addChild(k,0,i));k.setPositionInPixels(cc.ccp(a+c.xOffset+c.rect.size.width/2+d,b+(this._configuration.commonHeight-c.yOffset)-l.size.height/2));a+=this._configuration.bitmapFontArray[j].xAdvance+d;c=j;k.setIsOpacityModifyRGB(this._isOpacityModifyRGB);
255!=this._opacity&&k.setOpacity(this._opacity);f<a&&(f=a)}e.width=f;e.height=h;this.setContentSizeInPixels(e)}},getString:function(){return this._string},setString:function(a){this._string=a;if(this._children)for(a=0;a<this._children.length;a++){var b=this._children[a];b&&b.setIsVisible(!1)}this.createFontChars()},setCString:function(a){this.setString(a)},setAnchorPoint:function(a){cc.Point.CCPointEqualToPoint(a,this._anchorPoint)||(this._super(a),this.createFontChars())},_atlasNameFromFntFile:function(){},
_kerningAmountForFirst:function(a,b){var c=0;if(this._configuration.kerningDictionary){var d=this._configuration.kerningDictionary[(a<<16|b&65535).toString()];d&&(c=d.amount)}return c}});cc.LabelBMFont.create=function(a,b){var c=new cc.LabelBMFont;return c&&c.initWithString(a,b)?c:null};cc.configurations=null;cc.FNTConfigLoadFile=function(a){cc.configurations||(cc.configurations={});var b=cc.configurations[a];b||(b=cc.BMFontConfiguration.create(a));return b};cc.purgeCachedData=function(){cc.FNTConfigRemoveCache()};
cc.FNTConfigRemoveCache=function(){cc.configurations&&(cc.configurations={})};cc.PARTICLE_SHAPE_MODE=0;cc.PARTICLE_TEXTURE_MODE=1;cc.PARTICLE_STAR_SHAPE=0;cc.PARTICLE_BALL_SHAPE=1;cc.CCPARTICLE_DURATION_INFINITY=-1;cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE=-1;cc.CCPARTICLE_START_RADIUS_EQUAL_TO_END_RADIUS=-1;cc.PARTICLE_START_SIZE_EQUAL_TO_END_SIZE=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE;cc.PARTICLE_DURATION_INFINITY=cc.CCPARTICLE_DURATION_INFINITY;cc.CCPARTICLE_MODE_GRAVITY=0;cc.CCPARTICLE_MODE_RADIUS=1;cc.CCPARTICLE_TYPE_FREE=0;cc.CCPARTICLE_TYPE_RELATIVE=1;
cc.CCPARTICLE_TYPE_GROUPED=2;cc.PARTICLE_TYPE_FREE=cc.CCPARTICLE_TYPE_FREE;cc.PARTICLE_TYPE_GROUPED=cc.CCPARTICLE_TYPE_GROUPED;
cc.Particle=function(a,b,c,d,e,f,h,g,i,j,l){this.pos=a?a:cc.PointZero();this.startPos=b?b:cc.PointZero();this.color=c?c:new cc.Color4F(0,0,0,1);this.deltaColor=d?d:new cc.Color4F(0,0,0,1);this.size=e||0;this.deltaSize=f||0;this.rotation=h||0;this.deltaRotation=g||0;this.timeToLive=i||0;this.modeA=j?j:new cc.Particle.ModeA;this.modeB=l?l:new cc.Particle.ModeB;this.isChangeColor=!1;this.drawPos=new cc.Point(0,0)};
cc.Particle.ModeA=function(a,b,c){this.dir=a?a:cc.PointZero();this.radialAccel=b||0;this.tangentialAccel=c||0};cc.Particle.ModeB=function(a,b,c,d){this.angle=a||0;this.degreesPerSecond=b||0;this.radius=c||0;this.deltaRadius=d||0};
cc.ParticleSystem=cc.Node.extend({_plistFile:"",_elapsed:0,modeA:null,modeB:null,_particles:null,_emitCounter:0,_particleIdx:0,_profilingTimer:null,_drawMode:cc.PARTICLE_SHAPE_MODE,getDrawMode:function(){return this._drawMode},setDrawMode:function(a){this._drawMode=a},_shapeType:cc.PARTICLE_BALL_SHAPE,getShapeType:function(){return this._shapeType},setShapeType:function(a){this._shapeType=a},_isActive:!1,getIsActive:function(){return this._isActive},setIsActive:function(a){this._isActive=a},_particleCount:0,
getParticleCount:function(){return this._particleCount},setParticleCount:function(a){this._particleCount=a},_duration:0,getDuration:function(){return this._duration},setDuration:function(a){this._duration=a},_sourcePosition:cc.PointZero(),getSourcePosition:function(){return this._sourcePosition},setSourcePosition:function(a){this._sourcePosition=a},_posVar:cc.PointZero(),getPosVar:function(){return this._posVar},setPosVar:function(a){this._posVar=a},_life:0,getLife:function(){return this._life},setLife:function(a){this._life=
a},_lifeVar:0,getLifeVar:function(){return this._lifeVar},setLifeVar:function(a){this._lifeVar=a},_angle:0,getAngle:function(){return this._angle},setAngle:function(a){this._angle=a},_angleVar:0,getAngleVar:function(){return this._angleVar},setAngleVar:function(a){this._angleVar=a},getGravity:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeA.gravity},setGravity:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,
"Particle Mode should be Gravity");this.modeA.gravity=a},getSpeed:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeA.speed},setSpeed:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeA.speed=a},getSpeedVar:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeA.speedVar},setSpeedVar:function(a){cc.Assert(this._emitterMode==
cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeA.speedVar=a},getTangentialAccel:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeA.tangentialAccel},setTangentialAccel:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeA.tangentialAccel=a},getTangentialAccelVar:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");
return this.modeA.tangentialAccelVar},setTangentialAccelVar:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeA.tangentialAccelVar=a},getRadialAccel:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeA.radialAccel},setRadialAccel:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeA.radialAccel=a},getRadialAccelVar:function(){cc.Assert(this._emitterMode==
cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeA.radialAccelVar},setRadialAccelVar:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeA.radialAccelVar=a},getStartRadius:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeB.startRadius},setStartRadius:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");
this.modeB.startRadius=a},getStartRadiusVar:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeB.startRadiusVar},setStartRadiusVar:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeB.startRadiusVar=a},getEndRadius:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeB.endRadius},setEndRadius:function(a){cc.Assert(this._emitterMode==
cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeB.endRadius=a},getEndRadiusVar:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeB.endRadiusVar},setEndRadiusVar:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeB.endRadiusVar=a},getRotatePerSecond:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");
return this.modeB.rotatePerSecond},setRotatePerSecond:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeB.rotatePerSecond=a},getRotatePerSecondVar:function(){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");return this.modeB.rotatePerSecondVar},setRotatePerSecondVar:function(a){cc.Assert(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY,"Particle Mode should be Gravity");this.modeB.rotatePerSecondVar=
a},_startSize:0,getStartSize:function(){return this._startSize},setStartSize:function(a){this._startSize=a},_startSizeVar:0,getStartSizeVar:function(){return this._startSizeVar},setStartSizeVar:function(a){this._startSizeVar=a},_endSize:0,getEndSize:function(){return this._endSize},setEndSize:function(a){this._endSize=a},_endSizeVar:0,getEndSizeVar:function(){return this._endSizeVar},setEndSizeVar:function(a){this._endSizeVar=a},_startColor:new cc.Color4F(0,0,0,1),getStartColor:function(){return this._startColor},
setStartColor:function(a){this._startColor=a},_startColorVar:new cc.Color4F(0,0,0,1),getStartColorVar:function(){return this._startColorVar},setStartColorVar:function(a){this._startColorVar=a},_endColor:new cc.Color4F(0,0,0,1),getEndColor:function(){return this._endColor},setEndColor:function(a){this._endColor=a},_endColorVar:new cc.Color4F(0,0,0,1),getEndColorVar:function(){return this._endColorVar},setEndColorVar:function(a){this._endColorVar=a},_startSpin:0,getStartSpin:function(){return this._startSpin},
setStartSpin:function(a){this._startSpin=a},_startSpinVar:0,getStartSpinVar:function(){return this._startSpinVar},setStartSpinVar:function(a){this._startSpinVar=a},_endSpin:0,getEndSpin:function(){return this._endSpin},setEndSpin:function(a){this._endSpin=a},_endSpinVar:0,getEndSpinVar:function(){return this._endSpinVar},setEndSpinVar:function(a){this._endSpinVar=a},_emissionRate:0,getEmissionRate:function(){return this._emissionRate},setEmissionRate:function(a){this._emissionRate=a},_totalParticles:0,
getTotalParticles:function(){return this._totalParticles},setTotalParticles:function(a){this._totalParticles=a},_texture:null,getTexture:function(){return this._texture},setTexture:function(a){this._texture=a;if(!(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement)&&this._texture&&!this._texture.getHasPremultipliedAlpha()&&this._blendFunc.src==cc.BLEND_SRC&&this._blendFunc.dst==cc.BLEND_DST)this._blendFunc.src=GL_SRC_ALPHA,this._blendFunc.dst=GL_ONE_MINUS_SRC_ALPHA},_blendFunc:new cc.BlendFunc(0,
0),getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a){this._blendFunc=a},_isBlendAdditive:!1,getIsBlendAdditive:function(){return this._isBlendAdditive},setIsBlendAdditive:function(a){this._isBlendAdditive=a},_positionType:cc.CCPARTICLE_TYPE_FREE,getPositionType:function(){return this._positionType},setPositionType:function(a){this._positionType=a},_isAutoRemoveOnFinish:!1,getIsAutoRemoveOnFinish:function(){return this._isAutoRemoveOnFinish},setIsAutoRemoveOnFinish:function(a){this._isAutoRemoveOnFinish=
a},_emitterMode:0,getEmitterMode:function(){return this._emitterMode},setEmitterMode:function(a){this._emitterMode=a},ctor:function(){this._super();this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY;this.modeA=new cc.ParticleSystem.ModeA;this.modeB=new cc.ParticleSystem.ModeB;this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST)},initWithFile:function(a){this._plistFile=a;a=cc.FileUtils.dictionaryWithContentsOfFileThreadSafe(this._plistFile);cc.Assert(null!=a,"Particles: file not found");return this.initWithDictionary(a)},
boundingBoxToWorld:function(){return new cc.Rect(0,0,cc.canvas.width,cc.canvas.height)},initWithDictionary:function(a){var b=!1;if(this.initWithTotalParticles(parseInt(this._valueForKey("maxParticles",a)))){this._angle=parseFloat(this._valueForKey("angle",a));this._angleVar=parseFloat(this._valueForKey("angleVariance",a));this._duration=parseFloat(this._valueForKey("duration",a));this._blendFunc.src=parseInt(this._valueForKey("blendFuncSource",a));this._blendFunc.dst=parseInt(this._valueForKey("blendFuncDestination",
a));this._startColor.r=parseFloat(this._valueForKey("startColorRed",a));this._startColor.g=parseFloat(this._valueForKey("startColorGreen",a));this._startColor.b=parseFloat(this._valueForKey("startColorBlue",a));this._startColor.a=parseFloat(this._valueForKey("startColorAlpha",a));this._startColorVar.r=parseFloat(this._valueForKey("startColorVarianceRed",a));this._startColorVar.g=parseFloat(this._valueForKey("startColorVarianceGreen",a));this._startColorVar.b=parseFloat(this._valueForKey("startColorVarianceBlue",
a));this._startColorVar.a=parseFloat(this._valueForKey("startColorVarianceAlpha",a));this._endColor.r=parseFloat(this._valueForKey("finishColorRed",a));this._endColor.g=parseFloat(this._valueForKey("finishColorGreen",a));this._endColor.b=parseFloat(this._valueForKey("finishColorBlue",a));this._endColor.a=parseFloat(this._valueForKey("finishColorAlpha",a));this._endColorVar.r=parseFloat(this._valueForKey("finishColorVarianceRed",a));this._endColorVar.g=parseFloat(this._valueForKey("finishColorVarianceGreen",
a));this._endColorVar.b=parseFloat(this._valueForKey("finishColorVarianceBlue",a));this._endColorVar.a=parseFloat(this._valueForKey("finishColorVarianceAlpha",a));this._startSize=parseFloat(this._valueForKey("startParticleSize",a));this._startSizeVar=parseFloat(this._valueForKey("startParticleSizeVariance",a));this._endSize=parseFloat(this._valueForKey("finishParticleSize",a));this._endSizeVar=parseFloat(this._valueForKey("finishParticleSizeVariance",a));var b=parseFloat(this._valueForKey("sourcePositionx",
a)),c=parseFloat(this._valueForKey("sourcePositiony",a));this.setPosition(cc.ccp(b,c));this._posVar.x=parseFloat(this._valueForKey("sourcePositionVariancex",a));this._posVar.y=parseFloat(this._valueForKey("sourcePositionVariancey",a));this._startSpin=parseFloat(this._valueForKey("rotationStart",a));this._startSpinVar=parseFloat(this._valueForKey("rotationStartVariance",a));this._endSpin=parseFloat(this._valueForKey("rotationEnd",a));this._endSpinVar=parseFloat(this._valueForKey("rotationEndVariance",
a));this._emitterMode=parseInt(this._valueForKey("emitterType",a));this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY?(this.modeA.gravity.x=parseFloat(this._valueForKey("gravityx",a)),this.modeA.gravity.y=parseFloat(this._valueForKey("gravityy",a)),this.modeA.speed=parseFloat(this._valueForKey("speed",a)),this.modeA.speedVar=parseFloat(this._valueForKey("speedVariance",a)),b=this._valueForKey("radialAcceleration",a),this.modeA.radialAccel=b?parseFloat(b):0,b=this._valueForKey("radialAccelVariance",a),
this.modeA.radialAccelVar=b?parseFloat(b):0,b=this._valueForKey("tangentialAcceleration",a),this.modeA.tangentialAccel=b?parseFloat(b):0,b=this._valueForKey("tangentialAccelVariance",a),this.modeA.tangentialAccelVar=b?parseFloat(b):0):this._emitterMode==cc.CCPARTICLE_MODE_RADIUS?(this.modeB.startRadius=parseFloat(this._valueForKey("maxRadius",a)),this.modeB.startRadiusVar=parseFloat(this._valueForKey("maxRadiusVariance",a)),this.modeB.endRadius=parseFloat(this._valueForKey("minRadius",a)),this.modeB.endRadiusVar=
0,this.modeB.rotatePerSecond=parseFloat(this._valueForKey("rotatePerSecond",a)),this.modeB.rotatePerSecondVar=parseFloat(this._valueForKey("rotatePerSecondVariance",a))):(cc.Assert(!1,"Invalid emitterType in config file"),cc.BREAK_IF(!0));this._life=parseFloat(this._valueForKey("particleLifespan",a));this._lifeVar=parseFloat(this._valueForKey("particleLifespanVariance",a));this._emissionRate=this._totalParticles/this._life;var d=this._valueForKey("textureFileName",a),b=cc.FileUtils.fullPathFromRelativeFile(d,
this._plistFile),c=null;0<d.length&&(d=cc.FileUtils.getIsPopupNotify(),cc.FileUtils.setIsPopupNotify(!1),c=cc.TextureCache.sharedTextureCache().addImage(b),cc.FileUtils.setIsPopupNotify(d));if(c)this._texture=c;else if(a=this._valueForKey("textureImageData",a),cc.Assert(a,"cc.ParticleSystem.initWithDictory:textureImageData is null"),0!=a.length)return cc.base64Decode(a,a.length,null),cc.Assert(!1,"CCParticleSystem: error decoding textureImageData"),!1;cc.Assert(null!=this._texture,"CCParticleSystem: error loading the texture");
if(!this._texture)return!1;b=!0}return b},initWithTotalParticles:function(a){this._totalParticles=a;this._particles=[];if(!this._particles)return cc.Log("Particle system: not enough memory"),!1;this._isActive=!0;this._blendFunc.src=cc.BLEND_SRC;this._blendFunc.dst=cc.BLEND_DST;this._positionType=cc.CCPARTICLE_TYPE_FREE;this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY;this._isAutoRemoveOnFinish=!1;this.scheduleUpdateWithPriority(1);return!0},addParticle:function(){if(this.isFull())return!1;var a=new cc.Particle;
this.initParticle(a);this._particles.push(a);++this._particleCount;return!0},initParticle:function(a){a.timeToLive=this._life+this._lifeVar*cc.RANDOM_MINUS1_1();a.timeToLive=Math.max(0,a.timeToLive);a.pos.x=this._sourcePosition.x+this._posVar.x*cc.RANDOM_MINUS1_1();a.pos.x*=cc.CONTENT_SCALE_FACTOR();a.pos.y=this._sourcePosition.y+this._posVar.y*cc.RANDOM_MINUS1_1();a.pos.y*=cc.CONTENT_SCALE_FACTOR();var b=new cc.Color4F(cc.clampf(this._startColor.r+this._startColorVar.r*cc.RANDOM_MINUS1_1(),0,1),
cc.clampf(this._startColor.g+this._startColorVar.g*cc.RANDOM_MINUS1_1(),0,1),cc.clampf(this._startColor.b+this._startColorVar.b*cc.RANDOM_MINUS1_1(),0,1),cc.clampf(this._startColor.a+this._startColorVar.a*cc.RANDOM_MINUS1_1(),0,1)),c=new cc.Color4F(cc.clampf(this._endColor.r+this._endColorVar.r*cc.RANDOM_MINUS1_1(),0,1),cc.clampf(this._endColor.g+this._endColorVar.g*cc.RANDOM_MINUS1_1(),0,1),cc.clampf(this._endColor.b+this._endColorVar.b*cc.RANDOM_MINUS1_1(),0,1),cc.clampf(this._endColor.a+this._endColorVar.a*
cc.RANDOM_MINUS1_1(),0,1));a.color=b;a.deltaColor.r=(c.r-b.r)/a.timeToLive;a.deltaColor.g=(c.g-b.g)/a.timeToLive;a.deltaColor.b=(c.b-b.b)/a.timeToLive;a.deltaColor.a=(c.a-b.a)/a.timeToLive;b=this._startSize+this._startSizeVar*cc.RANDOM_MINUS1_1();b=Math.max(0,b);b*=cc.CONTENT_SCALE_FACTOR();a.size=b;this._endSize==cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE?a.deltaSize=0:(c=this._endSize+this._endSizeVar*cc.RANDOM_MINUS1_1(),c=Math.max(0,c),c*=cc.CONTENT_SCALE_FACTOR(),a.deltaSize=(c-b)/a.timeToLive);
b=this._startSpin+this._startSpinVar*cc.RANDOM_MINUS1_1();c=this._endSpin+this._endSpinVar*cc.RANDOM_MINUS1_1();a.rotation=b;a.deltaRotation=(c-b)/a.timeToLive;this._positionType==cc.CCPARTICLE_TYPE_FREE?(b=this.convertToWorldSpace(cc.PointZero()),a.startPos=cc.ccpMult(b,cc.CONTENT_SCALE_FACTOR())):this._positionType==cc.CCPARTICLE_TYPE_RELATIVE&&(a.startPos=cc.ccpMult(this._position,cc.CONTENT_SCALE_FACTOR()));b=cc.DEGREES_TO_RADIANS(this._angle+this._angleVar*cc.RANDOM_MINUS1_1());if(this._emitterMode==
cc.CCPARTICLE_MODE_GRAVITY)b=cc.ccp(Math.cos(b),Math.sin(b)),c=this.modeA.speed+this.modeA.speedVar*cc.RANDOM_MINUS1_1(),c*=cc.CONTENT_SCALE_FACTOR(),a.modeA.dir=cc.ccpMult(b,c),a.modeA.radialAccel=this.modeA.radialAccel+this.modeA.radialAccelVar*cc.RANDOM_MINUS1_1(),a.modeA.radialAccel*=cc.CONTENT_SCALE_FACTOR(),a.modeA.tangentialAccel=this.modeA.tangentialAccel+this.modeA.tangentialAccelVar*cc.RANDOM_MINUS1_1(),a.modeA.tangentialAccel*=cc.CONTENT_SCALE_FACTOR();else{var c=this.modeB.startRadius+
this.modeB.startRadiusVar*cc.RANDOM_MINUS1_1(),d=this.modeB.endRadius+this.modeB.endRadiusVar*cc.RANDOM_MINUS1_1(),c=c*cc.CONTENT_SCALE_FACTOR(),d=d*cc.CONTENT_SCALE_FACTOR();a.modeB.radius=c;a.modeB.deltaRadius=this.modeB.endRadius==cc.CCPARTICLE_START_RADIUS_EQUAL_TO_END_RADIUS?0:(d-c)/a.timeToLive;a.modeB.angle=b;a.modeB.degreesPerSecond=cc.DEGREES_TO_RADIANS(this.modeB.rotatePerSecond+this.modeB.rotatePerSecondVar*cc.RANDOM_MINUS1_1())}},stopSystem:function(){this._isActive=!1;this._elapsed=this._duration;
this._emitCounter=0},resetSystem:function(){this._isActive=!0;for(this._particleIdx=this._elapsed=0;this._particleIdx<this._particleCount;++this._particleIdx)this._particles[this._particleIdx].timeToLive=0},isFull:function(){return this._particleCount>=this._totalParticles},updateQuadWithParticle:function(){},postStep:function(){},update:function(a){if(this._isActive&&this._emissionRate){var b=1/this._emissionRate;for(this._emitCounter+=a;this._particleCount<this._totalParticles&&this._emitCounter>
b;)this.addParticle(),this._emitCounter-=b;this._elapsed+=a;-1!=this._duration&&this._duration<this._elapsed&&this.stopSystem()}this._particleIdx=0;b=cc.PointZero();this._positionType==cc.CCPARTICLE_TYPE_FREE?(b=this.convertToWorldSpace(cc.PointZero()),b.x*=cc.CONTENT_SCALE_FACTOR(),b.y*=cc.CONTENT_SCALE_FACTOR()):this._positionType==cc.CCPARTICLE_TYPE_RELATIVE&&(b=cc.ccp(this._position.x,this._position.y),b.x*=cc.CONTENT_SCALE_FACTOR(),b.y*=cc.CONTENT_SCALE_FACTOR());for(;this._particleIdx<this._particleCount;){var c=
this._particles[this._particleIdx];c.timeToLive-=a;if(0<c.timeToLive){if(this._emitterMode==cc.CCPARTICLE_MODE_GRAVITY){var d,e;d=cc.PointZero();if(c.pos.x||c.pos.y)d=cc.ccpNormalize(c.pos);e=d;d=cc.ccpMult(d,c.modeA.radialAccel);var f=e.x;e.x=-e.y;e.y=f;e=cc.ccpMult(e,c.modeA.tangentialAccel);d=cc.ccpAdd(cc.ccpAdd(d,e),this.modeA.gravity);d=cc.ccpMult(d,a);c.modeA.dir=cc.ccpAdd(c.modeA.dir,d);d=cc.ccpMult(c.modeA.dir,a);c.pos=cc.ccpAdd(c.pos,d)}else c.modeB.angle+=c.modeB.degreesPerSecond*a,c.modeB.radius+=
c.modeB.deltaRadius*a,c.pos.x=-Math.cos(c.modeB.angle)*c.modeB.radius,c.pos.y=-Math.sin(c.modeB.angle)*c.modeB.radius;c.color.r+=c.deltaColor.r*a;c.color.g+=c.deltaColor.g*a;c.color.b+=c.deltaColor.b*a;c.color.a+=c.deltaColor.a*a;c.isChangeColor=!0;c.size+=c.deltaSize*a;c.size=Math.max(0,c.size);c.rotation+=c.deltaRotation*a;this._positionType==cc.CCPARTICLE_TYPE_FREE||this._positionType==cc.CCPARTICLE_TYPE_RELATIVE?(d=cc.ccpSub(b,c.startPos),d=cc.ccpSub(c.pos,d)):d=c.pos;cc.renderContextType==cc.WEBGL?
this.updateQuadWithParticle(c,d):c.drawPos=d;++this._particleIdx}else if(cc.ArrayRemoveObject(this._particles,c),--this._particleCount,0==this._particleCount&&this._isAutoRemoveOnFinish){this.unscheduleUpdate();this._parent.removeChild(this,!0);return}}cc.USES_VBO&&this.postStep()},_valueForKey:function(a,b){if(b){var c=b[a];return c?c:""}return""}});cc.ParticleSystem.create=function(a){var b=new cc.ParticleSystem;return b&&b.initWithFile(a)?b:null};
cc.ParticleSystem.ModeA=function(a,b,c,d,e,f,h){this.gravity=a?a:cc.PointZero();this.speed=b||0;this.speedVar=c||0;this.tangentialAccel=d||0;this.tangentialAccelVar=e||0;this.radialAccel=f||0;this.radialAccelVar=h||0};cc.ParticleSystem.ModeB=function(a,b,c,d,e,f){this.startRadius=a||0;this.startRadiusVar=b||0;this.endRadius=c||0;this.endRadiusVar=d||0;this.rotatePerSecond=e||0;this.rotatePerSecondVar=f||0};cc.ParticleSystemQuad=cc.ParticleSystem.extend({_quads:null,_indices:null,_quadsID:0,ctor:function(){this._super()},initIndices:function(){for(var a=0;a<this._totalParticles;++a){var b=6*a,c=4*a;this._indices[b+0]=c+0;this._indices[b+1]=c+1;this._indices[b+2]=c+2;this._indices[b+5]=c+1;this._indices[b+4]=c+2;this._indices[b+3]=c+3}},initTexCoordsWithRect:function(a){var b=cc.RectMake(a.origin.x*cc.CONTENT_SCALE_FACTOR(),a.origin.y*cc.CONTENT_SCALE_FACTOR(),a.size.width*cc.CONTENT_SCALE_FACTOR(),a.size.height*
cc.CONTENT_SCALE_FACTOR()),c=a.size.width,d=a.size.height;this._texture&&(this._texture instanceof HTMLImageElement||this._texture instanceof HTMLCanvasElement?(c=this._texture.width,d=this._texture.height):(c=this._texture.getPixelsWide(),d=this._texture.getPixelsHigh()));var e;cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(a=(2*b.origin.x+1)/(2*c),e=(2*b.origin.y+1)/(2*d),c=a+(2*b.size.width-2)/(2*c),b=e+(2*b.size.height-2)/(2*d)):(a=b.origin.x/c,e=b.origin.y/d,c=a+b.size.width/c,b=e+b.size.height/d);d=b;
b=e;e=d;this._quads=[];for(d=0;d<this._totalParticles;d++)this._quads[d]=cc.V3F_C4B_T2F_QuadZero();for(d=0;d<this._totalParticles;d++)this._quads[d].bl.texCoords.u=a,this._quads[d].bl.texCoords.v=e,this._quads[d].br.texCoords.u=c,this._quads[d].br.texCoords.v=e,this._quads[d].tl.texCoords.u=a,this._quads[d].tl.texCoords.v=b,this._quads[d].tr.texCoords.u=c,this._quads[d].tr.texCoords.v=b},setDisplayFrame:function(a){cc.Assert(cc.Point.CCPointEqualToPoint(a.getOffsetInPixels(),cc.PointZero()),"QuadParticle only supports SpriteFrames with no offsets");
(!this._texture||a.getTexture().getName()!=this._texture.getName())&&this.setTexture(a.getTexture())},setTextureWithRect:function(a,b){(!this._texture||a.getName()!=this._texture.getName())&&this.setTexture(a,!0);this.initTexCoordsWithRect(b)},initWithTotalParticles:function(a){if(this._super(a)){this._quads=[];for(a=0;a<this._totalParticles;a++)this._quads[a]=cc.V3F_C4B_T2F_QuadZero();this._indices=[];for(a=0;a<6*this._totalParticles;a++)this._indices[a]=0;if(!this._quads||!this._indices)return cc.Log("cocos2d: Particle system: not enough memory"),
this._quads&&(this._quads=null),this._indices&&(this._indices=null),null;this._texture?this.initTexCoordsWithRect(cc.RectMake(0,0,this._texture.getPixelsWide(),this._texture.getPixelsHigh())):this.initTexCoordsWithRect(cc.RectMake(0,0,1,1));this.initIndices();return!0}return!1},setTexture:function(a,b){if(b&&!0==b)this._super(a);else{var c=null,c=a instanceof HTMLImageElement||a instanceof HTMLCanvasElement?cc.SizeMake(a.width,a.height):a.getContentSize();this.setTextureWithRect(a,cc.RectMake(0,0,
c.width,c.height))}},updateQuadWithParticle:function(a,b){var c=this._quads[this._particleIdx],d=new cc.Color4B(255*a.color.r,255*a.color.g,255*a.color.b,255*a.color.a);c.bl.colors=d;c.br.colors=d;c.tl.colors=d;c.tr.colors=d;d=a.size/2;if(a.rotation){var e=-d,f=-d,h=b.x,g=b.y,i=-cc.DEGREES_TO_RADIANS(a.rotation),j=Math.cos(i),i=Math.sin(i);c.bl.vertices.x=e*j-f*i+h;c.bl.vertices.y=e*i+f*j+g;c.br.vertices.x=d*j-f*i+h;c.br.vertices.y=d*i+f*j+g;c.tl.vertices.x=e*j-d*i+h;c.tl.vertices.y=e*i+d*j+g;c.tr.vertices.x=
d*j-d*i+h;c.tr.vertices.y=d*i+d*j+g}else c.bl.vertices.x=b.x-d,c.bl.vertices.y=b.y-d,c.br.vertices.x=b.x+d,c.br.vertices.y=b.y-d,c.tl.vertices.x=b.x-d,c.tl.vertices.y=b.y+d,c.tr.vertices.x=b.x+d,c.tr.vertices.y=b.y+d},postStep:function(){cc.renderContextType!=cc.CANVAS&&cc.USES_VBO&&(glBindBuffer(GL_ARRAY_BUFFER,quadsID),glBufferSubData(GL_ARRAY_BUFFER,0,sizeof(quads[0])*particleCount,quads),glBindBuffer(GL_ARRAY_BUFFER,0))},draw:function(a){this._super();if(cc.renderContextType==cc.CANVAS){a=a||
cc.renderContext;a.save();a.globalCompositeOperation=this._isBlendAdditive?"lighter":"source-over";for(var b=0;b<this._particleCount;b++){var c=this._particles[b],d=0|0.5*c.size;if(this._drawMode==cc.PARTICLE_TEXTURE_MODE){var e=this.getTexture();if(c.isChangeColor){var f=cc.TextureCache.sharedTextureCache().getTextureColors(this.getTexture());f&&(e=cc.generateTintImage(this.getTexture(),f,c.color))}a.save();a.globalAlpha=c.color.a;a.translate(0|c.drawPos.x,-(0|c.drawPos.y));a.drawImage(e,d,-(d+c.size),
c.size,c.size)}else a.save(),a.globalAlpha=c.color.a,a.translate(0|c.drawPos.x,-(0|c.drawPos.y)),this._shapeType==cc.PARTICLE_STAR_SHAPE?cc.drawingUtil.drawStar(a,new cc.Point(0,0),d,c.color):cc.drawingUtil.drawColorBall(a,new cc.Point(0,0),d,c.color);a.restore()}a.restore()}else glBindTexture(GL_TEXTURE_2D,this._texture.getName()),a=sizeof(this._quads[0].bl),cc.USES_VBO?(glBindBuffer(GL_ARRAY_BUFFER,this._quadsID),cc.ENABLE_CACHE_TEXTTURE_DATA&&glBufferData(GL_ARRAY_BUFFER,sizeof(this._quads[0])*
this._totalParticles,this._quads,GL_DYNAMIC_DRAW),glVertexPointer(2,GL_FLOAT,a,0),glColorPointer(4,GL_UNSIGNED_BYTE,a,offsetof(ccV2F_C4B_T2F,colors)),glTexCoordPointer(2,GL_FLOAT,a,offsetof(ccV2F_C4B_T2F,texCoords))):(b=this._quads,c=offsetof(cc.V2F_C4B_T2F,vertices),glVertexPointer(2,GL_FLOAT,a,b+c),c=offsetof(cc.V2F_C4B_T2F,colors),glColorPointer(4,GL_UNSIGNED_BYTE,a,b+c),c=offsetof(cc.V2F_C4B_T2F,texCoords),glTexCoordPointer(2,GL_FLOAT,a,b+c)),(a=!!(this._blendFunc.src!=cc.BLEND_SRC||this._blendFunc.dst!=
cc.BLEND_DST))&&glBlendFunc(this._blendFunc.src,this._blendFunc.dst),cc.Assert(this._particleIdx==this._particleCount,"Abnormal error in particle quad"),glDrawElements(GL_TRIANGLES,6*this._particleIdx,GL_UNSIGNED_SHORT,this._indices),a&&glBlendFunc(cc.BLEND_SRC,cc.BLEND_DST),cc.USES_VBO&&glBindBuffer(GL_ARRAY_BUFFER,0)}});cc.ParticleSystemQuad.create=function(a){var b=new cc.ParticleSystemQuad;return b&&b.initWithFile(a)?b:null};cc.ARCH_OPTIMAL_PARTICLE_SYSTEM=cc.ParticleSystemQuad;cc=cc=cc||{};cc.MAX_PARTICLE_SIZE=64;
cc.ParticleSystemPoint=cc.ParticleSystem.extend({_vertices:null,_verticesID:0,initWithTotalParticles:function(a){if(this._super(a)){this._vertices=[];for(a=0;a<this._totalParticles;a++)this._vertices[a]=new cc.PointSprite(new cc.Vertex2F(0,0),new cc.Color4B(0,0,0,255),0);if(!this._vertices)return cc.Log("cocos2d: Particle system: not enough memory"),!1;cc.USES_VBO&&(glGenBuffers(1,this._verticesID),glBindBuffer(GL_ARRAY_BUFFER,this._verticesID),glBufferData(GL_ARRAY_BUFFER,sizeof(cc.PointSprite)*
this._totalParticles,this._vertices,GL_DYNAMIC_DRAW),glBindBuffer(GL_ARRAY_BUFFER,0));return!0}return!1},updateQuadWithParticle:function(a,b){this._vertices[this._particleIdx].pos=new cc.Vertex2(b.x,b.y);this._vertices[this._particleIdx].size=a.size;this._vertices[this._particleIdx].color=new cc.Color4B(255*a.color.r,255*a.color.g,255*a.color.b,255*a.color.a)},postStep:function(){cc.USES_VBO&&(glBindBuffer(GL_ARRAY_BUFFER,this._verticesID),glBufferSubData(GL_ARRAY_BUFFER,0,sizeof(cc.PointSprite)*
this._particleCount,this._vertices),glBindBuffer(GL_ARRAY_BUFFER,0))},draw:function(){this._super();if(0!=this._particleIdx){glDisableClientState(GL_TEXTURE_COORD_ARRAY);glBindTexture(GL_TEXTURE_2D,this._texture.getName());glEnable(GL_POINT_SPRITE_OES);glTexEnvi(GL_POINT_SPRITE_OES,GL_COORD_REPLACE_OES,GL_TRUE);var a=sizeof(this._vertices[0]);if(cc.USES_VBO)glBindBuffer(GL_ARRAY_BUFFER,verticesID),cc.ENABLE_CACHE_TEXTTURE_DATA&&glBufferData(GL_ARRAY_BUFFER,sizeof(cc.PointSprite)*this._totalParticles,
this._vertices,GL_DYNAMIC_DRAW),glVertexPointer(2,GL_FLOAT,a,0),glColorPointer(4,GL_UNSIGNED_BYTE,a,offsetof(cc.PointSprite,color)),glEnableClientState(GL_POINT_SIZE_ARRAY_OES),glPointSizePointerOES(GL_FLOAT,a,offsetof(cc.PointSprite,size));else{var b=this._vertices.length;glVertexPointer(2,GL_FLOAT,a,b);var c=offsetof(cc.PointSprite,color);glColorPointer(4,GL_UNSIGNED_BYTE,a,b+c);glEnableClientState(GL_POINT_SIZE_ARRAY_OES);c=offsetof(cc.PointSprite,size);glPointSizePointerOES(GL_FLOAT,a,b+c)}(a=
this._blendFunc.src!=cc.BLEND_SRC||this._blendFunc.dst!=cc.BLEND_DST?!0:!1)&&glBlendFunc(this._blendFunc.src,this._blendFunc.dst);glDrawArrays(GL_POINTS,0,this._particleIdx);a&&glBlendFunc(cc.BLEND_SRC,cc.BLEND_DST);cc.USES_VBO&&glBindBuffer(GL_ARRAY_BUFFER,0);glDisableClientState(GL_POINT_SIZE_ARRAY_OES);glDisable(GL_POINT_SPRITE_OES);glEnableClientState(GL_TEXTURE_COORD_ARRAY)}},setStartSpin:function(a){cc.Assert(0==a,"PointParticleSystem doesn't support spinning");this._super(a)},setStartSpinVar:function(a){cc.Assert(0==
a,"PointParticleSystem doesn't support spinning");this._super(a)},setEndSpin:function(a){cc.Assert(0==a,"PointParticleSystem doesn't support spinning");this._super(a)},setEndSpinVar:function(a){cc.Assert(0==a,"PointParticleSystem doesn't support spinning");this._super(a)},setStartSize:function(a){cc.Assert(0<=a&&a<=cc.MAX_PARTICLE_SIZE,"PointParticleSystem only supports 0 <= size <= 64");this._super(a)},setEndSize:function(a){cc.Assert(a==cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE||0<=a&&a<=cc.MAX_PARTICLE_SIZE,
"PointParticleSystem only supports 0 <= size <= 64");this._super(a)}});cc.ParticleSystemPoint.create=function(a){var b=new cc.ParticleSystemPoint;return b&&b.initWithFile(a)?b:null};cc.ParticleFire=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(150)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,0),this.modeA.radialAccel=0,this.modeA.radialAccelVar=0,this.modeA.speed=60,this.modeA.speedVar=20,this._angle=90,this._angleVar=10,a=cc.Director.sharedDirector().getWinSize(),this.setPosition(cc.ccp(a.width/2,
60)),this._posVar=cc.ccp(40,20),this._life=3,this._lifeVar=0.25,this._startSize=54,this._startSizeVar=10,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=this._totalParticles/this._life,this._startColor.r=0.76,this._startColor.g=0.25,this._startColor.b=0.12,this._startColor.a=1,this._startColorVar.r=0,this._startColorVar.g=0,this._startColorVar.b=0,this._startColorVar.a=0,this._endColor.r=0,this._endColor.g=0,this._endColor.b=0,this._endColor.a=1,this._endColorVar.r=0,this._endColorVar.g=
0,this._endColorVar.b=0,this._endColorVar.a=0,this.setIsBlendAdditive(!0),!0):!1}});cc.ParticleFire.create=function(){var a=new cc.ParticleFire;return a.init()?a:null};
cc.ParticleFireworks=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(150)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,-90),this.modeA.radialAccel=0,this.modeA.radialAccelVar=0,this.modeA.speed=180,this.modeA.speedVar=50,a=cc.Director.sharedDirector().getWinSize(),this.setPosition(cc.ccp(a.width/2,a.height/2)),this._angle=
90,this._angleVar=20,this._life=3.5,this._lifeVar=1,this._emissionRate=this._totalParticles/this._life,this._startColor.r=0.5,this._startColor.g=0.5,this._startColor.b=0.5,this._startColor.a=1,this._startColorVar.r=0.5,this._startColorVar.g=0.5,this._startColorVar.b=0.5,this._startColorVar.a=0.1,this._endColor.r=0.1,this._endColor.g=0.1,this._endColor.b=0.1,this._endColor.a=0.2,this._endColorVar.r=0.1,this._endColorVar.g=0.1,this._endColorVar.b=0.1,this._endColorVar.a=0.2,this._startSize=8,this._startSizeVar=
2,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this.setIsBlendAdditive(!1),!0):!1}});cc.ParticleFireworks.create=function(){var a=new cc.ParticleFireworks;return a.init()?a:null};
cc.ParticleSun=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(150)},initWithTotalParticles:function(a){return this._super(a)?(this.setIsBlendAdditive(!0),this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,0),this.modeA.radialAccel=0,this.modeA.radialAccelVar=0,this.modeA.speed=20,this.modeA.speedVar=5,this._angle=90,this._angleVar=360,a=cc.Director.sharedDirector().getWinSize(),this.setPosition(cc.ccp(a.width/
2,a.height/2)),this._posVar=cc.PointZero(),this._life=1,this._lifeVar=0.5,this._startSize=30,this._startSizeVar=10,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=this._totalParticles/this._life,this._startColor.r=0.76,this._startColor.g=0.25,this._startColor.b=0.12,this._startColor.a=1,this._startColorVar.r=0,this._startColorVar.g=0,this._startColorVar.b=0,this._startColorVar.a=0,this._endColor.r=0,this._endColor.g=0,this._endColor.b=0,this._endColor.a=1,this._endColorVar.r=
0,this._endColorVar.g=0,this._endColorVar.b=0,this._endColorVar.a=0,!0):!1}});cc.ParticleSun.create=function(){var a=new cc.ParticleSun;return a.init()?a:null};
cc.ParticleGalaxy=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(100)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,0),this.modeA.speed=60,this.modeA.speedVar=10,this.modeA.radialAccel=-80,this.modeA.radialAccelVar=0,this.modeA.tangentialAccel=80,this.modeA.tangentialAccelVar=0,this._angle=90,this._angleVar=360,a=cc.Director.sharedDirector().getWinSize(),
this.setPosition(cc.ccp(a.width/2,a.height/2)),this._posVar=cc.PointZero(),this._life=4,this._lifeVar=1,this._startSize=37,this._startSizeVar=10,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=this._totalParticles/this._life,this._startColor.r=0.12,this._startColor.g=0.25,this._startColor.b=0.76,this._startColor.a=1,this._startColorVar.r=0,this._startColorVar.g=0,this._startColorVar.b=0,this._startColorVar.a=0,this._endColor.r=0,this._endColor.g=0,this._endColor.b=0,this._endColor.a=
1,this._endColorVar.r=0,this._endColorVar.g=0,this._endColorVar.b=0,this._endColorVar.a=0,this.setIsBlendAdditive(!0),!0):!1}});cc.ParticleGalaxy.create=function(){var a=new cc.ParticleGalaxy;return a.init()?a:null};
cc.ParticleFlower=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(100)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,0),this.modeA.speed=80,this.modeA.speedVar=10,this.modeA.radialAccel=-60,this.modeA.radialAccelVar=0,this.modeA.tangentialAccel=15,this.modeA.tangentialAccelVar=0,this._angle=90,this._angleVar=360,a=cc.Director.sharedDirector().getWinSize(),
this.setPosition(cc.ccp(a.width/2,a.height/2)),this._posVar=cc.PointZero(),this._life=4,this._lifeVar=1,this._startSize=30,this._startSizeVar=10,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=this._totalParticles/this._life,this._startColor.r=0.5,this._startColor.g=0.5,this._startColor.b=0.5,this._startColor.a=1,this._startColorVar.r=0.5,this._startColorVar.g=0.5,this._startColorVar.b=0.5,this._startColorVar.a=0.5,this._endColor.r=0,this._endColor.g=0,this._endColor.b=
0,this._endColor.a=1,this._endColorVar.r=0,this._endColorVar.g=0,this._endColorVar.b=0,this._endColorVar.a=0,this.setIsBlendAdditive(!0),!0):!1}});cc.ParticleFlower.create=function(){var a=new cc.ParticleFlower;return a.init()?a:null};
cc.ParticleMeteor=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(100)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(-200,200),this.modeA.speed=15,this.modeA.speedVar=5,this.modeA.radialAccel=0,this.modeA.radialAccelVar=0,this.modeA.tangentialAccel=0,this.modeA.tangentialAccelVar=0,this._angle=90,this._angleVar=360,a=cc.Director.sharedDirector().getWinSize(),
this.setPosition(cc.ccp(a.width/2,a.height/2)),this._posVar=cc.PointZero(),this._life=2,this._lifeVar=1,this._startSize=60,this._startSizeVar=10,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=this._totalParticles/this._life,this._startColor.r=0.2,this._startColor.g=0.4,this._startColor.b=0.7,this._startColor.a=1,this._startColorVar.r=0,this._startColorVar.g=0,this._startColorVar.b=0.2,this._startColorVar.a=0.1,this._endColor.r=0,this._endColor.g=0,this._endColor.b=0,this._endColor.a=
1,this._endColorVar.r=0,this._endColorVar.g=0,this._endColorVar.b=0,this._endColorVar.a=0,this.setIsBlendAdditive(!0),!0):!1}});cc.ParticleMeteor.create=function(){var a=new cc.ParticleMeteor;return a.init()?a:null};
cc.ParticleSpiral=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(100)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,0),this.modeA.speed=150,this.modeA.speedVar=0,this.modeA.radialAccel=-380,this.modeA.radialAccelVar=0,this.modeA.tangentialAccel=45,this.modeA.tangentialAccelVar=0,this._angle=90,this._angleVar=0,a=cc.Director.sharedDirector().getWinSize(),
this.setPosition(cc.ccp(a.width/2,a.height/2)),this._posVar=cc.PointZero(),this._life=12,this._lifeVar=0,this._startSize=20,this._startSizeVar=0,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=this._totalParticles/this._life,this._startColor.r=0.5,this._startColor.g=0.5,this._startColor.b=0.5,this._startColor.a=1,this._startColorVar.r=0.5,this._startColorVar.g=0.5,this._startColorVar.b=0.5,this._startColorVar.a=0,this._endColor.r=0.5,this._endColor.g=0.5,this._endColor.b=
0.5,this._endColor.a=1,this._endColorVar.r=0.5,this._endColorVar.g=0.5,this._endColorVar.b=0.5,this._endColorVar.a=0,this.setIsBlendAdditive(!1),!0):!1}});cc.ParticleSpiral.create=function(){var a=new cc.ParticleSpiral;return a.init()?a:null};
cc.ParticleExplosion=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(300)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=0.1,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,0),this.modeA.speed=70,this.modeA.speedVar=40,this.modeA.radialAccel=0,this.modeA.radialAccelVar=0,this.modeA.tangentialAccel=0,this.modeA.tangentialAccelVar=0,this._angle=90,this._angleVar=360,a=cc.Director.sharedDirector().getWinSize(),
this.setPosition(cc.ccp(a.width/2,a.height/2)),this._posVar=cc.PointZero(),this._life=5,this._lifeVar=2,this._startSize=15,this._startSizeVar=10,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=this._totalParticles/this._duration,this._startColor.r=0.7,this._startColor.g=0.1,this._startColor.b=0.2,this._startColor.a=1,this._startColorVar.r=0.5,this._startColorVar.g=0.5,this._startColorVar.b=0.5,this._startColorVar.a=0,this._endColor.r=0.5,this._endColor.g=0.5,this._endColor.b=
0.5,this._endColor.a=0,this._endColorVar.r=0.5,this._endColorVar.g=0.5,this._endColorVar.b=0.5,this._endColorVar.a=0,this.setIsBlendAdditive(!1),!0):!1}});cc.ParticleExplosion.create=function(){var a=new cc.ParticleExplosion;return a.init()?a:null};
cc.ParticleSmoke=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(100)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,0),this.modeA.radialAccel=0,this.modeA.radialAccelVar=0,this.modeA.speed=25,this.modeA.speedVar=10,this._angle=90,this._angleVar=5,a=cc.Director.sharedDirector().getWinSize(),this.setPosition(cc.ccp(a.width/2,
0)),this._posVar=cc.ccp(20,0),this._life=4,this._lifeVar=1,this._startSize=60,this._startSizeVar=10,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=this._totalParticles/this._life,this._startColor.r=0.8,this._startColor.g=0.8,this._startColor.b=0.8,this._startColor.a=1,this._startColorVar.r=0.02,this._startColorVar.g=0.02,this._startColorVar.b=0.02,this._startColorVar.a=0,this._endColor.r=0,this._endColor.g=0,this._endColor.b=0,this._endColor.a=1,this._endColorVar.r=0,
this._endColorVar.g=0,this._endColorVar.b=0,this._endColorVar.a=0,this.setIsBlendAdditive(!1),!0):!1}});cc.ParticleSmoke.create=function(){var a=new cc.ParticleSmoke;return a.init()?a:null};
cc.ParticleSnow=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(250)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(0,-1),this.modeA.speed=5,this.modeA.speedVar=1,this.modeA.radialAccel=0,this.modeA.radialAccelVar=1,this.modeA.tangentialAccel=0,this.modeA.tangentialAccelVar=1,a=cc.Director.sharedDirector().getWinSize(),this.setPosition(cc.ccp(a.width/
2,a.height+10)),this._posVar=cc.ccp(a.width/2,0),this._angle=-90,this._angleVar=5,this._life=45,this._lifeVar=15,this._startSize=10,this._startSizeVar=5,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=10,this._startColor.r=1,this._startColor.g=1,this._startColor.b=1,this._startColor.a=1,this._startColorVar.r=0,this._startColorVar.g=0,this._startColorVar.b=0,this._startColorVar.a=0,this._endColor.r=1,this._endColor.g=1,this._endColor.b=1,this._endColor.a=0,this._endColorVar.r=
0,this._endColorVar.g=0,this._endColorVar.b=0,this._endColorVar.a=0,this.setIsBlendAdditive(!1),!0):!1}});cc.ParticleSnow.create=function(){var a=new cc.ParticleSnow;return a.init()?a:null};
cc.ParticleRain=cc.ARCH_OPTIMAL_PARTICLE_SYSTEM.extend({init:function(){return this.initWithTotalParticles(300)},initWithTotalParticles:function(a){return this._super(a)?(this._duration=cc.CCPARTICLE_DURATION_INFINITY,this._emitterMode=cc.CCPARTICLE_MODE_GRAVITY,this.modeA.gravity=cc.ccp(10,-10),this.modeA.radialAccel=0,this.modeA.radialAccelVar=1,this.modeA.tangentialAccel=0,this.modeA.tangentialAccelVar=1,this.modeA.speed=130,this.modeA.speedVar=30,this._angle=-90,this._angleVar=5,a=cc.Director.sharedDirector().getWinSize(),
this.setPosition(cc.ccp(a.width/2,a.height)),this._posVar=cc.ccp(a.width/2,0),this._life=4.5,this._lifeVar=0,this._startSize=4,this._startSizeVar=2,this._endSize=cc.CCPARTICLE_START_SIZE_EQUAL_TO_END_SIZE,this._emissionRate=20,this._startColor.r=0.7,this._startColor.g=0.8,this._startColor.b=1,this._startColor.a=1,this._startColorVar.r=0,this._startColorVar.g=0,this._startColorVar.b=0,this._startColorVar.a=0,this._endColor.r=0.7,this._endColor.g=0.8,this._endColor.b=1,this._endColor.a=0.5,this._endColorVar.r=
0,this._endColorVar.g=0,this._endColorVar.b=0,this._endColorVar.a=0,this.setIsBlendAdditive(!1),!0):!1}});cc.ParticleRain.create=function(){var a=new cc.ParticleRain;return a.init()?a:null};cc.Touch=cc.Class.extend({_viewId:0,_point:null,_prevPoint:cc.PointZero(),_id:0,ctor:function(a,b,c){this._viewId=a;this._point=new cc.Point(b||0,c||0)},locationInView:function(){return this._point},previousLocationInView:function(){return this._prevPoint},view:function(){return this._viewId},id:function(){return this._id},setTouchInfo:function(a,b,c,d){this._viewId=a;this._prevPoint=this._point;this._point=new cc.Point(b||0,c||0);this._id=d||0},_setPrevPoint:function(a,b){this._prevPoint=new cc.Point(a||
0,b||0)}});cc.TouchDelegate=cc.Class.extend({_eventTypeFuncMap:null,ccTouchBegan:function(){return!1},ccTouchMoved:function(){},ccTouchEnded:function(){},ccTouchCancelled:function(){},ccTouchesBegan:function(){},ccTouchesMoved:function(){},ccTouchesEnded:function(){},ccTouchesCancelled:function(){},touchDelegateRetain:function(){},touchDelegateRelease:function(){}});
cc.TargetedTouchDelegate=cc.TouchDelegate.extend({ccTouchBegan:function(){return!1},ccTouchMoved:function(){},ccTouchEnded:function(){},ccTouchCancelled:function(){}});cc.StandardTouchDelegate=cc.TouchDelegate.extend({ccTouchesBegan:function(){},ccTouchesMoved:function(){},ccTouchesEnded:function(){},ccTouchesCancelled:function(){}});cc.TouchHandler=cc.Class.extend({_delegate:null,_priority:0,_enabledSelectors:0,getDelegate:function(){return this._delegate},setDelegate:function(a){this._delegate=a},getPriority:function(){return this._priority},setPriority:function(a){this._priority=a},getEnabledSelectors:function(){return this._enabledSelectors},setEnalbedSelectors:function(a){this._enabledSelectors=a},initWithDelegate:function(a,b){cc.Assert(null!=a,"TouchHandler.initWithDelegate():touch delegate should not be null");this._delegate=
a;this._priority=b;this._enabledSelectors=0;return!0}});cc.TouchHandler.handlerWithDelegate=function(a,b){var c=new cc.TouchHandler;c&&c.initWithDelegate(a,b);return c};cc.StandardTouchHandler=cc.TouchHandler.extend({initWithDelegate:function(a,b){return this._super(a,b)?!0:!1}});cc.StandardTouchHandler.handlerWithDelegate=function(a,b){var c=new cc.StandardTouchHandler;c&&c.initWithDelegate(a,b);return c};
cc.TargetedTouchHandler=cc.TouchHandler.extend({_swallowsTouches:!1,_claimedTouches:null,isSwallowsTouches:function(){return this._swallowsTouches},setSwallowsTouches:function(a){this._swallowsTouches=a},getClaimedTouches:function(){return this._claimedTouches},initWithDelegate:function(a,b,c){return this._super(a,b)?(this._claimedTouches=[],this._swallowsTouches=c,!0):!1}});
cc.TargetedTouchHandler.handlerWithDelegate=function(a,b,c){var d=new cc.TargetedTouchHandler;d&&d.initWithDelegate(a,b,c);return d};cc.TouchSelectorBeganBit=1;cc.TouchSelectorMovedBit=2;cc.TouchSelectorEndedBit=4;cc.TouchSelectorCancelledBit=8;cc.TouchSelectorAllBits=cc.TouchSelectorBeganBit|cc.TouchSelectorMovedBit|cc.TouchSelectorEndedBit|cc.TouchSelectorCancelledBit;cc.TOUCH_BEGAN=0;cc.TOUCH_MOVED=1;cc.TOUCH_ENDED=2;cc.TOUCH_CANCELLED=3;cc.TouchMax=4;cc.less=function(a,b){return a.getPriority()>b.getPriority()};cc.TouchHandlerHelperData=function(a){this.type=a};
cc.TouchDispatcher=cc.Class.extend({_targetedHandlers:null,_standardHandlers:null,_locked:!1,_toAdd:!1,_toRemove:!1,_handlersToAdd:null,_handlersToRemove:null,_toQuit:!1,_dispatchEvents:!1,_handlerHelperData:[new cc.TouchHandlerHelperData(cc.TOUCH_BEGAN),new cc.TouchHandlerHelperData(cc.TOUCH_MOVED),new cc.TouchHandlerHelperData(cc.TOUCH_ENDED),new cc.TouchHandlerHelperData(cc.TOUCH_CANCELLED)],init:function(){this._dispatchEvents=!0;this._targetedHandlers=[];this._standardHandlers=[];this._handlersToAdd=
[];this._handlersToRemove=[];this._locked=this._toQuit=this._toAdd=this._toRemove=!1;return!0},isDispatchEvents:function(){return this._dispatchEvents},setDispatchEvents:function(a){this._dispatchEvents=a},addStandardDelegate:function(a,b){var c=cc.StandardTouchHandler.handlerWithDelegate(a,b);this._locked?-1!=this._handlersToRemove.indexOf(a)?cc.ArrayRemoveObject(this._handlersToRemove,a):(this._handlersToAdd.push(c),this._toAdd=!0):this._standardHandlers=this.forceAddHandler(c,this._standardHandlers)},
addTargetedDelegate:function(a,b,c){b=cc.TargetedTouchHandler.handlerWithDelegate(a,b,c);this._locked?-1!=this._handlersToRemove.indexOf(a)?cc.ArrayRemoveObject(this._handlersToRemove,a):(this._handlersToAdd.push(b),this._toAdd=!0):this._targetedHandlers=this.forceAddHandler(b,this._targetedHandlers)},forceAddHandler:function(a,b){for(var c=0,d=0;d<b.length;d++){var e=b[d];if(e&&(e.getPriority()<a.getPriority()&&++c,e.getDelegate()==a.getDelegate()))return cc.Assert(0,"TouchDispatcher.forceAddHandler()"),
b}return cc.ArrayAppendObjectToIndex(b,a,c)},forceRemoveAllDelegates:function(){this._standardHandlers.length=0;this._targetedHandlers.length=0},removeDelegate:function(a){if(null!=a)if(this._locked){var b=this.findHandler(this._handlersToAdd,a);b?cc.ArrayRemoveObject(this._handlersToAdd,b):(this._handlersToRemove.push(a),this._toRemove=!0)}else this.forceRemoveDelegate(a)},removeAllDelegates:function(){this._locked?this._toQuit=!0:this.forceRemoveAllDelegates()},setPriority:function(a,b){cc.Assert(null!=
b,"TouchDispatcher.setPriority():Arguments is null");var c=this.findHandler(b);cc.Assert(null!=c,"TouchDispatcher.setPriority():Cant find TouchHandler");c.setPriority(a);this.rearrangeHandlers(this._targetedHandlers);this.rearrangeHandlers(this._standardHandlers)},touches:function(a,b,c){cc.Assert(0<=c&&4>c,"TouchDispatcher.touches()");this._locked=!0;var d=this._targetedHandlers.length,e=this._standardHandlers.length,f=d&&e,h=f?a.slice():a,g=this._handlerHelperData[c];if(0<d)for(var i=0;i<a.length;i++)for(var d=
a[i],j,l=0;l<this._targetedHandlers.length;l++){j=this._targetedHandlers[l];if(!j)break;var k=!1;if(c==cc.TOUCH_BEGAN)(k=j.getDelegate().ccTouchBegan(d,b))&&j.getClaimedTouches().push(d);else if(0<j.getClaimedTouches().length)switch(k=!0,g.type){case cc.TOUCH_MOVED:j.getDelegate().ccTouchMoved(d,b);break;case cc.TOUCH_ENDED:j.getDelegate().ccTouchEnded(d,b);j.getClaimedTouches().length=0;break;case cc.TOUCH_CANCELLED:j.getDelegate().ccTouchCancelled(d,b),j.getClaimedTouches().length=0}if(k&&j.isSwallowsTouches()){f&&
cc.ArrayRemoveObject(h,d);break}}if(0<e)for(i=0;i<this._standardHandlers.length;i++){j=this._standardHandlers[i];if(!j)break;switch(g.type){case cc.TOUCH_BEGAN:0<h.length&&j.getDelegate().ccTouchesBegan(h,b);break;case cc.TOUCH_MOVED:0<h.length&&j.getDelegate().ccTouchesMoved(h,b);break;case cc.TOUCH_ENDED:j.getDelegate().ccTouchesEnded(h,b);break;case cc.TOUCH_CANCELLED:j.getDelegate().ccTouchesCancelled(h,b)}}this._locked=!1;if(this._toRemove){this._toRemove=!1;for(i=0;i<this._handlersToRemove.length;i++)this.forceRemoveDelegate(this._handlersToRemove[i]);
this._handlersToRemove.length=0}if(this._toAdd){this._toAdd=!1;for(i=0;i<this._handlersToAdd.length;i++){j=this._handlersToAdd[i];if(!j)break;j instanceof cc.TargetedTouchHandler?this._targetedHandlers=this.forceAddHandler(j,this._targetedHandlers):this._standardHandlers=this.forceAddHandler(j,this._standardHandlers)}this._handlersToAdd.length=0}this._toQuit&&(this._toQuit=!1,this.forceRemoveAllDelegates())},touchesBegan:function(a,b){this._dispatchEvents&&this.touches(a,b,cc.TOUCH_BEGAN)},touchesMoved:function(a,
b){this._dispatchEvents&&this.touches(a,b,cc.TOUCH_MOVED)},touchesEnded:function(a,b){this._dispatchEvents&&this.touches(a,b,cc.TOUCH_ENDED)},touchesCancelled:function(a,b){this._dispatchEvents&&this.touches(a,b,cc.TOUCH_CANCELLED)},findHandler:function(a,b){switch(arguments.length){case 1:for(var b=arguments[0],c=0;c<this._targetedHandlers.length;c++)if(this._targetedHandlers[c].getDelegate()==b)return this._targetedHandlers[c];for(c=0;c<this._standardHandlers.length;c++)if(this._standardHandlers[c].getDelegate()==
b)return this._standardHandlers[c];return null;case 2:cc.Assert(null!=a&&null!=b,"TouchDispatcher.findHandler():Arguments is null");for(c=0;c<a.length;c++)if(a[c].getDelegate()==b)return a[c];return null;default:throw"Argument must be non-nil ";}},forceRemoveDelegate:function(a){for(var b,c=0;c<this._standardHandlers.length;c++)if((b=this._standardHandlers[c])&&b.getDelegate()==a){cc.ArrayRemoveObject(this._standardHandlers,b);break}for(c=0;c<this._targetedHandlers.length;c++)if((b=this._targetedHandlers[c])&&
b.getDelegate()==a){cc.ArrayRemoveObject(this._targetedHandlers,b);break}},rearrangeHandlers:function(a){a.sort(cc.less)}});cc.TouchDispatcher.preTouchPoint=new cc.Point(0,0);
cc.TouchDispatcher.registerHtmlElementEvent=function(a){a.addEventListener("mousedown",function(b){for(var c=a,d=null,d=a instanceof HTMLCanvasElement?{left:0,top:0,height:c.height}:{left:0,top:0,height:parseInt(c.style.height)};null!=c;)d.left+=c.offsetLeft,d.top+=c.offsetTop,c=c.offsetParent;c=b.pageY;b=(b.pageX-d.left)/cc.Director.sharedDirector().getContentScaleFactor();c=(d.height-(c-d.top))/cc.Director.sharedDirector().getContentScaleFactor();d=new cc.Touch(0,b,c);d._setPrevPoint(cc.TouchDispatcher.preTouchPoint.x,
cc.TouchDispatcher.preTouchPoint.y);cc.TouchDispatcher.preTouchPoint.x=b;cc.TouchDispatcher.preTouchPoint.y=c;b=[];b.push(d);cc.TouchDispatcher.sharedDispatcher().touchesBegan(b,null)});a.addEventListener("mouseup",function(b){for(var c=a,d=null,d=a instanceof HTMLCanvasElement?{left:0,top:0,height:c.height}:{left:0,top:0,height:parseInt(c.style.height)};null!=c;)d.left+=c.offsetLeft,d.top+=c.offsetTop,c=c.offsetParent;c=b.pageY;b=(b.pageX-d.left)/cc.Director.sharedDirector().getContentScaleFactor();
c=(d.height-(c-d.top))/cc.Director.sharedDirector().getContentScaleFactor();d=new cc.Touch(0,b,c);d._setPrevPoint(cc.TouchDispatcher.preTouchPoint.x,cc.TouchDispatcher.preTouchPoint.y);cc.TouchDispatcher.preTouchPoint.x=b;cc.TouchDispatcher.preTouchPoint.y=c;b=[];b.push(d);cc.TouchDispatcher.sharedDispatcher().touchesEnded(b,null)});a.addEventListener("mousemove",function(b){for(var c=a,d=null,d=a instanceof HTMLCanvasElement?{left:0,top:0,height:c.height}:{left:0,top:0,height:parseInt(c.style.height)};null!=
c;)d.left+=c.offsetLeft,d.top+=c.offsetTop,c=c.offsetParent;c=b.pageY;b=(b.pageX-d.left)/cc.Director.sharedDirector().getContentScaleFactor();c=(d.height-(c-d.top))/cc.Director.sharedDirector().getContentScaleFactor();d=new cc.Touch(0,b,c);d._setPrevPoint(cc.TouchDispatcher.preTouchPoint.x,cc.TouchDispatcher.preTouchPoint.y);cc.TouchDispatcher.preTouchPoint.x=b;cc.TouchDispatcher.preTouchPoint.y=c;b=[];b.push(d);cc.TouchDispatcher.sharedDispatcher().touchesMoved(b,null)});a.addEventListener("touchstart",
function(b){if(b.touches){for(var c=[],d=a,e=null,e=a instanceof HTMLCanvasElement?{left:0,top:0,height:d.height}:{left:0,top:0,height:parseInt(d.style.height)};null!=d;)e.left+=d.offsetLeft,e.top+=d.offsetTop,d=d.offsetParent;e.left-=document.body.scrollLeft;e.top-=document.body.scrollTop;for(d=0;d<b.touches.length;d++){var f=b.touches[d].pageX,h=b.touches[d].pageY;b.touches[d]&&(f=b.touches[d].clientX,h=b.touches[d].clientY);var f=(f-e.left)/cc.Director.sharedDirector().getContentScaleFactor(),
h=(e.height-(h-e.top))/cc.Director.sharedDirector().getContentScaleFactor(),g=new cc.Touch(0,f,h);g._setPrevPoint(cc.TouchDispatcher.preTouchPoint.x,cc.TouchDispatcher.preTouchPoint.y);cc.TouchDispatcher.preTouchPoint.x=f;cc.TouchDispatcher.preTouchPoint.y=h;c.push(g)}cc.TouchDispatcher.sharedDispatcher().touchesBegan(c,null);b.stopPropagation();b.preventDefault()}},!1);a.addEventListener("touchmove",function(b){if(b.touches){for(var c=[],d=a,e=null,e=a instanceof HTMLCanvasElement?{left:0,top:0,
height:d.height}:{left:0,top:0,height:parseInt(d.style.height)};null!=d;)e.left+=d.offsetLeft,e.top+=d.offsetTop,d=d.offsetParent;e.left-=document.body.scrollLeft;e.top-=document.body.scrollTop;for(d=0;d<b.touches.length;d++){var f=b.touches[d].pageX,h=b.touches[d].pageY;b.touches[d]&&(f=b.touches[d].clientX,h=b.touches[d].clientY);var f=(f-e.left)/cc.Director.sharedDirector().getContentScaleFactor(),h=(e.height-(h-e.top))/cc.Director.sharedDirector().getContentScaleFactor(),g=new cc.Touch(0,f,h);
g._setPrevPoint(cc.TouchDispatcher.preTouchPoint.x,cc.TouchDispatcher.preTouchPoint.y);cc.TouchDispatcher.preTouchPoint.x=f;cc.TouchDispatcher.preTouchPoint.y=h;c.push(g)}cc.TouchDispatcher.sharedDispatcher().touchesMoved(c,null);b.stopPropagation();b.preventDefault()}},!1);a.addEventListener("touchend",function(b){if(b.touches){for(var c=[],d=a,e=null,e=a instanceof HTMLCanvasElement?{left:0,top:0,height:d.height}:{left:0,top:0,height:parseInt(d.style.height)};null!=d;)e.left+=d.offsetLeft,e.top+=
d.offsetTop,d=d.offsetParent;e.left-=document.body.scrollLeft;e.top-=document.body.scrollTop;d=b.touches;if(!d||0==d.length)d=b.changedTouches;for(var f=0;f<d.length;f++){var h=d[f].pageX,g=d[f].pageY;d[f]&&(h=d[f].clientX,g=d[f].clientY);var h=(h-e.left)/cc.Director.sharedDirector().getContentScaleFactor(),g=(e.height-(g-e.top))/cc.Director.sharedDirector().getContentScaleFactor(),i=new cc.Touch(0,h,g);i._setPrevPoint(cc.TouchDispatcher.preTouchPoint.x,cc.TouchDispatcher.preTouchPoint.y);cc.TouchDispatcher.preTouchPoint.x=
h;cc.TouchDispatcher.preTouchPoint.y=g;c.push(i)}cc.TouchDispatcher.sharedDispatcher().touchesEnded(c,null);b.stopPropagation();b.preventDefault()}},!1);a.addEventListener("touchcancel",function(b){if(b.touches){for(var c=[],d=a,e=null,e=a instanceof HTMLCanvasElement?{left:0,top:0,height:d.height}:{left:0,top:0,height:parseInt(d.style.height)};null!=d;)e.left+=d.offsetLeft,e.top+=d.offsetTop,d=d.offsetParent;e.left-=document.body.scrollLeft;e.top-=document.body.scrollTop;for(d=0;d<b.touches.length;d++){var f=
b.touches[d].pageX,h=b.touches[d].pageY;b.touches[d]&&(f=b.touches[d].clientX,h=b.touches[d].clientY);var f=(f-e.left)/cc.Director.sharedDirector().getContentScaleFactor(),h=(e.height-(h-e.top))/cc.Director.sharedDirector().getContentScaleFactor(),g=new cc.Touch(0,f,h);g._setPrevPoint(cc.TouchDispatcher.preTouchPoint.x,cc.TouchDispatcher.preTouchPoint.y);cc.TouchDispatcher.preTouchPoint.x=f;cc.TouchDispatcher.preTouchPoint.y=h;c.push(g)}cc.TouchDispatcher.sharedDispatcher().touchesCancelled(c,null);
b.stopPropagation();b.preventDefault()}},!1)};cc._pSharedDispatcher=null;cc.TouchDispatcher.sharedDispatcher=function(){null==cc._pSharedDispatcher&&(cc._pSharedDispatcher=new cc.TouchDispatcher,cc._pSharedDispatcher.init(),cc.TouchDispatcher.registerHtmlElementEvent(cc.canvas));return cc._pSharedDispatcher};cc.KeypadDelegate=cc.Class.extend({keyDown:function(){},keyUp:function(){}});cc.KeypadHandler=cc.Class.extend({getDelegate:function(){return this._delegate},setDelegate:function(a){this._delegate=a},initWithDelegate:function(a){cc.Assert(null!=a,"It's a wrong delegate!");this._delegate=a;return!0},_delegate:null});cc.KeypadHandler.create=function(a){var b=new cc.KeypadHandler;b.initWithDelegate(a);return b};cc.TYPE_BACK_CLICKED=1;cc.TYPE_MENU_CLICKED=2;
cc.KEY={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,Delete:46,"0":48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,
f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,",":186,equal:187,"=":187,";":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,"]":221,closebracket:221,backslash:220,quote:222,space:32};
cc.KeypadDispatcher=cc.Class.extend({addDelegate:function(a){a&&(this._locked?(this._handlersToAdd.push(a),this._toAdd=!0):this.forceAddDelegate(a))},removeDelegate:function(a){a&&(this._locked?(this._handlersToRemove.push(a),this._toRemove=!0):this.forceRemoveDelegate(a))},forceAddDelegate:function(a){if(a=cc.KeypadHandler.create(a)){for(var b=0;b<this._delegates;b++)this._delegates[b].getDelegate(),a.getDelegate();this._delegates.push(a)}},forceRemoveDelegate:function(a){-1!=this._delegates.indexOf(a)&&
this._delegates.splice(this._delegates.indexOf(a),1)},dispatchKeypadMSG:function(a,b){this._locked=!0;a.stopPropagation();a.preventDefault();if(b&&a)for(var c=0;c<this._delegates.length;c++)this._delegates[c].getDelegate().keyDown(a.keyCode);else if(!b&&a)for(c=0;c<this._delegates.length;c++)this._delegates[c].getDelegate().keyUp(a.keyCode);this._locked=!1;if(this._toRemove){this._toRemove=!1;for(c=0;c<this._handlersToRemove.length;++c)this.forceRemoveDelegate(this._handlersToRemove[c]);delete this._handlersToRemove;
this._handlersToRemove=[]}if(this._toAdd){this._toAdd=!1;for(c=0;c<this._handlersToAdd.length;++c)this.forceAddDelegate(this._handlersToAdd[c]);this._handlersToAdd=[]}return!0},_delegates:[],_locked:!1,_toAdd:!1,_toRemove:!1,_handlersToAdd:[],_handlersToRemove:[]});
cc.KeypadDispatcher.sharedDispatcher=function(){cc.keypadDispatcher||(cc.keypadDispatcher=new cc.KeypadDispatcher,cc.canvas.setAttribute("contentEditable",!0),cc.canvas.style.outline="none",cc.canvas.style.cursor="default",cc.canvas.addEventListener("keydown",function(a){cc.keypadDispatcher.dispatchKeypadMSG(a,!0);cc.IMEDispatcher.sharedDispatcher().processKeycode(a.keyCode)}),cc.canvas.addEventListener("keyup",function(a){cc.keypadDispatcher.dispatchKeypadMSG(a,!1)}));return cc.keypadDispatcher};
cc.KeypadDispatcher.purgeSharedDispatcher=function(){cc.keypadDispatcher&&(delete cc.keypadDispatcher,cc.keypadDispatcher=null)};cc.IMEKeyboardNotificationInfo=function(a,b,c){this.begin=a||cc.RectZero();this.end=b||cc.RectZero();this.duration=c||0};
cc.IMEDelegate=cc.Class.extend({ctor:function(){cc.IMEDispatcher.sharedDispatcher().addDelegate(this)},removeDelegate:function(){cc.IMEDispatcher.sharedDispatcher().removeDelegate(this)},attachWithIME:function(){return cc.IMEDispatcher.sharedDispatcher().attachDelegateWithIME(this)},detachWithIME:function(){return cc.IMEDispatcher.sharedDispatcher().detachDelegateWithIME(this)},canAttachWithIME:function(){return!1},didAttachWithIME:function(){},canDetachWithIME:function(){return!1},didDetachWithIME:function(){},
insertText:function(){},deleteBackward:function(){},getContentText:function(){return""},keyboardWillShow:function(){},keyboardDidShow:function(){},keyboardWillHide:function(){},keyboardDidHide:function(){}});
cc.IMEDispatcher=cc.Class.extend({impl:null,ctor:function(){this.impl=new cc.IMEDispatcher.Impl},dispatchInsertText:function(a,b){this.impl&&a&&!(0>=b)&&this.impl._delegateWithIme&&this.impl._delegateWithIme.insertText(a,b)},dispatchDeleteBackward:function(){this.impl&&this.impl._delegateWithIme&&this.impl._delegateWithIme.deleteBackward()},getContentText:function(){if(this.impl&&this.impl._delegateWithIme){var a=this.impl._delegateWithIme.getContentText();return a?a:""}return""},dispatchKeyboardWillShow:function(a){if(this.impl)for(var b=
0;b<this.impl._delegateList.length;b++){var c=this.impl._delegateList[b];c&&c.keyboardWillShow(a)}},dispatchKeyboardDidShow:function(a){if(this.impl)for(var b=0;b<this.impl._delegateList.length;b++){var c=this.impl._delegateList[b];c&&c.keyboardDidShow(a)}},dispatchKeyboardWillHide:function(a){if(this.impl)for(var b=0;b<this.impl._delegateList.length;b++){var c=this.impl._delegateList[b];c&&c.keyboardWillHide(a)}},dispatchKeyboardDidHide:function(a){if(this.impl)for(var b=0;b<this.impl._delegateList.length;b++){var c=
this.impl._delegateList[b];c&&c.keyboardDidHide(a)}},addDelegate:function(a){a&&this.impl&&!(-1<this.impl._delegateList.indexOf(a))&&(this.impl._delegateList=cc.ArrayAppendObjectToIndex(this.impl._delegateList,a,0))},attachDelegateWithIME:function(a){if(!this.impl||!a||-1==this.impl._delegateList.indexOf(a))return!1;if(this.impl._delegateWithIme){if(!this.impl._delegateWithIme.canDetachWithIME()||!a.canAttachWithIME())return!1;var b=this.impl._delegateWithIme;this.impl._delegateWithIme=null;b.didDetachWithIME();
this.impl._delegateWithIme=a;a.didAttachWithIME();return!0}if(!a.canAttachWithIME())return!1;this.impl._delegateWithIme=a;a.didAttachWithIME();return!0},detachDelegateWithIME:function(a){if(!this.impl||!a||this.impl._delegateWithIme!=a||!a.canDetachWithIME())return!1;this.impl._delegateWithIme=0;a.didDetachWithIME();return!0},removeDelegate:function(a){this.impl&&a&&-1!=this.impl._delegateList.indexOf(a)&&(this.impl._delegateWithIme&&a==this.impl._delegateWithIme&&(this.impl._delegateWithIme=null),
cc.ArrayRemoveObject(this.impl._delegateList,a))},processKeycode:function(a){32>a?a==cc.KEY.backspace?this.dispatchDeleteBackward():a==cc.KEY.enter&&this.dispatchInsertText("\n",1):255>a&&this.dispatchInsertText(String.fromCharCode(a),1)}});cc.IMEDispatcher.Impl=cc.Class.extend({_delegateWithIme:null,_delegateList:null,ctor:function(){this._delegateList=[]},findDelegate:function(a){for(var b=0;b<this._delegateList.length;b++)if(this._delegateList[b]==a)return b;return null}});
cc.IMEDispatcher.sharedDispatcher=function(){cc.IMEDispatcher.instance||(cc.IMEDispatcher.instance=new cc.IMEDispatcher,cc.KeypadDispatcher.sharedDispatcher());return cc.IMEDispatcher.instance};cc.IMEDispatcher.instance=null;cc.TextFieldDelegate=cc.Class.extend({onTextFieldAttachWithIME:function(){return!1},onTextFieldDetachWithIME:function(){return!1},onTextFieldInsertText:function(){return!1},onTextFieldDeleteBackward:function(){return!1},onDraw:function(){return!1}});
cc.TextFieldTTF=cc.LabelTTF.extend({_lens:null,_inputText:"",_placeHolder:"",_charCount:0,_delegate:null,_ColorSpaceHolder:null,ctor:function(){this._ColorSpaceHolder=new cc.Color3B(127,127,127);cc.IMEDispatcher.sharedDispatcher().addDelegate(this);this._super()},getDelegate:function(){return this._delegate},setDelegate:function(a){this._delegate=a},getCharCount:function(){return this._charCount},getColorSpaceHolder:function(){return this._ColorSpaceHolder},setColorSpaceHolder:function(a){this._ColorSpaceHolder=
a},initWithPlaceHolder:function(a,b,c,d,e){switch(arguments.length){case 5:return a&&(this._placeHolder=a),this.initWithString(this._placeHolder,b,c,d,e);case 3:return a&&(this._placeHolder=a),d=arguments[1],e=arguments[2],this.initWithString(this._placeHolder,d,e);default:throw"Argument must be non-nil ";}},setString:function(a,b){b&&!0==b?this._super(a):(this._inputText=a?a:"",this._inputText.length?this._super(this._inputText):this._super(this._placeHolder),this._charCount=this._inputText.length)},
getString:function(){return this._inputText},setPlaceHolder:function(a){this._placeHolder=a||"";this._inputText.length||this.setString(this._placeHolder,!0)},getPlaceHolder:function(){return this._placeHolder},draw:function(a){a=a||cc.renderContext;if(!this._delegate||!this._delegate.onDraw(this))if(this._inputText)this._super(a);else{var b=this.getColor();this.setColor(this._ColorSpaceHolder);this._super(a);this.setColor(b)}},attachWithIME:function(){return cc.IMEDispatcher.sharedDispatcher().attachDelegateWithIME(this)},
detachWithIME:function(){return cc.IMEDispatcher.sharedDispatcher().detachDelegateWithIME(this)},canAttachWithIME:function(){return this._delegate?!this._delegate.onTextFieldAttachWithIME(this):!0},didAttachWithIME:function(){},canDetachWithIME:function(){return this._delegate?!this._delegate.onTextFieldDetachWithIME(this):!0},didDetachWithIME:function(){},deleteBackward:function(){var a=this._inputText.length;if(0!=a&&(!this._delegate||!this._delegate.onTextFieldDeleteBackward(this,this._inputText[a-
1],1)))1>=a?(this._inputText="",this._charCount=0,this.setString(this._placeHolder,!0)):this.setString(this._inputText.substring(0,a-1))},removeDelegate:function(){cc.IMEDispatcher.sharedDispatcher().removeDelegate(this)},insertText:function(a){var b=a,a=b.indexOf("\n");-1<a&&(b=b.substring(0,a));if(0<b.length){if(this._delegate&&this._delegate.onTextFieldInsertText(this,b,b.length))return;b=this._inputText+b;this._charCount=b.length;this.setString(b)}-1!=a&&(!this._delegate||!this._delegate.onTextFieldInsertText(this,
"\n",1))&&this.detachWithIME()},getContentText:function(){return this._inputText},keyboardWillShow:function(){},keyboardDidShow:function(){},keyboardWillHide:function(){},keyboardDidHide:function(){}});
cc.TextFieldTTF.create=function(a,b,c,d,e){switch(arguments.length){case 5:var f=new cc.TextFieldTTF;return f&&f.initWithPlaceHolder("",b,c,d,e)?(a&&f.setPlaceHolder(a),f):null;case 3:return f=new cc.TextFieldTTF,d=arguments[1],e=arguments[2],f&&f.initWithString("",d,e)?(a&&f.setPlaceHolder(a),f):null;default:throw"Argument must be non-nil ";}};cc.CCDIRECTOR_PROJECTION_2D=0;cc.CCDIRECTOR_PROJECTION_3D=1;cc.CCDIRECTOR_PROJECTION_CUSTOM=3;cc.CCDIRECTOR_PROJECTION_DEFAULT=cc.CCDIRECTOR_PROJECTION_3D;cc.DIRECTOR_PROJECTION_2D=cc.CCDIRECTOR_PROJECTION_2D;cc.DIRECTOR_PROJECTION_3D=cc.CCDIRECTOR_PROJECTION_3D;cc.DIRECTOR_PROJECTION_CUSTOM=cc.CCDIRECTOR_PROJECTION_CUSTOM;cc.CCDIRECTOR_TYPE_NS_TIMER=0;cc.CCDIRECTOR_TYPE_MAIN_LOOP=1;cc.CCDIRECTOR_TYPE_THREAD_MAIN_LOOP=2;cc.CCDIRECTOR_TYPE_DISPLAY_LINK=3;cc.CCDIRECTOR_TYPE_DEFAULT=cc.CCDIRECTOR_TYPE_NS_TIMER;
cc.DIRECTOR_TYPE_NS_TIMER=cc.CCDIRECTOR_TYPE_NS_TIMER;cc.DIRECTOR_TYPE_MAIN_LOOP=cc.CCDIRECTOR_TYPE_MAIN_LOOP;cc.DIRECTOR_TYPE_THREAD_MAIN_LOOP=cc.CCDIRECTOR_TYPE_THREAD_MAIN_LOOP;cc.DIRECTOR_TYPE_DISPLAY_LINK=cc.CCDIRECTOR_TYPE_DISPLAY_LINK;cc.DIRECTOR_TYPE_DEFAULT=cc.CCDIRECTOR_TYPE_DEFAULT;cc.CCDEVICE_ORIENTATION_PORTRAIT=0;cc.CCDEVICE_ORIENTATION_LANDSCAPE_LEFT=1;cc.CCDEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN=2;cc.CCDEVICE_ORIENTATION_LANDSCAPE_RIGHT=3;cc.DEVICE_MAX_ORIENTATIONS=2;
cc.DEVICE_ORIENTATION_PORTRAIT=cc.CCDEVICE_ORIENTATION_PORTRAIT;cc.DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN=cc.CCDEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN;cc.DEVICE_ORIENTATION_LANDSCAPE_LEFT=cc.CCDEVICE_ORIENTATION_LANDSCAPE_LEFT;cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT=cc.CCDEVICE_ORIENTATION_LANDSCAPE_RIGHT;
cc.Director=cc.Class.extend({_displayFPS:!1,_isContentScaleSupported:!1,_landscape:!1,_nextDeltaTimeZero:!1,_paused:!1,_purgeDirecotorInNextLoop:!1,_retinaDisplay:!1,_sendCleanupToScene:!1,_animationInterval:0,_oldAnimationInterval:0,_deviceOrientation:0,_projection:0,_accumDt:0,_accumDtForProfiler:0,_contentScaleFactor:1,_deltaTime:0,_frameRate:0,_winSizeInPixels:null,_winSizeInPoints:null,_FPSLabel:null,_lastUpdate:null,_nextScene:null,_notificationNode:null,_openGLView:null,_scenesStack:null,_projectionDelegate:null,
_runningScene:null,_szFPS:"",_frames:0,_totalFrames:0,_dirtyRegion:null,init:function(){this._FPSLabel||(this._FPSLabel=cc.LabelTTF.create("00.0","Arial",24));this._FPSLabel.setPosition(cc.ccp(0,0));this._FPSLabel.setAnchorPoint(cc.ccp(0,0));this._notificationNode=this._nextScene=this._runningScene=null;this._oldAnimationInterval=this._animationInterval=1/cc.defaultFPS;this._scenesStack=[];this._projection=cc.CCDIRECTOR_PROJECTION_DEFAULT;this._projectionDelegate=null;this._displayFPS=!1;this._totalFrames=
this._frames=0;this._szFPS="";this._lastUpdate=new cc.timeval;this._purgeDirecotorInNextLoop=this._paused=!1;this._winSizeInPixels=this._winSizeInPoints=cc.SizeMake(cc.canvas.width,cc.canvas.height);this._deviceOrientation=cc.DEVICE_ORIENTATION_PORTRAIT;this._openGLView=null;this._retinaDisplay=!1;this._contentScaleFactor=1;this._isContentScaleSupported=!1;return!0},applyOrientation:function(){},calculateDeltaTime:function(){var a=new cc.timeval;(a=cc.Time.gettimeofdayCocos2d())?(this._nextDeltaTimeZero?
(this._deltaTime=0,this._nextDeltaTimeZero=!1):(this._deltaTime=a.tv_sec-this._lastUpdate.tv_sec+(a.tv_usec-this._lastUpdate.tv_usec)/1E6,this._deltaTime=Math.max(0,this._deltaTime)),cc.DEBUG&&0.2<this._deltaTime&&(this._deltaTime=1/60),this._lastUpdate=a):(cc.Log("error in gettimeofday"),this._deltaTime=0)},convertToGL:function(a){var b=this._winSizeInPoints,c=b.height-a.y,b=b.width-a.x,d=cc.PointZero();switch(this._deviceOrientation){case cc.DEVICE_ORIENTATION_PORTRAIT:d=cc.ccp(a.x,c);break;case cc.DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN:d=
cc.ccp(b,a.y);break;case cc.DEVICE_ORIENTATION_LANDSCAPE_LEFT:d.x=a.y;d.y=a.x;break;case cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT:d.x=c,d.y=b}return d},convertToUI:function(a){var b=this._winSizeInPoints,c=b.width-a.x,d=b.height-a.y,e=cc.PointZero();switch(this._deviceOrientation){case cc.DEVICE_ORIENTATION_PORTRAIT:e=cc.ccp(a.x,d);break;case cc.DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN:e=cc.ccp(c,a.y);break;case cc.DEVICE_ORIENTATION_LANDSCAPE_LEFT:e=cc.ccp(a.y,a.x);break;case cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT:e=
cc.ccp(b.width-a.y,b.height-a.x)}return e},drawScene:function(){this.calculateDeltaTime();this._paused||cc.Scheduler.sharedScheduler().tick(this._deltaTime);cc.renderContext.clearRect(0,0,cc.canvas.width,-cc.canvas.height);this._nextScene&&this.setNextScene();this.applyOrientation();cc.ENABLE_DEFAULT_GL_STATES();this._runningScene&&this._runningScene.visit();this._notificationNode&&this._notificationNode.visit();this._displayFPS&&this.showFPS();cc.ENABLE_PROFILERS&&this.showProfilers();cc.DISABLE_DEFAULT_GL_STATES();
this._totalFrames++;this._openGLView&&this._openGLView.swapBuffers()},addRegionToDirtyRegion:function(a){a&&(this._dirtyRegion=this._dirtyRegion?cc.Rect.CCRectUnion(this._dirtyRegion,new cc.Rect(a.origin.x,a.origin.y,a.size.width,a.size.height)):new cc.Rect(a.origin.x,a.origin.y,a.size.width,a.size.height))},rectIsInDirtyRegion:function(a){return!a||!this._fullRect?!1:cc.Rect.CCRectIntersectsRect(this._fullRect,a)},enableRetinaDisplay:function(a){if(a&&2==this._contentScaleFactor)return!0;if(!a&&
1==this._contentScaleFactor||!this._openGLView.canSetContentScaleFactor())return!1;this.setContentScaleFactor(a?2:1);cc.TextureCache.purgeSharedTextureCache();cc.DIRECTOR_FAST_FPS&&!this._FPSLabel&&(this._FPSLabel=cc.LabelTTF.create("00.0","Arial",24),this._FPSLabel.setPosition(cc.ccp(0,0)),this._FPSLabel.setAnchorPoint(cc.ccp(0,0)));this._retinaDisplay=2==this._contentScaleFactor;return!0},end:function(){this._purgeDirecotorInNextLoop=!0},getContentScaleFactor:function(){return this._contentScaleFactor},
getDeviceOrientation:function(){return this._deviceOrientation},getDisplaySizeInPixels:function(){return this._winSizeInPixels},getNotificationNode:function(){return this._notificationNode},getWinSize:function(){var a=this._winSizeInPoints;if(this._deviceOrientation==cc.DEVICE_ORIENTATION_LANDSCAPE_LEFT||this._deviceOrientation==cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT){var b=new cc.SizeZero;b.width=a.height;b.height=a.width;return b}return a},getWinSizeInPixels:function(){var a=this.getWinSize();a.width*=
cc.CONTENT_SCALE_FACTOR();a.height*=cc.CONTENT_SCALE_FACTOR();return a},getZEye:function(){return this._winSizeInPixels.height/1.1566},pause:function(){this._paused||(this._oldAnimationInterval=this._animationInterval,this.setAnimationInterval(0.25),this._paused=!0)},popScene:function(){cc.Assert(null!=this._runningScene,"running scene should not null");this._scenesStack.pop();var a=this._scenesStack.length;0==a?this.end():(this._sendCleanupToScene=!0,this._nextScene=this._scenesStack[a-1])},purgeCachedData:function(){cc.LabelBMFont.purgeCachedData();
cc.TextureCache.sharedTextureCache().removeUnusedTextures()},purgeDirector:function(){cc.TouchDispatcher.sharedDispatcher().removeAllDelegates();this._runningScene&&(this._runningScene.onExit(),this._runningScene.cleanup());this._nextScene=this._runningScene=null;this._scenesStack=[];this.stopAnimation();cc.AnimationCache.purgeSharedAnimationCache();cc.SpriteFrameCache.purgeSharedSpriteFrameCache();cc.ActionManager.sharedManager().purgeSharedManager();cc.Scheduler.purgeSharedScheduler();cc.TextureCache.purgeSharedTextureCache();
cc.TARGET_PLATFORM!=cc.PLATFORM_MARMALADE&&cc.UserDefault.purgeSharedUserDefault();this._openGLView=null},pushScene:function(a){cc.Assert(a,"the scene should not null");this._sendCleanupToScene=!1;this._scenesStack.push(a);this._nextScene=a},replaceScene:function(a){cc.Assert(null!=a,"the scene should not be null");var b=this._scenesStack.length;this._sendCleanupToScene=!0;this._nextScene=this._scenesStack[b-1]=a},resetDirector:function(){cc.TouchDispatcher.sharedDispatcher().removeAllDelegates();
this._runningScene&&(this._runningScene.onExit(),this._runningScene.cleanup(),this._runningScene.release());this._nextScene=this._runningScene=null;this._scenesStack.removeAllObjects();this.stopAnimation();cc.LabelBMFont.purgeCachedData();cc.AnimationCache.purgeSharedAnimationCache();cc.SpriteFrameCache.purgeSharedSpriteFrameCache();cc.ActionManager.sharedManager().purgeSharedManager();cc.Scheduler.purgeSharedScheduler();cc.TextureCache.purgeSharedTextureCache()},reshapeProjection:function(a){cc.UNUSED_PARAM(a);
this._winSizeInPoints=this._openGLView.getSize();this._winSizeInPixels=cc.SizeMake(this._winSizeInPoints.width*this._contentScaleFactor,this._winSizeInPoints.height*this._contentScaleFactor);this.setProjection(this._projection)},resume:function(){this._paused&&(this.setAnimationInterval(this._oldAnimationInterval),(this._lastUpdate=cc.Time.gettimeofdayCocos2d())||cc.Log("cocos2d: Director: Error in gettimeofday"),this._paused=!1,this._deltaTime=0)},runWithScene:function(a){cc.Assert(null!=a,"running scene should not be null");
cc.Assert(null==this._runningScene,"_runningScene should be null");this.pushScene(a);this.startAnimation()},setAlphaBlending:function(){},setContentScaleFactor:function(a){a!=this._contentScaleFactor&&(this._contentScaleFactor=a,this._winSizeInPixels=cc.SizeMake(this._winSizeInPoints.width*a,this._winSizeInPoints.height*a),this._openGLView&&this.updateContentScaleFactor(),this.setProjection(this._projection))},setDepthTest:function(){},setDeviceOrientation:function(a){a=cc.Application.sharedApplication().setOrientation(a);
if(this._deviceOrientation%cc.DEVICE_MAX_ORIENTATIONS!=a%cc.DEVICE_MAX_ORIENTATIONS&&(this._deviceOrientation=a,cc.renderContextType==cc.CANVAS&&(a=cc.canvas.height,cc.canvas.height=cc.canvas.width,cc.canvas.width=a,cc.renderContext.translate(0,cc.canvas.height),cc.domNode&&(a=cc.$("#Cocos2dGameContainer")))))a.style.width=cc.canvas.width+"px",a.style.height=cc.canvas.height+"px"},setGLDefaultValues:function(){cc.Assert(this._openGLView,"opengl view should not be null");this.setAlphaBlending(!0);
this.setDepthTest(!0);this.setProjection(this._projection);cc.DIRECTOR_FAST_FPS&&!this._FPSLabel&&(this._FPSLabel=cc.LabelTTF.create("00.0","Arial",24),this._FPSLabel.setPosition(cc.ccp(0,0)),this._FPSLabel.setAnchorPoint(cc.ccp(0,0)))},setNextDeltaTimeZero:function(a){this._nextDeltaTimeZero=a},setNextScene:function(){var a=this._runningScene?this._runningScene instanceof cc.TransitionScene:!1;if(!(this._nextScene&&this._nextScene instanceof cc.TransitionScene)){if(this._runningScene)this._runningScene.onExit();
this._sendCleanupToScene&&this._runningScene&&this._runningScene.cleanup()}this._runningScene=this._nextScene;this._nextScene=null;!a&&null!=this._runningScene&&(this._runningScene.onEnter(),this._runningScene.onEnterTransitionDidFinish())},setNotificationNode:function(a){this._notificationNode=a},setOpenGLView:function(a){cc.Assert(a,"opengl view should not be null");this._openGLView!=a&&(delete this._openGLView,this._openGLView=a,this._winSizeInPoints=this._openGLView.getSize(),this._winSizeInPixels=
cc.SizeMake(this._winSizeInPoints.width*this._contentScaleFactor,this._winSizeInPoints.height*this._contentScaleFactor),this.setGLDefaultValues(),1!=this._contentScaleFactor&&this.updateContentScaleFactor(),a=cc.TouchDispatcher.sharedDispatcher(),this._openGLView.setTouchDelegate(a),a.setDispatchEvents(!0))},setProjection:function(a){var b=this._winSizeInPixels;this.getZEye();switch(a){case cc.CCDIRECTOR_PROJECTION_2D:this._openGLView&&this._openGLView.setViewPortInPoints(0,0,b.width,b.height);break;
case cc.CCDIRECTOR_PROJECTION_3D:this._openGLView&&this._openGLView.setViewPortInPoints(0,0,b.width,b.height);break;case cc.CCDIRECTOR_PROJECTION_CUSTOM:this._projectionDelegate&&this._projectionDelegate.updateProjection();break;default:cc.Log("cocos2d: Director: unrecognized projecgtion")}this._projection=a},showFPS:function(){this._frames++;this._accumDt+=this._deltaTime;this._accumDt>cc.DIRECTOR_FPS_INTERVAL&&(this._frameRate=this._frames/this._accumDt,this._accumDt=this._frames=0,this._szFPS=
""+this._frameRate.toFixed(1),this._FPSLabel.setString(this._szFPS));this._FPSLabel.draw()},showProfilers:function(){cc.ENABLE_PROFILERS&&(this._accumDtForProfiler+=this._deltaTime,1<this._accumDtForProfiler&&(this._accumDtForProfiler=0,cc.Profiler.sharedProfiler().displayTimers()))},updateContentScaleFactor:function(){this._openGLView.canSetContentScaleFactor()?(this._openGLView.setContentScaleFactor(this._contentScaleFactor),this._isContentScaleSupported=!0):cc.Log("cocos2d: setContentScaleFactor:'is not supported on this device")},
isRetinaDisplay:function(){return this._retinaDisplay},isSendCleanupToScene:function(){return this._sendCleanupToScene},getRunningScene:function(){return this._runningScene},getAnimationInterval:function(){return this._animationInterval},isDisplayFPS:function(){return this._displayFPS},setDisplayFPS:function(a){this._displayFPS=a},getOpenGLView:function(){return this._openGLView},isNextDeltaTimeZero:function(){return this._nextDeltaTimeZero},isPaused:function(){return this._paused},getFrames:function(){return this._frames},
getProjection:function(){return this._projection}});cc.Director.sharedDirector=function(){cc.firstRun&&(cc.sharedDirector.init(),cc.firstRun=!1);return cc.sharedDirector};cc.Director.setDirectorType=function(){cc.Director.sharedDirector();return!0};
cc.DisplayLinkDirector=cc.Director.extend({invalid:!1,startAnimation:function(){this._lastUpdate=cc.Time.gettimeofdayCocos2d();this.invalid=!1;cc.Application.sharedApplication().setAnimationInterval(this._animationInterval)},mainLoop:function(){this._purgeDirecotorInNextLoop?(this.purgeDirector(),this._purgeDirecotorInNextLoop=!1):this.invalid||this.drawScene()},stopAnimation:function(){this.invalid=!0},setAnimationInterval:function(a){this._animationInterval=a;this.invalid||(this.stopAnimation(),
this.startAnimation())}});cc.sharedDirector=new cc.DisplayLinkDirector;cc.firstRun=!0;cc.defaultFPS=60;cc=cc=cc||{};
cc.Camera=cc.Class.extend({_eyeX:null,_eyeY:null,_eyeZ:null,_centerX:null,_centerY:null,_centerZ:null,_upX:null,_upY:null,_upZ:null,_dirty:null,ctor:function(){this.restore()},description:function(){return"<CCCamera | center =("+this._centerX+","+this._centerY+","+this._centerZ+")>"},setDirty:function(a){this._dirty=a},getDirty:function(){return this._dirty},restore:function(){this._eyeX=this._eyeY=0;this._eyeZ=cc.Camera.getZEye();this._upX=this._centerX=this._centerY=this._centerZ=0;this._upY=1;
this._upZ=0;this._dirty=!1},locate:function(){},setEyeXYZ:function(a,b,c){this._eyeX=a*cc.CONTENT_SCALE_FACTOR;this._eyeY=b*cc.CONTENT_SCALE_FACTOR;this._eyeZ=c*cc.CONTENT_SCALE_FACTOR;this._dirty=!0},setCenterXYZ:function(a,b,c){this._centerX=a*cc.CONTENT_SCALE_FACTOR;this._centerY=b*cc.CONTENT_SCALE_FACTOR;this._centerZ=c*cc.CONTENT_SCALE_FACTOR;this._dirty=!0},setUpXYZ:function(a,b,c){this._upX=a;this._upY=b;this._upZ=c;this._dirty=!0},getEyeXYZ:function(){},getCenterXYZ:function(){},getUpXYZ:function(){},
_DISALLOW_COPY_AND_ASSIGN:function(){}});cc.Camera.getZEye=function(){return cc.FLT_EPSILON};cc.ArrayRemoveObjectAtIndex=function(a,b){a.splice(b,1)};cc.ArrayRemoveObject=function(a,b){for(var c=0;c<a.length;c++)a[c]==b&&a.splice(c,1)};cc.ArrayRemoveArray=function(a,b){for(var c=0;c<b.length;c++)cc.ArrayRemoveObject(a,b[c])};cc.ArrayGetIndexOfValue=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1};cc.ArrayAppendObject=function(a,b){a.push(b)};cc.ArrayAppendObjectToIndex=function(a,b,c){var d=a.slice(0,c),a=a.slice(c);d.push(b);return a=d.concat(a)};
cc.ArrayGetIndexOfObject=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1};cc.ArrayContainsObject=function(a,b){return-1!=cc.ArrayGetIndexOfObject(a,b)};cc.HASH_FIND_INT=function(a,b){if(null==a)return null;for(var c=0;c<a.length;c++)if(a[c].target==b)return a[c];return null};cc.ListEntry=function(a,b,c,d,e,f){this.prev=a;this.next=b;this.target=c;this.priority=d;this.paused=e;this.makedForDeletion=f};
cc.HashUpdateEntry=function(a,b,c,d){this.list=a;this.entry=b;this.target=c;this.hh=d};cc.HashSelectorEntry=function(a,b,c,d,e,f,h){this.timers=a;this.target=b;this.timerIndex=c;this.currentTimer=d;this.currentTimerSalvaged=e;this.paused=f;this.hh=h};
cc.Timer=cc.Class.extend({_interval:0,_selector:"",_target:null,_elapsed:0,ctor:function(){},getInterval:function(){return this._interval},initWithTarget:function(a,b,c){try{return this._target=a,this._selector=b,this._elapsed=-1,this._interval=c||0,!0}catch(d){return!1}},update:function(a){this._elapsed=-1==this._elapsed?0:this._elapsed+a;if(this._elapsed>=this._interval&&this._selector){if("string"==typeof this._selector)this._target[this._selector](this._elapsed);else"function"==typeof this._selector&&
this._selector.call(this._target,this._elapsed);this._elapsed=0}}});cc.Timer.timerWithTarget=function(a,b,c){if(2>arguments)throw Error("timerWithTarget'argument can't is null");var d=new cc.Timer;2==arguments.length?d.initWithTarget(a,b,0):d.initWithTarget(a,b,c);return d};cc._sharedScheduler=null;
cc.Scheduler=cc.Class.extend({_timeScale:0,_updatesNegList:[],_updates0List:[],_updatesPosList:[],_hashForUpdates:[],_hashForSelectors:[],_currentTarget:null,_currentTargetSalvaged:!1,_updateHashLocked:!1,ctor:function(){},_removeHashElement:function(a){a.Timer=null;a.target=null;cc.ArrayRemoveObject(this._hashForSelectors,a)},_findElementFromArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c].target==b)return a[c];return null},_removeUpdateFromHash:function(a){if(a=this._findElementFromArray(this._hashForUpdates,
a.target))cc.ArrayRemoveObject(a.list,a.entry),a.entry=null,a.target=null,cc.ArrayRemoveObject(this._hashForUpdates,a)},_init:function(){this._timeScale=1;this._updatesNegList=[];this._updates0List=[];this._updatesPosList=[];this._hashForUpdates=[];this._hashForSelectors=[];this._currentTarget=null;this._updateHashLocked=this._currentTargetSalvaged=!1;return!0},_priorityIn:function(a,b,c,d){d=new cc.ListEntry(null,null,b,c,d,!1);if(a){for(var e=!1,f=0;f<a.length;f++)if(c<a[f].priority){a=cc.ArrayAppendObjectToIndex(a,
d,f);e=!0;break}e||a.push(d)}else a=[],a.push(d);this._hashForUpdates.push(new cc.HashUpdateEntry(a,d,b,null))},_appendIn:function(a,b,c){c=new cc.ListEntry(null,null,b,0,c,!1);a.push(c);this._hashForUpdates.push(new cc.HashUpdateEntry(a,c,b,null))},setTimeScale:function(a){this._timeScale=a},getTimeScale:function(){return this._timeScale},tick:function(a){this._updateHashLocked=!0;1!=this._timeScale&&(a*=this._timeScale);for(var b,c=0,c=0;c<this._updatesNegList.length;c++)b=this._updatesNegList[c],
!b.paused&&!b.makedForDeletion&&b.target.update(a);for(c=0;c<this._updates0List.length;c++)b=this._updates0List[c],!b.paused&&!b.makedForDeletion&&b.target.update(a);for(c=0;c<this._updatesPosList.length;c++)b=this._updatesPosList[c],!b.paused&&!b.makedForDeletion&&b.target.update(a);for(var d,c=0;c<this._hashForSelectors.length;c++){d=this._currentTarget=this._hashForSelectors[c];this._currentTargetSalvaged=!1;if(!this._currentTarget.paused)for(d.timerIndex=0;d.timerIndex<d.timers.length;d.timerIndex++)d.currentTimer=
d.timers[d.timerIndex],d.currentTimerSalvaged=!1,d.currentTimer.update(a),d.currentTimer=null;this._currentTargetSalvaged&&0==this._currentTarget.timers.length&&this._removeHashElement(this._currentTarget)}for(c=0;c<this._updatesNegList.length;c++)this._updatesNegList[c].makedForDeletion&&this._removeUpdateFromHash(b);for(c=0;c<this._updates0List.length;c++)this._updates0List[c].makedForDeletion&&this._removeUpdateFromHash(b);for(c=0;c<this._updatesPosList.length;c++)this._updatesPosList[c].makedForDeletion&&
this._removeUpdateFromHash(b);this._updateHashLocked=!1;this._currentTarget=null},scheduleSelector:function(a,b,c,d){cc.Assert(a,"scheduler.scheduleSelector()");cc.Assert(b,"");var e=cc.HASH_FIND_INT(this._hashForSelectors,b);e?cc.Assert(e.paused==d,"Sheduler.scheduleSelector()"):(e=new cc.HashSelectorEntry(null,b,0,null,null,d,null),this._hashForSelectors.push(e));if(null==e.timers)e.timers=[];else for(d=0;d<e.timers.length;d++){var f=e.timers[d];if(a==f._selector){cc.Log("CCSheduler#scheduleSelector. Selector already scheduled.");
f._interval=c;return}}f=new cc.Timer;f.initWithTarget(b,a,c);e.timers.push(f)},scheduleUpdateForTarget:function(a,b,c){var d=cc.HASH_FIND_INT(this._hashForUpdates,a);d?(1<=cc.COCOS2D_DEBUG&&cc.Assert(d.entry.markedForDeletion,""),d.entry.markedForDeletion=!1):0==b?this._appendIn(this._updates0List,a,c):0>b?this._priorityIn(this._updatesNegList,a,b,c):this._priorityIn(this._updatesPosList,a,b,c)},unscheduleSelector:function(a,b){if(!(null==b||null==a)){var c=cc.HASH_FIND_INT(this._hashForSelectors,
b);if(null!=c)for(var d=0;d<c.timers.length;d++){var e=c.timers[d];if(a==e._selector){e==c.currentTimer&&!c.currentTimerSalvaged&&(c.currentTimerSalvaged=!0);cc.ArrayRemoveObjectAtIndex(c.timers,d);c.timerIndex>=d&&c.timerIndex--;0==c.timers.length&&(this._currentTarget==c?this._currentTargetSalvaged=!0:this._removeHashElement(c));break}}}},unscheduleUpdateForTarget:function(a){null!=a&&(a=cc.HASH_FIND_INT(this._hashForUpdates,a),null!=a&&(this._updateHashLocked?a.entry.markedForDeletion=!0:this._removeUpdateFromHash(a.entry)))},
unscheduleAllSelectorsForTarget:function(a){if(null!=a){var b=cc.HASH_FIND_INT(this._hashForSelectors,a);b&&(!b.currentTimerSalvaged&&cc.ArrayContainsObject(b.timers,b.currentTimer)&&(b.currentTimerSalvaged=!0),b.timers.length=0,this._currentTarget==b?this._currentTargetSalvaged=!0:this._removeHashElement(b));this.unscheduleUpdateForTarget(a)}},unscheduleAllSelectors:function(){var a;for(a=0;a<this._hashForSelectors.length;a++)this.unscheduleAllSelectorsForTarget(this._hashForSelectors[a].target);
for(a=0;a<this._updates0List.length;a++)this.unscheduleUpdateForTarget(this._updates0List[a].target);for(a=0;a<this._updatesNegList.length;a++)this.unscheduleUpdateForTarget(this._updatesNegList[a].target);for(a=0;a<this._updatesPosList.length;a++)this.unscheduleUpdateForTarget(this._updatesPosList[a].target)},pauseTarget:function(a){cc.Assert(null!=a,"Scheduler.pauseTarget():entry must be non nil");var b=cc.HASH_FIND_INT(this._hashForSelectors,a);b&&(b.paused=!0);if(a=cc.HASH_FIND_INT(this._hashForUpdates,
a))cc.Assert(null!=a.entry,"Scheduler.pauseTarget():entry must be non nil"),a.entry.paused=!0},resumeTarget:function(a){cc.Assert(null!=a,"");var b=cc.HASH_FIND_INT(this._hashForSelectors,a);b&&(b.paused=!1);if(a=cc.HASH_FIND_INT(this._hashForUpdates,a))cc.Assert(null!=a.entry,"Scheduler.resumeTarget():entry must be non nil"),a.entry.paused=!1},isTargetPaused:function(a){cc.Assert(null!=a,"Scheduler.isTargetPaused():target must be non nil");return(a=cc.HASH_FIND_INT(this._hashForSelectors,a))?a.paused:
!1}});cc.Scheduler.sharedScheduler=function(){cc._sharedScheduler||(cc._sharedScheduler=new cc.Scheduler,cc._sharedScheduler._init());return cc._sharedScheduler};cc.Scheduler.purgeSharedScheduler=function(){cc._sharedScheduler=null};cc.Loader=cc.Class.extend({resourceCount:0,loadedResourceCount:0,timer:0,isLoadedComplete:function(){var a=cc.Loader.shareLoader();a.loadedResourceCount==a.resourceCount?a.onload?a.timer=setTimeout(a.onload,16):cc.Assert(0,"cocos2d:no load callback defined"):(a.onloading?a.timer=setTimeout(a.onloading,16):cc.LoaderScene.shareLoaderScene().draw(),a.timer=setTimeout(a.isLoadedComplete,16))},onResLoadingErr:function(a){cc.Log("cocos2d:Failed loading resource: "+a)},onResLoaded:function(){this.loadedResourceCount++},
getProgressBar:function(){var a=this.loadedResourceCount/this.resourceCount;return a=parseInt(100*a)},onload:void 0,onerror:void 0,onloading:void 0,preload:function(a){for(var b=cc.TextureCache.sharedTextureCache(),c=cc.AudioManager.sharedEngine(),d=cc.SAXParser.shareParser(),e=0;e<a.length;e++)switch(a[e].type){case "image":b.addImage(a[e].src);this.resourceCount+=1;break;case "bgm":c.preloadBackgroundMusic(a[e].src);this.resourceCount+=1;break;case "effect":c.preloadEffect(a[e].src);this.resourceCount+=
1;break;case "plist":case "tmx":case "fnt":d.preloadPlist(a[e].src);this.resourceCount+=1;break;case "tga":break;default:throw"cocos2d:unknow type : "+a[e].type;}this.isLoadedComplete()}});cc.Loader.shareLoader=function(){cc.shareLoader||(cc.shareLoader=new cc.Loader);return cc.shareLoader};
cc.LoaderScene=cc.Class.extend({_logo:new Image,ctor:function(){this._logo.src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABBAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU2RTk0OEM5OERCNDExRTE5NEUyRkE3M0M3QkE1NTlEIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU2RTk0OEM4OERCNDExRTE5NEUyRkE3M0M3QkE1NTlEIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjU1RUQ3MTcwQjQ4REUxMTE4RkUxODUzMUE4ODZGQ0I4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU1RUQ3MTcwQjQ4REUxMTE4RkUxODUzMUE4ODZGQ0I4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABQQEBAQEBQQEBQcFBAUHCQYFBQYJCggICQgICg0KCwsLCwoNDAwMDQwMDA8PEREPDxcWFhYXGRkZGRkZGRkZGQEGBgYKCQoTDQ0TFhEOERYZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZ/8AAEQgAyACgAwERAAIRAQMRAf/EAMQAAAEEAwEBAAAAAAAAAAAAAAcABAUGAQMIAgkBAQACAwEBAAAAAAAAAAAAAAABAwIEBgUHEAABAwICBAcKCQkFBQkAAAABAgMEAAURBiExEgdBUXEiMrITYXIzc5MUNBU2CIGRodFCUpLSVLFigqIjQ3QWF/DBUyRWwqOzNSbhY0SEpCV1RhgRAAIBAwAGBgYJBAIDAAAAAAABAhEDBCExQXESBVFhMnIzFZGhUhMUNLHB0eEiQmIjBoFTYxbwonMkJf/aAAwDAQACEQMRAD8A5loBUAqAVAKgM4UAsKAyE40BtDaRhtEJ2jspx0YnioRU9qjKTwUFTSpBHBQk8YUAqAVALCgFhQCoDFAKgFQCoDNALCgM4UAsKAzhQHoJoDY2nE0IY5nwlP2qTsjFbaO1Thxo0/kqaGFdJAW2/uR9lqWkvxtQP7xI7h4eQ0qZNFl7GPMYEmIsOsq4U6weIjgNTQxqMXGFIOkViZ1NJSRQkxhQCwoBYUAsKAxhQCwoDGFAIUB7CcaA9homgPYYVxUIqZDCuKgqZ7BXFQVPQYVxUFRyxFUVDRUpGLkTDsmBaIK5FyVstLSpCGhpW4SMNlIrPUVvS9BK+7pZcu50v993f5iiofi3y3KkW9a9DjMuEvaSptY5yVdktYOGusC4jc/7sMzbqri/Ohlcywoc7J14jFTRJ0NyUjQMfouDQe4dFTuMK7GREKTDvccvRuY+gft456STxjjT3aayNKND0RSDqqDNMblhQ4KgmouwVxUFTHYK4qCpgsKoDBZUKCp4KMKCp4IoSYTQDuO12hAFEYtm9c6zxHCxKlJQ6npJAUrA8R2QayRjpNgvGXPxo+w592mgijPQvOW/xo8m592mgUZn11lv8aPJufdpoFJGRe8tg+mjybn3aaB+I9O5my9EjrejvedSEj9mwlC07Su6VAADjqaox4Wy1bsN0F53mibnzN7jtvyDaGnZMiQOYuUmMkrUxFx6KBs4Lc4ODFWrFstSoT+53dhm6yHK+/GCwU2ZN5KJFobSoyEWd9Xm65SccStCNtWI17I2tIqDI7C3gZbanw3Lm0yh5SGy1PjrSFoejK0ELSdCtnh7lFoMZRTVGcO70N1MvJzqs55LCzYUK2psMYrcgFR4eFcZR0Ano6lcdZ00VRUpaeGRVI2Z7DMiodmO+aS9TrJStQx40lIOg0qmTwtGDest4+nDybn3aaCaMXrrLn40fYc+7UaBRmPXOXPxo8m592mgUYject4emj7Dn3aaBSRpXd8vnQmYCT+Ysf7NNAoxPsoKUuNELbWNpKknEEHhFQzJDBYw0VBkjwnXQkmbYgKWnlqUVyB9JxMl8nSe0Xif0jQyJS15WzJe2FSbRaJc2Mk7JeYaUpG0NY2tWNWQsznpSbNe7l2bTpOSi94//p5nn/Ttw8iay+Gu+y/QVeZY39yPpF/TzPP+nLh5E0+Gu+y/QPMsb+5H0jG6ZUzLZIwl3i0yoEVSw2l6QjYSVkYhIJ4dFYzszjrVC2zl2brpCSk+oLXu+7i5O9K6+ur2hcfI9tdCZTgxQqY8nT5u0fq/4ixqGgaToqZsnc+c8qetckuZGsTSbfbrgli1OebANojW4qSJGwkYAfsEqQnukUJLVb4EO1wYtst7KY8CGyiNFjoGCUNNJCUpA4gBQDgpSpJSoApIwKTqIOgigAtmW0Gw3Z6MlCVwZCVKabcAUhbDmhTawdCk/RI4qlNp1RhO2pqjOPd8+6lOUJAzNl1pRyjcHdhTIxUYElWnsVH/AA1fu1HvTp15uK1rUVW7jrwy7S9YNrVlXMl8jql2e1SZ8ZC+zW7HRtpSsDHA4ajhSFqctSqRey7Vp0nJRfWP/wCnmef9OXDyJrP4a77L9BT5ljf3I+kX9PM8/wCnLh5E0+Gu+y/QPMsb+5H0nh3IOdmW1vO5duCW0AqWrsFHADWcBiafDXV+V+glcxxpOiuR9JWyCCQdBGgg1UbZe7KjasEZR06XAOQLNSY10jZ0YE1gWI0p10JJ+0eETyiskVSBxJ9If8YvrGoZmjsrIrTbGS8vNMoDbfq9hWykYDaWgKUeUqOJrp8VUtRp0HzDmsnLKuN+0WHE1sHn0MKWltCnHFhDaAVLWo4BKUjEkniApWhKi26LWwAsQLx7we82Nly0uOMZZglSlyQMUsQkKAdkqGrtHTzUA9wcdc1mZLuz/StR9K5Ry1YllJ9uWmX2f0PoHl2yWjKllg5esUZES1W5pLEZlPAka1KP0lKPOUTrNah6xK9tyUBUd5uZG8s7vc031xewYdskFlSTsntnEFtoAjhLik0AOPd+3lZmvNubyTvEiPws5QYLVwt78xJQ5cbW4AEP6ek43iErPDoJ07VAE7O1uTc7Ot9tIMqDi+3hrKB00/Fp+ChDBA83b58SVa7rHTLtFwaMedFXqW2rhHEpJ5yTwGsoSpuKb1vjVV2lqOZFNXLcTvDct0pxcrKlyCVtvjU/CWr9m8ODtWDoUOXjFbdi87Fz9LPMz8SOdYpquR1dT+8vEfPzTu9peX25CXbRIgNxI60KxbMoDzgKB/OCtivSjlVyeGv4dRzc+VNcu941S4pVe7UFDE16JzlDOJGo4UFDjreQy0xnzMTTKEttiashCRgAVAKOA7pNcxlKl2W8+ocrk5YttvXwkrYx/wBORu+c65qnYbm0ZP8ASNYFiNKNdCSes/hE8orJFUwcSvSJHjF9Y1DM0djZKd/6Ry+OK3Rv+GK6rGX7Udx8q5lKmVc7z+ksgUDqq01VKoKN9+blWaxN5ehObNwvIPblPSREScFeVVzeTGvN5lf4Y8C1s6X+N4PvLruy7MNW/wC4Pfu97u2t3ORmHJrQRma/hE+7KUOe2gjFiP3OzQcVD6xNeCd2Fl26RGHo8d6Q23IlqUiK0tQC3VISVqCE61bKRicNQoSbvOhx0BC5jsdszVFiW+8gv2yNMZnvQtHZyFxiVNId+s2lzBZT9IgY6KA33O2W67TbZcpKNm52d8ybdNbwDre2kodbx4WnkEpWjUdesCgJMyUEEK0pIwIPCDwUAEb1G9WXWXC/dtOEtHjbVzk/IamhBTt4OUW94WT5NnbQDmC1hc6wunpFaR+0j4/VdSNHdwq6H4o8O1ajSuv3U1P8r1nHUJy4W2Q1d46FtuW+S2Q6QRsPoO2lCuI8w6KrUmnXoNqcFOLi9Ukdq2i5sXq1QbvGOLE9hEhHc2xiR+icRXVW5qcU1tR8qybDs3ZQf5XQe1mUHH2872/zH/GHqprmcvxpbz6byr5S33SSsXs5F75zrmqNhu7Rk/0jWDLUaE66Ek/Z/CJ5RWSKpA4lekSPGL6xqGZo6syvMWzk21qQcFt2ttSDxKSziPlFdXYdLCf6T5VnxUs6aep3PrHeRs4R822Ji5JKW5bf7K4s4+DeSNJ71Q5wrHFyFdhXo1mXNeXTw77guzLsv/m0HWRbeN7W/Dz+Yntsv2hwzXEK0oMWEoJYbPjXdnHlNc5k3feXGz6NyzFWPjxhtpV7ztty4IbS4++4G2m0qcdcVoSlCRtKUe4AMa1zfOW7Rm3Nmad9mUt4NwivRsiz5kyx5WU5oQWgwtO3s8Cn1c7aw52odGpB1L52eOoAvO+7SoNbVzYfLyWHkOlhwsPhCgrYdSAVIVhqUARooDZ533aAoGfUhMuJNH75stLP5zZxHyGpBU408xZDUlCtlTSgva7g1/JWUZcLTK7ttTg49IJ7tlmNfsn50ukaImO9fJ0i/wBuYSnZKWoqipoYcBdbDiv0qmvFJlUY+7hGuwdbibybhlB62OKxdtMlSEA6+xfHaJ+JW1XuctuVt06GcX/JsfgyFP2160FavROcOPt53t/mP+MPVTXM5fjS3n03lXylvuknYvZyL3zvXNUbDe2jJ/pGsCxGhGuhJPWjwieUVkiuQOJXpEjxi+sahmSOmrA4U5Ngf/FJ/wCDXVWH+wu6fMc23/70n/k+s57y7me55aVNNuXgi4RXIkhsk4YLSQlY/OQTiK5qzflbrw7UfQ8vCt5CjxrsSUkdP+67Y0W3KV0zE4nCReJfm7Kzr83hjD5XFq+KqTdDHmmI9fbK9Ym3FNMXRSIs95s4KTDUcZGyeBS2wWx31AO5EC1yIMW2qitogwVsOQGWxshhcQgslvDolGGjuUBIGVjicaAY3i+s2W03C8vkdjbor0tYPCGUFeHwkYUABtwGYcxwrncbdmxl1gZyC8z2WS9jsyHCopkbB4yjZVs68E46qA6H85oCr5xfblWZqQ0oLS2+kpUOJQKT8tAD1TgWkoUAUqBSoHUQdBFAOIK2jJjsuAebrUllaODs18wjDi2TWUO0im+q23uAxuc27BvAzHlZw4DZfZCTwrhPkD9UmvS5bLhuuJzv8igrmLC50P6ToGvcOHOPt53t/mP+MPVTXM5fjS3n03lXylvuknYvZuL3zvXNUbDd2jJ/pGsC1GhGuhJP2jwieUVkiuQN5XpEjxi+sahmSOkLC7jlGC3wm2JSPhZrqLPgLunz3LS+Ll3/AKwc7sckR895fzdbEBKL3Dbiy7Q8rRg6kuBTZP1XRzT3cDXLH0NHSu6N2LG3d2KFGxQ7CbcjT2VDZW3MQ6rt0LSdIUlZ+KoJLyJXBUgiZObsvwnSxJusZt4HBSC4CQe7s44UBIx7pGmNB+I+3IZVqcaUFp+MUBA54juXnKlzszRIVcwzCURrDbz7aXD9jaoCZXHt6mokcx0Fm3qQqAMBiyWk7CCgjSkhOjRwaKAdedHHRQA0v2abbbHrxZpk5ptLj6X2EFeJSoqClDAY4Yg0BCx7jGlt9rFfQ+3wqbUFAcuGqgN6JOytKhrCgR8BonpMZqqYNV4Wz3jpSUc1uZMcJA4RLi9of1jXoY74cldZz+dHj5bLqX0MPZroDganH2872/zH/GHqprmcvxpbz6byr5S33STsXs3G753rmqNhvbRk/wBI1gWI0I10JJ+0dNPKKyRXMG8n0h/xi+sahmSOhMtOA2C1tnUYbSfjQBXVY6raW4+fZypkzf6vrIj3epPmWasw29RwU5ExA7rD+H+1XKzVGfQYOsUw/RoTMK6TLjEV2SbkEruEcdBchsbKXxxLUjmr+tgDrFQZFYzvmKUP/ZoDpa2k7U11BwVgrU2CNWjSqgBfLl2m1kJnzGIqjpCHFAKP6IxNQCVy5fm2ZHneXri06tPhW2VhSVJ4lo4vgoAzWq9N3WGiSgbC+i80dOwsaxycVSB95yeOgKTmzM8o9pbbc6WW0AiXJScD3UJV9EDhNQwAq73OyC4LSmfHUohO0UrCudw4qGI+WgNsGQ9CdRNgO4HWFIOKFjiOGgipARodwRMjNSUYgODSniUNBHwGo2kPUVDMRx94WApOsvwtrl81SDXoWvmI/wBDwLjry6b6pfSH010KPn5x9vO9v8x/xh6qa5nL8aW8+m8q+Ut90k7F7Nxu+c65qjYb20ZP9I1gWI0I10JJ+0eETyiskVSBvK9If8YvrGoZmg75ddwsls7kVrqiuoxn+3HccNn263p7yt5Gk+ot7ymVHZbnOSI3cwkI7RH6wFc9lw4bsl1nYYM+OxF9R0gJOnXWubYGN42YnLHFfmNEG5XB9bUUq07IHSXh+aMMO7UIMALrrr7q3nlqdecO044s7SlE8JJrIxqe4z8mG+iTFcWxIbO0262dlQI7ooKnSW6jOBv0VxL5Si4x9lqc2nQF449m6BwbWBB7tYmQS5MxTbDi0K5+ydjlPD8FSDlPPmcZF8nvW+A6pFmYWUc04GQtJwLi+NOPRFCGykYEcGAqSKkxYbw5apaErUTBdUEvtHUMdG2OIioJDdYlFKCwDiC6kp/TwolpRjclSLfUyGQoXT3hFuAgtRJStpWOgJixdkknuEVv2NOSjnr74eVvpkvpYcGcw2KVcPVMS4x5Vy2FOKjR1h1SUI1lRRiEgd017qvQb4U9JxksO9G37yUXGPWco7zfb/MX8Yeqmudy/GlvPonKflLfdJOxezkXvneuao2G9tGT/SNYFiNCNdCSetHhE8tZIqkDiV6Q/wCMX1jUMzQZ7C7hZ7cMf/DN9UV0+O/247jj8yP7st5Us5qdtWYrXmGOMFpLbgI/xIygcPhTXk8yt0mpdJ7XJrtbTj7LOiI1zZmxmJsdQUxJbQ+0ocKXEhQ/LXm1PYAdvsC03a0I/cmK4tHFtKdwP5BREMGsGKZLgQPhrKKqyq7c4FUJsnc5miNYvXrsJIihrt1thYL6WsMdtTevDDTx1tvEdKnjrm8XOgy3TrdgZ6biJJ7OZGfbcHBzE9ok/AU1ptUPatz4lUMub7g5EynfZbKsHWYThQRrBXggH4NqoLDnzKWTrjmma3brYx20lYKsCQlKUp1qUo6ABx1fasuZ52ZmKytJI5y3eXjKDjbV0YSjtklTLragttYGg4KHCOEVlex3AqxOYK86FBcTs4itc9MO9hnMW+HapU4rKezYccQ2hTjitlIOASnEkmpjokqmGRGUrbjHW0CbMUS7tzZN6uKfNnLpJedS2VjtSHFFasQk6AAcDjUuVXUm1bUIKPQkH/crlL1FlxV7lN7NxvYDiQoYKRET4NP6Z55+Cvc5dY4IcT1yOG/ked7697uL/DD6fuAhvO9v8x/xh6qa8rK8aW86vlPylvuknYvZyN3znXNUbDe2jJ/pGsCxDdOuhJP2jwieWskVTBxJ9Jf8YvrGoMwr2V/C1wRjqYb6orpsfw1uOVyl+7Lea8zwvWtmebbG1Ij/AOYZHCSnpD4U1Xm2veW30rSWYF33V1V1PQTG6zMomWVVmeX/AJq2H9kDrVHWcR9hXN+KubZ1CHe9CyOX/Ljdyho7SdYlKddbTpUqG7htqA4ezUAo9ypQaAxaJSY8hDh4CCDyVnCXCzVyLbnBo6Onb9LdIy07FbgLTeH4xjrUVJMdJUjYUsfSOjUnCvTeVHhOajy25x9QPN1kBcm+XLMpSRCtUZUdtw6lSpfMSgHjSjaUa8uTqzqbEOGKQTpMZN9gXCxFQSq6RHojSidAdWnFv9cCsC5go3Z5z/kW9uuXCKpY2Vwp0foOoKVDawx+klSdRrdxryizxOZYcrmlExvW3lQc4IiRYEdTEKHtrSXikuLW4ACSE4gAAaKsychTWgo5fgzhLiYJLVbHr3dGIDIwDitp5zgQ0nStZ5BXnnQIMK5DacdghuO0nAFRwCWmxrPcCRQSaSqyp5atDu8rOyA4lQsMHBySo6MI6FaE98+r+2itvEx3enTYtZ5fNM9YlhzfbloW/wC46mSlCUJQ2kJbSAlCE6AlIGAAHEBXSpUPmrk5aWcgbzfb/Mf8YeqmuZy/GlvPpvKvlLfdJKxezcbvneuao2G9tGb/AEjWBYhunXQkn7R4RPLWSK5A4lekv+MX1jUMyQTLUcLbC8Q31RXS4/hx3HMZPiy3kih4pNXlFCmSzJylmBm829P+VdUVdmNCSFeEaPLrFc/m4/u51XZZ0WDke8hR9pBgtF/blMx7rbXQptY2kEgHWMFIWk/EoGtA3yBu+7HLuY31Tcu3JnLtwdJU9ap215kVnWWHk4lsE/QUNHBWRDQ2hbkJbLqF5lzXaoNvxxUITplSFpGsNowSMeWhHCi6retFvgxrFlyOYtihEqaDhBefdV033jwrV8gqCRki4gyCy2rntALUoHDZOPNHLQkhs62fLub5SJ7MlNmzYpOFxeUP8nKIACVqA0odI6RojFopB3bXFC9qferazGGtxDqnlEfmoSASakJE9AhW20MG32VC3FPkCTMdA7Z8jUAB0ED6vx0pXQRKUYqregrt/uUi6SW8r2IGTIkOBuStrSHF46Gkn6idajw8gqyMG3wrS2a0rqUXdufhhHT9/wBgdcjZdi5PszduaKVzHCHp8kfvHiMNH5qNSf8AtrqMXGVmFNu0+ac25lLMvOX5V2V1fay5Nv48NX0PNTOSt5Z2s/ZiPHMPVTXLZnjS3n1TlHydvuknY/ZuL3zvXNUbDf2jN/pGsCxDdOuhJPWfwieUVkiuQOZPpL/jF9Y1DMkEy1/8theIb6orpcfw47jmMnxZbx5V5QaJkRmdGciyBtNuDXwpI1KHdFV3bSuR4WWWrrtS4kVODcLpkycppaS/b3zipGpKwPpIP0Vjhrnb9iVqVGdLYyI3Y1Rf4GYrfc2g5GfGJ6Ta+aoHiIqgvHT60vtFAOyo6ULGghQ1HEUBGC9yW21tOjF9PNS5xHuioA3Yujkdt3Y0vunEuHgHz0A1MgkkqViTpJOvGgPbRU5tFOylCBi46rmoSONSjoFTGLZXcuxhrIO4356W4LNlxK5EiSeyXKbB7RzHQUND6KeNXDyVbFaeGOls1pKv47rSitn29YUMh5JYyvH88l7L17kJwccGlLKD+7Qesrh5K97Bw1aXE+0cbzrmUsr8EPDXr3l7Q6RXpJnMyttDtqQRQqaOXt4itvPF/Vxyz1U1yuZ40t59W5P8na7pL2P2bi9871zWvsN/aMn+kawLEaE66Ek9Z/CJ5RWSK5A5k+kv+MX1jUMyQTLX/wAsh+Ib6orpcfw47jl8nxZbxyp1CdZq5yRUkzQua2ngqt3UWK02MJkuLKZVHktJcaVrSeA8YPAaou3IyVJI2LUJwdYsqUiE7Ce7e3OqwGoY88dziUK8e7ZUXoeg9q1e4u0qMdxc0SmeZICgRoKmzgfhSdFa9DYqSHr2FIVtuSQlZ19olST8gNRwmLl1Hs3W2p6U5HIhK1H8gqeEx949iGz2ZLez6Ow5Kc4FOnsm/iGKjWSojBq49qiM1vXjMCktyHUx4QOIQBsNDkSNKjy1ZGEp9RXJ27OnXIIOVxZsvt4xG+0lrGDsxzAuEcQ+qnuCvWxVbtalp6Tns93sntOkegusa/tKw/urfV5M8WeJKJLsXGO7qVge7Vikac7XSPkuYjEHEVYmac7JzTn045yvh45R6qa5bM8aW8+mcoVMO33Scsfs5G753rmtfYb20ZP9I1gWI0J10JJ20eETyiskVzB1K9Jf8YvrGoZkgl2wY2yGP+4b6orpsfw1uOYyfFlvNrkfa1Gs3CpWp0GbsFZ1VTK0y6N1DJy3O8RqiVhs2I5CQ0ctrx+iaolitmxHMQ0ds63Okgnu1S8RlyzIjc2JR4FCsHhyM/jYmU5fUfrU+DkQ82I8ZsCknFLenjw+erI4bKpZ8SUYs0jRoNXRxmjUuZaZMxbO+CDgavjYZqTyETsW2upAxxFbEbLNK5fROxo5RhtK1VfCFDzr1zi1Eyw8EJA/LVpqs53z0cc33o8ck9UVzGX40t59B5Z8rb7pO2P2ci9851zWvsNzaMn+kawLEaU66Ek5aPCJ5RWSK5g7k+kveMX1jUElsteaYbEJmPLbcS6ykNgtgKCgnUdYwr1sfPjGCUlqPJyOXylNyi1pHn83Wnif+wPnq7zG31lHltzpQv5utP1X/sD56eY2+seWXeoX832nif8AsD56eY2+seW3eoX83Wj6r32B89PMbfWPLbvSjH822f6j3kx89PMLRPlt3pRj+bLN9R7yY+enmFoeXXelGRm2zjUh7yY+enmFojy270o3oznZ060PeTHz08wt9Y8su9Q5Rnuyp+jIHI2Pnp5jb6zF8quvoHCd4FjTwSfJj71SuZW+srfJ7r2o3p3jWAa0yfJj71T5na6yt8lvP2TcneVl4a0yvJD71T5na6yp8hvPbH0m3+qGXkJJS3LWoDEI7MDE8WJVR80tU1Mw/wBfvt6XEE93uK7vdJlzcQG1y3VOlAOISDqGPcFeJdm5zcuk6qxZVq3GC/KqFysns5F753rmsdhntGT3SNYFiNCddCSdtHhE8orJFcgdyfSH/GL6xqCToHLvu62B7J9izVnjeDByqrMTPnduhvoQQWSAoc9x1G0vZUCoAaMagyoaIfu92PMGeoWU8oZ+hXq2m2u3W73hhtCxFQy4Gw2ENuKClr2gRioYDE0FCft/uzZDv8lVqyzvat1zvjiHFRYTTTS1KU2CTiG3lK2RhpwGigoV7J3u7wrllh/NWec6QspQE3GRaY3apS4lb0R1bLhLji20jFbatkDgGNTUUNc/cNlqZmPLOWcjbw7fmWffpLzMotJRhEYYa7VTyg24sq0AgJ0YmoFCzo92nd09dfUDO92Au+KeMNNvDTJeMgHZ7PYD+1tbWjCgoV/Lnu2OS5mcP5uzZCy9ZcnzhbJFzKNtDrqkocSvnrbDaChxGs44nDgoKHnMW5PdfaLDc7pb97tsuU+FFdkRbc2lnbkOtpKktJ2XlHFZGyMBSooD7KOSss5gtJn3fNsayTA8przF8IKthIBC+ctPSxrcsWITjWUlE8nNzr1mfDC07iprRL3ndTbY9gm33L2aI17btxSZbTSEgBClAHBSVK5wBxwOurbmEuByjLioa+PzmUr0bd204OWolJ25zLFqcbYuueI8GQ42l1LUhtDailXCAXNWNZywIR7U0nuNe1z29dTduy5JOlUyNf3NyE5otdkjXlmRbLpFcnNXII0hpnDa5gJCidpOzgrA41g8B+8UU9DVS6PPofDyuSi1KDo49Zav/wA8wdf8xvYHUfNk/frZ8qXteo83/a/8frMH3eYWySMxug8BMZOGPd59R5V+r1D/AGv/AB+sCN9tD9hvE+yylpcfgPqYW430VbJ0KGPGNNeXcg4ScXsOrx7yvW4zjqki3WT2cjd851zWOwz2jJ7pGsCxGka6Ek5aPCJ5RWSK5A8lekP+MX1jQkPm++SH91m5xo6extS0/wC4j/NUGRj3VJIiZwzGoaNrL8hPxuIqGCF92d8Rt8tpeGA2Wp2nlZWKEl13ny+13BxmCccM6XNzDllzPnoiAf8Au3PCNvjy68NGyJXyx1ijB5sjwHvEsSNHteteP/m1GgD/AHXzLOLO+XIDd3hW69XW+RpbQnOBCeyTHjHbw1kYtFPNxwNESAvMnu85jsFguGYIt6tF4ZtbZkS40BxZdSynSpQ2k7J2Rpwx1aqVIKRlnIdxzPCduLUqNCgtOdkHpRI2lgAkDAcGPDW5Yw5XVxVSSPLzua28WSg1KUmtSL5GtbeScj5it8y5xJLl1U0GEx1YkqBCQnA6SeGt1WlYsSTkm5U1HiTyJZubanCElG3WtSv76HzIzJCWrSRbWh8SlVRzTxF3Ub38aTWPKvtsJNtmqF5yYcfB2B9A+FLNelbS47fcOdyLcnZyF/mX1mjMN4uWTswHNiHHpWXbkER7xC2irsXEjZbdaBOAxw/tjWORJ2LnvFphLX1GeDjxzsb4eSUbsNMJdK6GOsmSbzcZUvOV4dcbXdEBq227aPZsQ0nFJ2dW0rj+erMNSm3dn+bUuoq5soWoRxrS7Hal0yAhn9wu50vrh+lLUfkFeJmeNLednylUxLa/STNk9nI3fOdc1r7Dd2jJ7pGsC1Gka6Ek1afCp5RWSK5A+k+kP+MX1jUEhi3syg7u93YNE+Ctyh/umaEmPd2lCNme+LB6VlfT8a01DJoRW4WQI+9G2u46m5fytKoSWrP8wObnI7GOrNU9fxyZJ/voQU3cW+GN6FjdB6Ikau6wujCPFpfA33Mv4/8A2Za//UmgGe+J1L+8zMrqiOdJQdPiUCiBbN0EkMZG3nNg+FtaRo8W9QFTiv4brZkfHQZyTh+kivSj8o+8eLcj/wDRi/0FGbw7VvDDpp/KK89az2JamXfeg/298jKJ1QW0/rKr0OZeIu6jyORw4bL7zLxCmkXPLJx8HZ3UY8oar0IP8dvunjXrT91e/wDIjXdmJmZr2mHckKbyzbgHNjHDzt5Q0aR9FP8AbXS7bleu0kqW4+snGlHFscUHW9P/AKo35ZXdLG9KsT22/Z2f21rmKPRQo6WT3U41lixnbk4Ps7H9RhzCNvIhG6tFx9pfWCnN6+0zPd3PrSVH5BXi5fjS3nT8vVMeC/SWGy+zkbvnOuao2GztGLx5xrBliNYoSStscCXE8tSiuRQ5PpD2P+IvrGhIQrNvdvFqs8OzSbZAubMBHZRnZaCVpbGpJ1jQNGNQZVPCt7N3Rf4t/hWyBCcYjLhPRWUENPNOK2zt4YHEEDAilBUk077rqyVOQ7Dao0nAhD7aFBSSeHRhjShJE5f3rXux25y1vwod1jLkOSkeeIJKXHlFa9Wg4qJOrRQip6uG9a6yp9quUK12+2y7S8t5tUdsgOBxGwpC9WKSmgqSv9brkHe3Tl61CRjtB7ZVt7XHtdLH4aCpE2rerc4D1zlS7Vb7nLukozX3pLelKikICEa8EAJGFAbrvvevFztEy0RbXAtjU9BZkvRUELLZ0EDUNI0Y0oSVSzZmmWeK5CQy1IirX2gbeBwCuHVyVt2MqVqPDSqNLIw43ZcTbT6hzMze9MiuxTborYdTslxCecNOOI0VnPNclThSMLWAoSUuKToOVZ7luYFy3RXCAAFLBUcBy1n5i3rimVLlkVqlJDN7OF0cuUe4pS02YyFNNsJB2NhfSB4dOFVvNnxqXQXR5fbVtw11JD+oVz/CsfGv56u8zn0Gv5Ra6WY/qFc+CKxjwaV/PTzOfQPKLXSyqSpT02S9LkHaffWVuEaBia0JycpNvWz0oQUIqK1IuNnXhYI6fznOuaxeobRs6cVGsSxGuhJvZeLZBoYtGHIlokuqefYPaK0qKFFIJ48BU1IozItuX+GOvyqqnQNJn1bl78O55VVNA0i9W5e/Dr8qqo0DSL1bl38OvyqqaBpF6ty9+Hc8qqmgaRercu/hnPKqpoGkXqzLv4ZflVU0DSL1Zl78O55VVToGkXqzLv4dflVVGgaRercvfh3PKqpoFGL1bl38O55VVToGkXq3L34dzyqqaBpF6ty9+HX5VVRoGkx6ty9+Hc8qqmgaTCrZYfosL+FxVBRm9x9sIS0ykIaQNlCE6AAKE0GajiagkxQkVAKgFQCoBUAqAVAKgFQCoBUAqAVAKgFQCoBUAqAVAf/Z";this._logo.width=
160;this._logo.height=200},draw:function(){var a=(cc.canvas.width-this._logo.width)/2,b=(cc.canvas.height-this._logo.height)/2;cc.renderContext.clearRect(0,-cc.canvas.height,cc.canvas.width,cc.canvas.height);cc.renderContext.fillStyle="#202020";cc.renderContext.fillRect(0,-cc.canvas.height,cc.canvas.width,cc.canvas.height);cc.drawingUtil.drawImage(this._logo,new cc.PointMake(a,b));cc.renderContext.fillStyle="#b2b4b3";cc.renderContext.font="Bold 12px Verdana";cc.renderContext.textAlign="left";cc.drawingUtil.fillText("Loading "+
cc.Loader.shareLoader().getProgressBar()+"%",a+30,b-15)}});cc.LoaderScene.shareLoaderScene=function(){cc.shareLoaderScene||(cc.shareLoaderScene=new cc.LoaderScene);return cc.shareLoaderScene};cc.DrawingPrimitive=cc.Class.extend({_renderContext:null,setRenderContext:function(a){this._renderContext=a},getRenderContext:function(){return this._renderContext},ctor:function(a){this._renderContext=a},drawPoint:function(){cc.log("DrawingPrimitive.drawPoint() not implement!")},drawPoints:function(){cc.log("DrawingPrimitive.drawPoints() not implement!")},drawLine:function(){cc.log("DrawingPrimitive.drawLine() not implement!")},drawPoly:function(){cc.log("DrawingPrimitive.drawPoly() not implement!")},
drawCircle:function(a,b,c,d,e){if(!("undefined"==d||0==d)){for(var f=2*Math.PI/d,h=[],g=0;g<=d;g++){var i=g*f,j=b*Math.cos(i+c)+a.x,i=b*Math.sin(i+c)+a.y,j=new cc.Point(j*cc.CONTENT_SCALE_FACTOR(),i*cc.CONTENT_SCALE_FACTOR());h.push(j)}e&&(a=new cc.Point(a.x*cc.CONTENT_SCALE_FACTOR(),a.y*cc.CONTENT_SCALE_FACTOR()),h.push(a));this.drawPoly(h,d+2,!0,!1)}},drawQuadBezier:function(){cc.log("DrawingPrimitive.drawQuadBezier() not implement!")},drawCubicBezier:function(){cc.log("DrawingPrimitive.drawCubicBezier() not implement!")}});
cc.DrawingPrimitiveCanvas=cc.DrawingPrimitive.extend({drawPoint:function(a,b){b||(b=1);var c=new cc.Point(a.x*cc.CONTENT_SCALE_FACTOR(),a.y*cc.CONTENT_SCALE_FACTOR());this._renderContext.beginPath();this._renderContext.arc(c.x,-c.y,b*cc.CONTENT_SCALE_FACTOR(),0,2*Math.PI,!1);this._renderContext.closePath();this._renderContext.fill()},drawPoints:function(a,b,c){if(null!=a){c||(c=1);this._renderContext.beginPath();for(b=0;b<a.length;b++)this._renderContext.arc(a[b].x*cc.CONTENT_SCALE_FACTOR(),-a[b].y*
cc.CONTENT_SCALE_FACTOR(),c*cc.CONTENT_SCALE_FACTOR(),0,2*Math.PI,!1);this._renderContext.closePath();this._renderContext.fill()}},drawLine:function(a,b){this._renderContext.beginPath();this._renderContext.moveTo(a.x*cc.CONTENT_SCALE_FACTOR(),-a.y*cc.CONTENT_SCALE_FACTOR());this._renderContext.lineTo(b.x*cc.CONTENT_SCALE_FACTOR(),-b.y*cc.CONTENT_SCALE_FACTOR());this._renderContext.closePath();this._renderContext.stroke()},drawPoly:function(a,b,c,d){"undefined"==d&&(d=!1);if(null!=a){if(3>a.length)throw Error("Polygon's point must greater than 2");
b=a[0];this._renderContext.beginPath();this._renderContext.moveTo(b.x*cc.CONTENT_SCALE_FACTOR(),-b.y*cc.CONTENT_SCALE_FACTOR());for(b=1;b<a.length;b++)this._renderContext.lineTo(a[b].x*cc.CONTENT_SCALE_FACTOR(),-a[b].y*cc.CONTENT_SCALE_FACTOR());c&&this._renderContext.closePath();d?this._renderContext.fill():this._renderContext.stroke()}},drawCircle:function(a,b,c,d,e){this._renderContext.beginPath();this._renderContext.arc(0|a.x,0|-a.y,b,-c,-(c-2*Math.PI),!1);e&&this._renderContext.lineTo(0|a.x,
0|-a.y);this._renderContext.stroke()},drawQuadBezier:function(a,b,c,d){for(var e=[],f=0,h=0;h<d;h++){var g=Math.pow(1-f,2)*a.x+2*(1-f)*f*b.x+f*f*c.x,i=Math.pow(1-f,2)*a.y+2*(1-f)*f*b.y+f*f*c.y;e.push(new cc.Point(g*cc.CONTENT_SCALE_FACTOR(),i*cc.CONTENT_SCALE_FACTOR()));f+=1/d}e.push(new cc.Point(c.x*cc.CONTENT_SCALE_FACTOR(),c.y*cc.CONTENT_SCALE_FACTOR()));this.drawPoly(e,d+1,!1,!1)},drawCubicBezier:function(a,b,c,d,e){for(var f=[],h=0,g=0;g<e;g++){var i=Math.pow(1-h,3)*a.x+3*Math.pow(1-h,2)*h*b.x+
3*(1-h)*h*h*c.x+h*h*h*d.x,j=Math.pow(1-h,3)*a.y+3*Math.pow(1-h,2)*h*b.y+3*(1-h)*h*h*c.y+h*h*h*d.y;f.push(new cc.Point(i*cc.CONTENT_SCALE_FACTOR(),j*cc.CONTENT_SCALE_FACTOR()));h+=1/e}f.push(new cc.Point(d.x*cc.CONTENT_SCALE_FACTOR(),d.y*cc.CONTENT_SCALE_FACTOR()));this.drawPoly(f,e+1,!1,!1)},drawImage:function(a,b,c,d,e){switch(arguments.length){case 2:this._renderContext.drawImage(a,b.x,-(b.y+a.height));break;case 3:this._renderContext.drawImage(a,b.x,-(b.y+c.height),c.width,c.height);break;case 5:this._renderContext.drawImage(a,
b.x,b.y,c.width,c.height,d.x,-(d.y+e.height),e.width,e.height);break;default:throw Error("Argument must be non-nil");}},drawStar:function(a,b,c,d){a=a||this._renderContext;a.save();a.translate(b.x,-b.y);a.rotate(cc.DEGREES_TO_RADIANS(45));d instanceof cc.Color4F&&(d=new cc.Color3B(0|255*d.r,0|255*d.g,0|255*d.b));b="rgba("+d.r+","+d.g+","+d.b;a.fillStyle=b+",1)";d=c/10;a.beginPath();a.moveTo(-c,0);a.lineTo(0,-d);a.lineTo(c,0);a.lineTo(0,d);a.lineTo(-c,0);a.closePath();a.fill();a.beginPath();a.moveTo(0,
-c);a.lineTo(-d,0);a.lineTo(0,c);a.lineTo(d,0);a.lineTo(0,-c);a.closePath();a.fill();d=a.createRadialGradient(0,0,d,0,0,c);d.addColorStop(0,b+", 1)");d.addColorStop(0.3,b+", 0.8)");d.addColorStop(1,b+", 0.0)");a.fillStyle=d;a.beginPath();a.arc(0,0,c,0,2*Math.PI,!1);a.closePath();a.fill();a.restore()},drawColorBall:function(a,b,c,d){a=a||this._renderContext;d instanceof cc.Color4F&&(d=new cc.Color3B(0|255*d.r,0|255*d.g,0|255*d.b));var d="rgba("+d.r+","+d.g+","+d.b,e=a.createRadialGradient(b.x,-b.y,
c/10,b.x,-b.y,c);e.addColorStop(0,d+", 1)");e.addColorStop(0.3,d+", 0.8)");e.addColorStop(0.6,d+", 0.4)");e.addColorStop(1,d+", 0.0)");a.fillStyle=e;a.beginPath();a.arc(b.x,-b.y,c,0,2*Math.PI,!1);a.closePath();a.fill()},fillText:function(a,b,c){this._renderContext.fillText(a,b,-c)}});cc.ORIENTATION_PORTRAIT=0;cc.ORIENTATION_PORTRAIT_UPSIDE_DOWN=1;cc.ORIENTATION_LANDSCAPE_LEFT=2;cc.ORIENTATION_LANDSCAPE_RIGHT=3;cc.CANVAS=0;cc.WEBGL=1;cc.drawingUtil=null;cc.renderContext=null;cc.canvas=null;cc.gameDiv=null;cc.renderContextType=cc.CANVAS;cc.originalCanvasSize=new cc.Size(0,0);window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame}();
window.console||(window.console={},window.console.log=function(){},window.console.assert=function(){});
cc.setup=function(){var a;switch(arguments.length){case 0:a=document.createElement("Canvas");a.setAttribute("id","gameCanvas");a.setAttribute("width",480);a.setAttribute("height",320);document.body.appendChild(a);cc.canvas=a;cc.renderContext=cc.canvas.getContext("2d");cc.gameDiv=document.body;cc.renderContextType=cc.CANVAS;break;case 1:a=arguments[0];var b=null,b=typeof a=="string"?document.getElementById(a):arguments[0];if(b instanceof HTMLCanvasElement){cc.canvas=b;cc.gameDiv=b.parentNode;cc.renderContext=
cc.canvas.getContext("2d");cc.renderContextType=cc.CANVAS}else if(b instanceof HTMLDivElement){a=document.createElement("Canvas");a.setAttribute("id","gameCanvas");a.setAttribute("width",b.width);a.setAttribute("height",b.height);b.appendChild(a);cc.canvas=a;cc.renderContext=cc.canvas.getContext("2d");cc.gameDiv=b;cc.renderContextType=cc.CANVAS}}if(cc.renderContextType==cc.CANVAS){cc.renderContext.translate(0,cc.canvas.height);cc.drawingUtil=new cc.DrawingPrimitiveCanvas(cc.renderContext)}cc.originalCanvasSize=
new cc.Size(cc.canvas.width,cc.canvas.height);console.log(cc.ENGINE_VERSION)};cc.setupHTML=function(a){var b=cc.canvas;b.style.zIndex=0;var c=cc.$new("div");c.id="Cocos2dGameContainer";c.style.position="relative";c.style.display="inline-block";a&&c.setAttribute("height",a.getContentSize().height);b.parentNode.insertBefore(c,b);c.appendChild(b)};
cc.Application=cc.Class.extend({ctor:function(){this._animationInterval=0;cc.Assert(!cc._sharedApplication,"CCApplication ctor");cc._sharedApplication=this},setAnimationInterval:function(a){this._animationInterval=a},setOrientation:function(a){return a},statusBarFrame:function(a){a&&cc.RectMake(0,0,0,0)},run:function(){if(!this.initInstance()||!this.applicationDidFinishLaunching())return 0;if(window.requestAnimFrame){var a=function(){cc.Director.sharedDirector().mainLoop();window.requestAnimFrame(a)};
cc.Log(window.requestAnimFrame);window.requestAnimFrame(a)}else{a=function(){cc.Director.sharedDirector().mainLoop()};setInterval(a,this._animationInterval*1E3)}},_animationInterval:null});cc.Application.sharedApplication=function(){cc.Assert(cc._sharedApplication,"sharedApplication");return cc._sharedApplication};
cc.Application.getCurrentLanguage=function(){var a=cc.LANGUAGE_ENGLISH,b=navigator.language,b=b.toLowerCase();switch(b){case "zh-cn":a=cc.LANGUAGE_CHINESE;break;case "fr":a=cc.LANGUAGE_FRENCH;break;case "it":a=cc.LANGUAGE_ITALIAN;break;case "de":a=cc.LANGUAGE_GERMAN;break;case "es":a=cc.LANGUAGE_SPANISH;break;case "ru":a=cc.LANGUAGE_RUSSIAN}return a};cc._sharedApplication=null;cc.SAXParser=cc.Class.extend({xmlDoc:null,parser:null,xmlList:[],plist:[],parse:function(a){a=this.getList(a);window.DOMParser?(this.parser=new DOMParser,this.xmlDoc=this.parser.parseFromString(a,"text/xml")):(this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async="false",this.xmlDoc.loadXML(a));null==this.xmlDoc&&cc.Log("xml "+this.xmlDoc+" not found!");a=this.xmlDoc.documentElement;if("plist"!=a.tagName)throw"Not a plist file";for(var b=null,c=0,d=a.childNodes.length;c<d&&!(b=a.childNodes[c],
1==b.nodeType);c++);return this.plist=this._parseNode(b)},tmxParse:function(a){a=this.getList(a);window.DOMParser?(this.parser=new DOMParser,this.xmlDoc=this.parser.parseFromString(a,"text/xml")):(this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async="false",this.xmlDoc.loadXML(a));null==this.xmlDoc&&cc.Log("xml "+this.xmlDoc+" not found!");return this.xmlDoc},_parseNode:function(a){var b=null;switch(a.tagName){case "dict":b=this._parseDict(a);break;case "array":b=this._parseArray(a);
break;case "string":b=a.firstChild.nodeValue;break;case "false":b=!1;break;case "true":b=!0;break;case "real":b=parseFloat(a.firstChild.nodeValue);break;case "integer":b=parseInt(a.firstChild.nodeValue,10)}return b},_parseArray:function(a){for(var b=[],c=0,d=a.childNodes.length;c<d;c++){var e=a.childNodes[c];1==e.nodeType&&b.push(this._parseNode(e))}return b},_parseDict:function(a){for(var b={},c=null,d=0,e=a.childNodes.length;d<e;d++){var f=a.childNodes[d];1==f.nodeType&&("key"==f.tagName?c=f.firstChild.nodeValue:
b[c]=this._parseNode(f))}return b},preloadPlist:function(a){if(window.XMLHttpRequest){var b=new XMLHttpRequest;b.overrideMimeType&&b.overrideMimeType("text/xml")}else b=new ActiveXObject("Microsoft.XMLHTTP");null!=b?(b.open("GET",a,!1),b.send(null),this.xmlList[a]=b.responseText,cc.Loader.shareLoader().onResLoaded()):alert("Your browser does not support XMLHTTP.")},getName:function(a){var b=a.lastIndexOf("/",a.length)+1,c=a.lastIndexOf(".",a.length);return a.substring(b,c)},getExt:function(a){var b=
a.lastIndexOf(".",a.length)+1;return a.substring(b,a.length)},getList:function(a){return null!=this.xmlList?this.xmlList[a]:null}});cc.SAXParser.shareParser=function(){cc.shareParser||(cc.shareParser=new cc.SAXParser);return cc.shareParser};cc.AppController=cc.Class.extend({didFinishLaunchingWithOptions:function(){new cc.AppDelegate;cc.Application.sharedApplication().run();return!0},applicationWillResignActive:function(){cc.Director.sharedDirector().pause()},applicationDidBecomeActive:function(){cc.Director.sharedDirector().resume()},applicationDidEnterBackground:function(){cc.Application.sharedApplication().applicationDidEnterBackground()},applicationWillEnterForeground:function(){cc.Application.sharedApplication().applicationWillEnterForeground()},
applicationWillTerminate:function(){}});cc.AppController.shareAppController=function(){null==cc.sharedAppController&&(cc.sharedAppController=new cc.AppController);cc.Assert(cc.sharedAppController,"shareAppController");return cc.sharedAppController};cc.sharedAppController=null;cc.CCITEM_SIZE=32;cc._fontSize=cc.CCITEM_SIZE;cc._fontName="Marker Felt";cc._fontNameRelease=!1;cc.CURRENT_ITEM=3233828865;cc.ZOOM_ACTION_TAG=3233828866;cc.NORMAL_TAG=8801;cc.SELECTED_TAG=8802;cc.DISABLE_TAG=8803;
cc.MenuItem=cc.Node.extend({_listener:null,_selector:null,_isSelected:!1,getIsSelected:function(){return this._isSelected},_isEnabled:!1,getIsEnabled:function(){return this._isEnabled},setIsEnabled:function(a){this._isEnabled=a},initWithTarget:function(a,b){this.setAnchorPoint(cc.ccp(0.5,0.5));this._listener=a;this._selector=b;this._isEnabled=!0;this._isSelected=!1;return!0},rect:function(){return cc.RectMake(this._position.x-this._contentSize.width*this._anchorPoint.x,this._position.y-this._contentSize.height*
this._anchorPoint.y,this._contentSize.width,this._contentSize.height)},selected:function(){this._isSelected=!0},unselected:function(){this._isSelected=!1},setTarget:function(a,b){this._listener=a;this._selector=b},activate:function(){if(this._isEnabled)if(this._listener&&"string"==typeof this._selector)this._listener[this._selector](this);else this._listener&&"function"==typeof this._selector&&this._selector.call(this._listener,this)}});
cc.MenuItem.create=function(a,b){var c=new cc.MenuItem;c.initWithTarget(a,b);return c};
cc.MenuItemLabel=cc.MenuItem.extend({RGBAProtocol:!0,_disabledColor:new cc.Color3B,getDisabledColor:function(){return this._disabledColor},setDisabledColor:function(a){this._disabledColor=a},_label:null,getLabel:function(){return this._label},setLabel:function(a){a&&(this.addChild(a),a.setAnchorPoint(cc.ccp(0,0)),this.setContentSize(a.getContentSize()));this._label&&this.removeChild(this._label,!0);this._label=a},_orginalScale:0,setIsEnabled:function(a){this._isEnabled!=a&&(a?this._label.setColor(this._colorBackup):
(this._colorBackup=this._label.getColor(),this._label.setColor(this._disabledColor)));this._super(a)},setOpacity:function(a){this._label.setOpacity(a)},getOpacity:function(){return this._label.getOpacity()},setColor:function(a){this._label.setColor(a)},getColor:function(){return this._label.getColor},setIsOpacityModifyRGB:function(){},getIsOpacityModifyRGB:function(){},initWithLabel:function(a,b,c){this.initWithTarget(b,c);this._originalScale=1;this._colorBackup=cc.WHITE();this._disabledColor=cc.ccc3(126,
126,126);this.setLabel(a);return!0},activate:function(){this._isEnabled&&(this.stopAllActions(),this.setScale(this._originalScale),this._super())},selected:function(){if(this._isEnabled){this._super();var a=this.getActionByTag(cc.ZOOM_ACTION_TAG);a?this.stopAction(a):this._originalScale=this.getScale();a=cc.ScaleTo.create(0.1,1.2*this._originalScale);a.setTag(cc.ZOOM_ACTION_TAG);this.runAction(a)}},unselected:function(){if(this._isEnabled){this._super();this.stopActionByTag(cc.ZOOM_ACTION_TAG);var a=
cc.ScaleTo.create(0.1,this._originalScale);a.setTag(cc.ZOOM_ACTION_TAG);this.runAction(a)}}});cc.MenuItemLabel.create=function(a,b,c){var d=new cc.MenuItemLabel;3==arguments.length?d.initWithLabel(a,b,c):d.initWithLabel(a);return d};cc.MenuItemAtlasFont=cc.MenuItemLabel.extend({initFromString:function(a,b,c,d,e,f,h){cc.Assert(null!=a&&0!=a.length,"value length must be greater than 0");var g=new cc.LabelAtlas;g.initWithString(a,b,c,d,e);this.initWithLabel(g,f,h);return!0}});
cc.MenuItemAtlasFont.create=function(a,b,c,d,e,f,h){var g=new cc.MenuItemAtlasFont;g.initFromString(a,b,c,d,e,f,h);return g};
cc.MenuItemFont=cc.MenuItemLabel.extend({initFromString:function(a,b,c){cc.Assert(null!=a&&0!=a.length,"Value length must be greater than 0");this._fontName=cc._fontName;this._fontSize=cc._fontSize;this.initWithLabel(cc.LabelTTF.create(a,this._fontName,this._fontSize),b,c);return!0},setFontSizeObj:function(a){this._fontSize=a;this._recreateLabel()},fontSizeObj:function(){return this._fontSize},setFontNameObj:function(a){this._fontName=a;this._recreateLabel()},fontNameObj:function(){return this._fontName},
_recreateLabel:function(){this.setLabel(cc.LabelTTF.create(this._label.getString(),this._fontName,this._fontSize))},_fontSize:0,_fontName:""});cc.MenuItemFont.setFontSize=function(a){cc._fontSize=a};cc.MenuItemFont.fontSize=function(){return cc._fontSize};cc.MenuItemFont.setFontName=function(a){cc._fontNameRelease&&(cc._fontName="");cc._fontName=a;cc._fontNameRelease=!0};cc.MenuItemFont.fontName=function(){return cc._fontName};
cc.MenuItemFont.create=function(a,b,c){var d=new cc.MenuItemFont;d.initFromString(a,b,c);return d};
cc.MenuItemSprite=cc.MenuItem.extend({RGBAProtocol:!0,_normalImage:null,getNormalImage:function(){return this._normalImage},setNormalImage:function(a){a&&(this.addChild(a,0,cc.NORMAL_TAG),a.setAnchorPoint(cc.ccp(0,0)),a.setIsVisible(!0));this._normalImage&&this.removeChild(this._normalImage,!0);this._normalImage=a},_selectedImage:null,getSelectedImage:function(){return this._selectedImage},setSelectedImage:function(a){a&&(this.addChild(a,0,cc.SELECTED_TAG),a.setAnchorPoint(cc.ccp(0,0)),a.setIsVisible(!1));
this._selectedImage&&this.removeChild(this._selectedImage,!0);this._selectedImage=a},_disabledImage:null,getDisabledImage:function(){return this._disabledImage},setDisabledImage:function(a){a&&(this.addChild(a,0,cc.DISABLE_TAG),a.setAnchorPoint(cc.ccp(0,0)),a.setIsVisible(!1));this._disabledImage&&this.removeChild(this._disabledImage,!0);this._disabledImage=a},initFromNormalSprite:function(a,b,c,d,e){cc.Assert(null!=a,"");this.initWithTarget(d,e);this.setNormalImage(a);this.setSelectedImage(b);this.setDisabledImage(c);
this.setContentSize(this._normalImage.getContentSize());return!0},setColor:function(a){this._normalImage.setColor(a);this._selectedImage&&this._selectedImage.setColor(a);this._disabledImage&&this._disabledImage.setColor(a)},getColor:function(){return this._normalImage.getColor()},setOpacity:function(a){this._normalImage.setOpacity(a);this._selectedImage&&this._selectedImage.setOpacity(a);this._disabledImage&&this._disabledImage.setOpacity(a)},getOpacity:function(){return this._normalImage.getOpacity()},
selected:function(){this._super();this._disabledImage&&this._disabledImage.setIsVisible(!1);this._selectedImage?(this._normalImage.setIsVisible(!1),this._selectedImage.setIsVisible(!0)):this._normalImage.setIsVisible(!0)},unselected:function(){this._super();this._normalImage.setIsVisible(!0);this._selectedImage&&this._selectedImage.setIsVisible(!1);this._disabledImage&&this._disabledImage.setIsVisible(!1)},setIsEnabled:function(a){this._super(a);this._selectedImage&&this._selectedImage.setIsVisible(!1);
a?(this._normalImage.setIsVisible(!0),this._disabledImage&&this._disabledImage.setIsVisible(!1)):this._disabledImage?(this._disabledImage.setIsVisible(!0),this._normalImage.setIsVisible(!1)):this._normalImage.setIsVisible(!0)}});cc.MenuItemSprite.create=function(a,b,c,d,e){var f=new cc.MenuItemSprite;if(e)f.initFromNormalSprite(a,b,c,d,e);else return d?cc.MenuItemSprite.create(a,b,null,c,d):cc.MenuItemSprite.create(a,b,c,null,null);return f};
cc.MenuItemImage=cc.MenuItemSprite.extend({initFromNormalImage:function(a,b,c,d,e){var a=cc.Sprite.create(a),f=null,h=null;b&&(f=cc.Sprite.create(b));c&&(h=cc.Sprite.create(c));return this.initFromNormalSprite(a,f,h,d,e)}});cc.MenuItemImage.create=function(a,b,c,d,e){if(4==arguments.length)return cc.MenuItemImage.create(a,b,null,c,d);var f=new cc.MenuItemImage;return f.initFromNormalImage(a,b,c,d,e)?f:null};
cc.MenuItemToggle=cc.MenuItem.extend({RGBAProtocol:!0,_opacity:0,getOpacity:function(){return this._opacity},setOpacity:function(a){this._opacity=a;if(this._subItems&&0<this._subItems.length)for(var b=0;b<this._subItems.length;b++)this._subItems[b].setOpacity(a)},_color:new cc.Color3B,getColor:function(){return this._color},setColor:function(a){this._color=a;if(this._subItems&&0<this._subItems.length)for(var b=0;b<this._subItems.length;b++)this._subItems[b].setColor(a)},_selectedIndex:0,getSelectedIndex:function(){return this._selectedIndex},
setSelectedIndex:function(a){if(a!=this._selectedIndex){this._selectedIndex=a;this.removeChildByTag(cc.CURRENT_ITEM,!1);a=this._subItems[this._selectedIndex];this.addChild(a,0,cc.CURRENT_ITEM);var b=a.getContentSize();this.setContentSize(b);a.setPosition(cc.ccp(b.width/2,b.height/2))}},_subItems:[],getSubItems:function(){return this._subItems},setSubItems:function(a){this._subItems=a},initWithTarget:function(a){this._super(a[0],a[1]);if(2==a.length)return!1;this._subItems=[];for(var b=2;b<a.length;b++)a[b]&&
this._subItems.push(a[b]);this._selectedIndex=4294967295;this.setSelectedIndex(0);return!0},initWithItem:function(a){this.initWithTarget(null,null);this._subItems=[];this._subItems.push(a);this._selectedIndex=4294967295;this.setSelectedIndex(0);return!0},addSubItem:function(a){this._subItems.push(a)},activate:function(){this._isEnabled&&this.setSelectedIndex((this._selectedIndex+1)%this._subItems.length);this._super()},selected:function(){this._super();this._subItems[this._selectedIndex].selected()},
unselected:function(){this._super();this._subItems[this._selectedIndex].unselected()},setIsEnabled:function(a){this._super(a);if(this._subItems&&0<this._subItems.length)for(var b=0;b<this._subItems.length;b++)this._subItems[b].setIsEnabled(a)},selectedItem:function(){return this._subItems[this._selectedIndex]},setIsOpacityModifyRGB:function(){},getIsOpacityModifyRGB:function(){}});
cc.MenuItemToggle.create=function(){var a=new cc.MenuItemToggle;1==arguments.length?a.initWithItem(arguments):a.initWithTarget(arguments);return a};cc.CCMENU_STATE_WAITING=0;cc.CCMENU_STATE_TRACKING_TOUCH=1;cc.CCMENU_TOUCH_PRIORITY=-128;cc.DEFAULT_PADDING=5;
cc.Menu=cc.Layer.extend({_color:new cc.Color3B,getColor:function(){return this._color},setColor:function(a){this._color=a;if(this._children&&0<this._children.length)for(a=0;a<this._children.length;a++)this._children[a].setColor(this._color)},_opacity:0,getOpacity:function(){return this._opacity},setOpacity:function(a){this._opacity=a;if(this._children&&0<this._children.length)for(a=0;a<this._children.length;a++)this._children[a].setOpacity(this._opacity)},_selectedItem:null,init:function(){if(this._super()){this.setIsTouchEnabled(!0);
var a=cc.Director.sharedDirector().getWinSize();this._isRelativeAnchorPoint=!1;this.setAnchorPoint(cc.ccp(0.5,0.5));this.setContentSize(a);var b=new cc.Rect;cc.Application.sharedApplication().statusBarFrame(b);var c=cc.Director.sharedDirector().getDeviceOrientation();a.height=c==cc.DEVICE_ORIENTATION_LANDSCAPE_LEFT||c==cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT?a.height-b.size.width:a.height-b.size.height;this.setPosition(cc.ccp(a.width/2,a.height/2));this._selectedItem=null;this._state=cc.CCMENU_STATE_WAITING;
return!0}return!1},initWithItems:function(a){if(this.init()){if(0<a.length)for(var b=0;b<a.length;b++)a[b]&&this.addChild(a[b],b);return!0}return!1},addChild:function(a,b,c){c=c||a._tag;this._super(a,b,c)},alignItemsVertically:function(){this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)},alignItemsVerticallyWithPadding:function(a){var b=-a;if(this._children&&0<this._children.length)for(var c=0;c<this._children.length;c++)b+=this._children[c].getContentSize().height*this._children[c].getScaleY()+
a;b/=2;if(this._children&&0<this._children.length)for(c=0;c<this._children.length;c++)this._children[c].setPosition(cc.ccp(0,b-this._children[c].getContentSize().height*this._children[c].getScaleY()/2)),b-=this._children[c].getContentSize().height*this._children[c].getScaleY()+a},alignItemsHorizontally:function(){this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)},alignItemsHorizontallyWithPadding:function(a){var b=-a;if(this._children&&0<this._children.length)for(var c=0;c<this._children.length;c++)b+=
this._children[c].getContentSize().width*this._children[c].getScaleX()+a;b=-b/2;if(this._children&&0<this._children.length)for(c=0;c<this._children.length;c++)this._children[c].setPosition(cc.ccp(b+this._children[c].getContentSize().width*this._children[c].getScaleX()/2,0)),b+=this._children[c].getContentSize().width*this._children[c].getScaleX()+a},alignItemsInColumns:function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);var c=-5,d=0,e=0,f=0,h;if(this._children&&0<this._children.length)for(b=
0;b<this._children.length;b++){cc.Assert(d<a.length,"");h=a[d];cc.Assert(h,"");var g=this._children[b].getContentSize().height,e=e>=g||isNaN(g)?e:g;++f;f>=h&&(c+=e+5,e=f=0,++d)}cc.Assert(!f,"");var i=cc.Director.sharedDirector().getWinSize(),j=h=e=d=0,l=0,c=c/2;if(this._children&&0<this._children.length)for(b=0;b<this._children.length;b++){var k=this._children[b];0==h&&(h=a[d],l=j=i.width/(1+h));g=k.getContentSize().height;e=e>=g||isNaN(g)?e:g;k.setPosition(cc.ccp(l-i.width/2,c-k.getContentSize().height/
2));l+=j;++f;f>=h&&(c-=e+5,e=h=f=0,++d)}},alignItemsInRows:function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);var c=[],d=[],e=-10,f=-5,h=0,g=0,i=0,j;if(this._children&&0<this._children.length)for(b=0;b<this._children.length;b++){var l=this._children[b];cc.Assert(h<a.size(),"");j=a[h];cc.Assert(j,"");var k=l.getContentSize().width,g=g>=k||isNaN(k)?g:k,f=f+(l.getContentSize().height+5);++i;i>=j&&(c.push(g),d.push(f),e+=g+10,g=i=0,f=-5,++h)}cc.Assert(!i,"");f=cc.Director.sharedDirector().getWinSize();
j=g=h=0;var e=-e/2,m=0;if(this._children&&0<this._children.length)for(b=0;b<this._children.length;b++)if(l=this._children[b],0==j&&(j=a[h],m=d[h]),k=l.getContentSize().width,g=g>=k||isNaN(k)?g:k,l.setPosition(cc.ccp(e+c[h]/2,m-f.height/2)),m-=l.getContentSize().height+10,++i,i>=j)e+=g+5,g=j=i=0,++h},registerWithTouchDispatcher:function(){cc.TouchDispatcher.sharedDispatcher().addTargetedDelegate(this,cc.CCMENU_TOUCH_PRIORITY,!0)},ccTouchBegan:function(a){if(this._state!=cc.CCMENU_STATE_WAITING||!this._isVisible)return!1;
for(var b=this._parent;null!=b;b=b.getParent())if(!b.getIsVisible())return!1;return(this._selectedItem=this._itemForTouch(a))?(this._state=cc.CCMENU_STATE_TRACKING_TOUCH,this._selectedItem.selected(),!0):!1},ccTouchEnded:function(){cc.Assert(this._state==cc.CCMENU_STATE_TRACKING_TOUCH,"[Menu ccTouchEnded] -- invalid state");this._selectedItem&&(this._selectedItem.unselected(),this._selectedItem.activate());this._state=cc.CCMENU_STATE_WAITING},ccTouchCancelled:function(){cc.Assert(this._state==cc.CCMENU_STATE_TRACKING_TOUCH,
"[Menu ccTouchCancelled] -- invalid state");this._selectedItem&&this._selectedItem.unselected();this._state=cc.CCMENU_STATE_WAITING},ccTouchMoved:function(a){cc.Assert(this._state==cc.CCMENU_STATE_TRACKING_TOUCH,"[Menu ccTouchMoved] -- invalid state");a=this._itemForTouch(a);a!=this._selectedItem&&(this._selectedItem&&this._selectedItem.unselected(),(this._selectedItem=a)&&this._selectedItem.selected())},onExit:function(){this._state==cc.CCMENU_STATE_TRACKING_TOUCH&&(this._selectedItem.unselected(),
this._state=cc.CCMENU_STATE_WAITING,this._selectedItem=null);this._super()},setIsOpacityModifyRGB:function(){},getIsOpacityModifyRGB:function(){},_itemForTouch:function(a){a=a.locationInView(a.view());if(this._children&&0<this._children.length)for(var b=0;b<this._children.length;b++)if(this._children[b].getIsVisible()&&this._children[b].getIsEnabled()){var c=this._children[b].convertToNodeSpace(a),d=this._children[b].rect();d.origin=cc.PointZero();if(cc.Rect.CCRectContainsPoint(d,c))return this._children[b]}return null},
_state:-1});cc.Menu.create=function(){var a=new cc.Menu;a.initWithItems(arguments);return a};cc.TMXOrientationOrtho=0;cc.TMXOrientationHex=1;cc.TMXOrientationIso=2;
cc.TMXTiledMap=cc.Node.extend({_mapSize:cc.SizeZero(),_tileSize:cc.SizeZero(),_properties:null,_objectGroups:null,_mapOrientation:null,_TMXLayers:null,_tileProperties:[],getMapSize:function(){return this._mapSize},setMapSize:function(a){this._mapSize=a},getTileSize:function(){return this._tileSize},setTileSize:function(a){this._tileSize=a},getMapOrientation:function(){return this._mapOrientation},setMapOrientation:function(a){this._mapOrientation=a},getObjectGroups:function(){return this._objectGroups},
setObjectGroups:function(a){this._objectGroups=a},getProperties:function(){return this._properties},setProperties:function(a){this._properties=a},initWithTMXFile:function(a){cc.Assert(null!=a&&0<a.length,"TMXTiledMap: tmx file should not be nil");this.setContentSize(cc.SizeZero());a=cc.TMXMapInfo.create(a);if(!a)return!1;cc.Assert(0!=a.getTilesets().length,"TMXTiledMap: Map not found. Please check the filename.");this._mapSize=a.getMapSize();this._tileSize=a.getTileSize();this._mapOrientation=a.getOrientation();
this.setObjectGroups(a.getObjectGroups());this.setProperties(a.getProperties());this._tileProperties=a.getTileProperties();var b=0,c=a.getLayers();if(c){this._TMXLayers={};for(var d=null,e=0,f=c.length;e<f;e++)if((d=c[e])&&d.visible){d=this._parseLayer(d,a);this.addChild(d,b,b);this._TMXLayers[d.getLayerName()]=d;var d=d.getContentSize(),h=this.getContentSize();h.width=Math.max(h.width,d.width);h.height=Math.max(h.height,d.height);this.setContentSize(h);b++}}return!0},layerNamed:function(a){return this._TMXLayers.hasOwnProperty(a)?
this._TMXLayers[a]:null},objectGroupNamed:function(a){if(this._objectGroups)for(var b=0;b<this._objectGroups.length;b++){var c=this._objectGroups[b];if(c&&c.getGroupName()==a)return c}return null},propertyNamed:function(a){return this._properties[a.toString()]},propertiesForGID:function(a){return this._tileProperties[a]},_parseLayer:function(a,b){var c=this._tilesetForLayer(a,b),c=cc.TMXLayer.create(c,a,b);a.ownTiles=!1;c.setupTiles();return c},_tilesetForLayer:function(a,b){var c=a._layerSize,d=
b.getTilesets();if(d)for(var e=null,f=d.length-1;0<=f;f--)if(e=d[f])for(var h=0;h<c.height;h++)for(var g=0;g<c.width;g++){var i=a._tiles[(g+c.width*h).toString()];if(0!==i&&i>=e.firstGid)return e}cc.Log("cocos2d: Warning: TMX Layer "+a.name+" has no tiles");return null}});cc.TMXTiledMap.create=function(a){var b=new cc.TMXTiledMap;return b.initWithTMXFile(a)?b:null};cc.TMXLayerAttribNone=1;cc.TMXLayerAttribBase64=2;cc.TMXLayerAttribGzip=4;cc.TMXLayerAttribZlib=8;cc.TMXPropertyNone=0;cc.TMXPropertyMap=1;cc.TMXPropertyLayer=2;cc.TMXPropertyObjectGroup=3;cc.TMXPropertyObject=4;cc.TMXPropertyTile=5;cc.TMXLayerInfo=cc.Class.extend({_properties:[],name:"",_layerSize:null,_tiles:[],visible:null,_opacity:null,ownTiles:!0,_minGID:1E5,_maxGID:0,offset:cc.PointZero(),getProperties:function(){return this._properties},setProperties:function(a){this._properties=a}});
cc.TMXTilesetInfo=cc.Class.extend({name:null,firstGid:0,_tileSize:cc.SizeZero(),spacing:0,margin:0,sourceImage:null,imageSize:cc.SizeZero(),rectForGID:function(a){var b=cc.RectZero();b.size=this._tileSize;var a=a-parseInt(this.firstGid),c=parseInt((this.imageSize.width-2*this.margin+this.spacing)/(this._tileSize.width+this.spacing));b.origin.x=parseInt(a%c*(this._tileSize.width+this.spacing)+this.margin);b.origin.y=parseInt(parseInt(a/c)*(this._tileSize.height+this.spacing)+this.margin);return b}});
cc.TMXMapInfo=cc.SAXParser.extend({_orientation:null,_mapSize:cc.SizeZero(),_tileSize:cc.SizeZero(),_layers:null,_tileSets:null,_objectGroups:null,_parentElement:null,_parentGID:null,_layerAttribs:0,_storingCharacters:!1,_properties:null,_TMXFileName:null,_currentString:null,_tileProperties:[],getOrientation:function(){return this._orientation},setOrientation:function(a){this._orientation=a},getMapSize:function(){return this._mapSize},setMapSize:function(a){this._mapSize=a},getTileSize:function(){return this._tileSize},
setTileSize:function(a){this._tileSize=a},getLayers:function(){return this._layers},setLayers:function(a){this._layers.push(a)},getTilesets:function(){return this._tileSets},setTilesets:function(a){this._tileSets.push(a)},getObjectGroups:function(){return this._objectGroups},setObjectGroups:function(a){this._objectGroups.push(a)},getParentElement:function(){return this._parentElement},setParentElement:function(a){this._parentElement=a},getParentGID:function(){return this._parentGID},setParentGID:function(a){this._parentGID=
a},getLayerAttribs:function(){return this._layerAttribs},setLayerAttribs:function(a){this._layerAttribs=a},getStoringCharacters:function(){return this._storingCharacters},setStoringCharacters:function(a){this._storingCharacters=a},getProperties:function(){return this._properties},setProperties:function(a){this._properties.push(a)},initWithTMXFile:function(a){this._tileSets=[];this._layers=[];this._TMXFileName=a;this._objectGroups=[];this._properties=[];this._tileProperties=[];this._currentString=
"";this._storingCharacters=!1;this._layerAttribs=cc.TMXLayerAttribNone;this._parentElement=cc.TMXPropertyNone;return this.parseXMLFile(this._TMXFileName)},parseXMLFile:function(a){var b=cc.SAXParser.shareParser().tmxParse(a),c=b.documentElement,d=c.getAttribute("version"),e=c.getAttribute("orientation");if("map"==c.nodeName){"1.0"!=d&&null!==d&&cc.Log("cocos2d: TMXFormat: Unsupported TMX version:"+d);"orthogonal"==e?this.setOrientation(cc.TMXOrientationOrtho):"isometric"==e?this.setOrientation(cc.TMXOrientationIso):
"hexagonal"==e?this.setOrientation(cc.TMXOrientationHex):null!==e&&cc.Log("cocos2d: TMXFomat: Unsupported orientation:"+this.getOrientation());var f=new cc.Size;f.width=parseFloat(c.getAttribute("width"));f.height=parseFloat(c.getAttribute("height"));this.setMapSize(f);f=new cc.Size;f.width=parseFloat(c.getAttribute("tilewidth"));f.height=parseFloat(c.getAttribute("tileheight"));this.setTileSize(f);this.setParentElement(cc.TMXPropertyMap)}var h=c.getElementsByTagName("tileset");"map"!==c.nodeName&&
(h=[],h.push(c));d=0;for(e=h.length;d<e;d++){var g=h[d],f=g.getAttribute("source"),i=a.substring(0,a.lastIndexOf("/")+1);if(f)this.parseXMLFile(i+f);else{var j=new cc.TMXTilesetInfo;j.name=g.getAttribute("name")||"";j.firstGid=parseInt(g.getAttribute("firstgid"))||1;j.spacing=parseInt(g.getAttribute("spacing"))||0;j.margin=parseInt(g.getAttribute("margin"))||0;f=cc.Size;f.width=parseFloat(g.getAttribute("tilewidth"));f.height=parseFloat(g.getAttribute("tileheight"));j._tileSize=f;(g=g.getElementsByTagName("image")[0].getAttribute("source"))&&
(g=i+g);j.sourceImage=g;this.setTilesets(j)}}if(a=c.getElementsByTagName("tile")){d=0;for(e=a.length;d<e;d++)h=this.getTilesets()[0],g=a[d],this.setParentGID(h.firstGid+parseInt(g.getAttribute("id"))),this.setTileProperties(this.getParentGID()),this.setParentElement(cc.TMXPropertyTile)}if(g=c.getElementsByTagName("layer")){d=0;for(e=g.length;d<e;d++){i=g[d];h=i.getElementsByTagName("data")[0];a=new cc.TMXLayerInfo;a.name=i.getAttribute("name");f=new cc.Size;f.width=parseFloat(i.getAttribute("width"));
f.height=parseFloat(i.getAttribute("height"));a._layerSize=f;f=i.getAttribute("visible");a.visible="0"!=f;f=i.getAttribute("opacity")||1;a._opacity=f?parseInt(255*parseFloat(f)):255;j=parseFloat(i.getAttribute("x"))||0;f=parseFloat(i.getAttribute("y"))||0;a.offset=cc.ccp(j,f);f="";for(i=0;i<h.childNodes.length;i++)f+=h.childNodes[i].nodeValue;h=h.getAttribute("compression");cc.Assert(null==h||"gzip"==h||"zlib"==h,"TMX: unsupported compression method");switch(h){case "gzip":a._tiles=cc.unzipBase64AsArray(f,
4);break;case "zlib":break;case null:case "":a._tiles=cc.Codec.Base64.decodeAsArray(f,4);break;default:cc.Assert(this.getLayerAttribs()!=cc.TMXLayerAttribNone,"TMX tile map: Only base64 and/or gzip/zlib maps are supported")}this.setLayers(a);this.setParentElement(cc.TMXPropertyLayer)}}if(g=c.getElementsByTagName("objectgroup"))for(d=0;d<g.length;d++){a=g[d];e=new cc.TMXObjectGroup;e.setGroupName(a.getAttribute("name"));h=new cc.Point;h.x=parseFloat(a.getAttribute("x"))*this.getTileSize().width||0;
h.y=parseFloat(a.getAttribute("y"))*this.getTileSize().height||0;e.setPositionOffset(h);if(h=a.querySelectorAll("object"))for(i=0;i<h.length;i++)j=h[i],a={},a.name=j.getAttribute("name")||"",a.type=j.getAttribute("type")||"",a.x=parseInt(j.getAttribute("x")||0)+e.getPositionOffset().x,f=parseInt(j.getAttribute("y")||0)+e.getPositionOffset().y,f=parseInt(this.getMapSize().height*this.getTileSize().height)-f-parseInt(j.getAttribute("height")),a.y=f,a.width=parseInt(j.getAttribute("width")),a.height=
parseInt(j.getAttribute("height")),e.setObjects(a),this.setParentElement(cc.TMXPropertyObject);this.setObjectGroups(e);this.setParentElement(cc.TMXPropertyObjectGroup)}if(b=b.querySelectorAll("map > properties > property"))for(d=0;d<b.length;d++)g=b[d],this.getParentElement()==cc.TMXPropertyNone?cc.Log("TMX tile map: Parent element is unsupported. Cannot add property named "+g.getAttribute("name")+" with value "+g.getAttribute("value")):this.getParentElement()==cc.TMXPropertyMap?(h=new String(g.getAttribute("value")),
g=g.getAttribute("name"),this.getProperties()[g]=h):this.getParentElement()==cc.TMXPropertyLayer?(a=this.getLayers()[0],h=new String(g.getAttribute("value")),g=g.getAttribute("name"),a.getProperties()[g]=h):this.getParentElement()==cc.TMXPropertyObjectGroup?(e=this.getObjectGroups()[0],h=new String(g.getAttribute("value")),g=g.getAttribute("name"),e.getProperties()[g]=h):this.getParentElement()==cc.TMXPropertyObject?(e=this.getObjectGroups()[0],a=e.getObjects()[0],e=g.getAttribute("name"),g=new String(g.getAttribute("value")),
a[e]=g):this.getParentElement()==cc.TMXPropertyTile&&(a=this.getTileProperties()[this.getParentGID()],e=g.getAttribute("name"),g=new String(g.getAttribute("name")),a[e]=g);return c},getTileProperties:function(){return this._tileProperties},setTileProperties:function(a){this._tileProperties[a]={}},getCurrentString:function(){return this._currentString},setCurrentString:function(a){this._currentString=a},getTMXFileName:function(){return this._TMXFileName},setTMXFileName:function(a){this._TMXFileName=
a}});cc.TMXMapInfo.create=function(a){var b=new cc.TMXMapInfo;return b.initWithTMXFile(a)?b:null};cc.TMXObjectGroup=cc.Class.extend({_groupName:"",_positionOffset:cc.PointZero(),_properties:null,_objects:null,ctor:function(){this._properties=[];this._objects=[]},getPositionOffset:function(){return this._positionOffset},setPositionOffset:function(a){this._positionOffset=a},getProperties:function(){return this._properties},setProperties:function(a){this._properties.push(a)},getGroupName:function(){return this._groupName.toString()},setGroupName:function(a){this._groupName=a},propertyNamed:function(a){return this._properties[a]},
objectNamed:function(a){if(this._objects&&0<this._objects.length)for(var b=0,c=this._objects.length;b<c;b++){var d=this._objects[b].name;if(d&&d==a)return this._objects[b]}return null},getObjects:function(){return this._objects},setObjects:function(a){this._objects.push(a)}});cc.TMXLayer=cc.SpriteBatchNode.extend({_layerSize:cc.SizeZero(),_mapTileSize:cc.SizeZero(),_tiles:null,_tileSet:null,_layerOrientation:null,_properties:null,_layerName:"",_opacity:255,_minGID:null,_maxGID:null,_vertexZvalue:null,_useAutomaticVertexZ:null,_alphaFuncValue:null,_reusedTile:null,_atlasIndexArray:null,_contentScaleFactor:null,ctor:function(){this._super();this._children=[];this._descendants=[];this._isUseCache=!0},getLayerSize:function(){return this._layerSize},setLayerSize:function(a){this._layerSize=
a},getMapTileSize:function(){return this._mapTileSize},setMapTileSize:function(a){this._mapTileSize=a},getTiles:function(){return this._tiles},setTiles:function(a){this._tiles=a},getTileSet:function(){return this._tileSet},setTileSet:function(a){this._tileSet=a},getLayerOrientation:function(){return this._layerOrientation},setLayerOrientation:function(a){this._layerOrientation=a},getProperties:function(){return this._properties},setProperties:function(a){this._properties=a},initWithTilesetInfo:function(a,
b,c){var d=b._layerSize,d=0.35*parseInt(d.width*d.height)+1,e=null;a&&(e=cc.TextureCache.sharedTextureCache().addImage(a.sourceImage.toString()));return this.initWithTexture(e,d)?(this._layerName=b.name,this._layerSize=b._layerSize,this._tiles=b._tiles,this._minGID=b._minGID,this._maxGID=b._maxGID,this._opacity=b._opacity,this._properties=b.getProperties(),this._contentScaleFactor=cc.Director.sharedDirector().getContentScaleFactor(),this._tileSet=a,this._mapTileSize=c.getTileSize(),this._layerOrientation=
c.getOrientation(),this.setPosition(this._calculateLayerOffset(b.offset)),this._atlasIndexArray=[],this.setContentSizeInPixels(cc.SizeMake(this._layerSize.width*this._mapTileSize.width,this._layerSize.height*this._mapTileSize.height)),this._mapTileSize.width/=this._contentScaleFactor,this._mapTileSize.height/=this._contentScaleFactor,this._useAutomaticVertexZ=!1,this._alphaFuncValue=this._vertexZvalue=0,!0):!1},releaseMap:function(){this._tiles&&(this._tiles=null);this._atlasIndexArray&&(this._atlasIndexArray=
null)},tileAt:function(a){cc.Assert(a.x<this._layerSize.width&&a.y<this._layerSize.height&&0<=a.x&&0<=a.y,"TMXLayer: invalid position");cc.Assert(this._tiles&&this._atlasIndexArray,"TMXLayer: the tiles map has been released");var b=null,c=this.tileGIDAt(a);if(c){var d=a.x+a.y*this._layerSize.width,b=this.getChildByTag(d);b||(c=this._tileSet.rectForGID(c),c=cc.RectMake(c.origin.x/this._contentScaleFactor,c.origin.y/this._contentScaleFactor,c.size.width/this._contentScaleFactor,c.size.height/this._contentScaleFactor),
b=new cc.Sprite,b.initWithBatchNode(this,c),b.setPosition(this.positionAt(a)),b.setVertexZ(this._vertexZForPos(a)),b.setAnchorPoint(cc.PointZero()),b.setOpacity(this._opacity),a=this._atlasIndexForExistantZ(d),this.addSpriteWithoutQuad(b,a,d))}return b},tileGIDAt:function(a){cc.Assert(a.x<this._layerSize.width&&a.y<this._layerSize.height&&0<=a.x&&0<=a.y,"TMXLayer: invalid position");cc.Assert(this._tiles&&this._atlasIndexArray,"TMXLayer: the tiles map has been released");return this._tiles[a.x+a.y*
this._layerSize.width]},setTileGID:function(a,b){cc.Assert(b.x<this._layerSize.width&&b.y<this._layerSize.height&&0<=b.x&&0<=b.y,"TMXLayer: invalid position");cc.Assert(this._tiles&&this._atlasIndexArray,"TMXLayer: the tiles map has been released");cc.Assert(0!==a||!(a>=this._tileSet.firstGid),"TMXLayer: invalid gid:"+a);this._setNodeDirtyForCache();var c=this.tileGIDAt(b);if(c!=a)if(0==a)this.removeTileAt(b);else if(0==c)this._insertTileForGID(a,b);else{var c=b.x+b.y*this._layerSize.width,d=this.getChildByTag(c);
if(d){var e=this._tileSet.rectForGID(a),e=cc.RectMake(e.origin.x/this._contentScaleFactor,e.origin.y/this._contentScaleFactor,e.size.width/this._contentScaleFactor,e.size.height/this._contentScaleFactor);d.setTextureRectInPixels(e,!1,e.size);this._tiles[c]=a}else this._updateTileForGID(a,b)}},removeTileAt:function(a){cc.Assert(a.x<this._layerSize.width&&a.y<this._layerSize.height&&0<=a.x&&0<=a.y,"TMXLayer: invalid position");cc.Assert(this._tiles&&this._atlasIndexArray,"TMXLayer: the tiles map has been released");
this._setNodeDirtyForCache();if(this.tileGIDAt(a)){var b=a.x+a.y*this._layerSize.width,a=this._atlasIndexForExistantZ(b);this._tiles[b]=0;cc.ArrayRemoveObjectAtIndex(this._atlasIndexArray,a);if(b=this.getChildByTag(b))this.removeChild(b,!0);else if(this._textureAtlas.removeQuadAtIndex(a),this._children)for(var b=0,c=this._children.length;b<c;b++){var d=this._children[b];if(d){var e=d.getAtlasIndex();e>=a&&d.setAtlasIndex(e-1)}}}},positionAt:function(a){var b=cc.PointZero();switch(this._layerOrientation){case cc.TMXOrientationOrtho:b=
this._positionForOrthoAt(a);break;case cc.TMXOrientationIso:b=this._positionForIsoAt(a);break;case cc.TMXOrientationHex:b=this._positionForHexAt(a)}return b},propertyNamed:function(a){return this._properties[a]},setupTiles:function(){var a=this._textureAtlas.getTexture();this._tileSet.imageSize=new cc.Size(a.width,a.height);this._parseInternalProperties();this._setNodeDirtyForCache();for(a=0;a<this._layerSize.height;a++)for(var b=0;b<this._layerSize.width;b++){var c=this._tiles[b+this._layerSize.width*
a];0!=c&&(this._appendTileForGID(c,cc.ccp(b,a)),this._minGID=Math.min(c,this._minGID),this._maxGID=Math.max(c,this._maxGID))}cc.Assert(this._maxGID>=this._tileSet.firstGid&&this._minGID>=this._tileSet.firstGid,"TMX: Only 1 tilset per layer is supported")},addChild:function(){cc.Assert(0,"addChild: is not supported on cc.TMXLayer. Instead use setTileGID:at:/tileAt:")},removeChild:function(a,b){if(a){cc.Assert(cc.ArrayContainsObject(this._children,a),"Tile does not belong to TMXLayer");this._setNodeDirtyForCache();
var c=cc.ArrayGetIndexOfObject(this._children,a);this._tiles[this._atlasIndexArray[c]]=0;cc.ArrayRemoveObjectAtIndex(this._atlasIndexArray,c);this._super(a,b)}},draw:function(){this._super()},getLayerName:function(){return this._layerName.toString()},setLayerName:function(a){this._layerName=a},_positionForIsoAt:function(a){return cc.PointMake(this._mapTileSize.width/2*(this._layerSize.width+a.x-a.y-1),this._mapTileSize.height/2*(2*this._layerSize.height-a.x-a.y-2))},_positionForOrthoAt:function(a){return cc.PointMake(a.x*
this._mapTileSize.width,(this._layerSize.height-a.y-1)*this._mapTileSize.height)},_positionForHexAt:function(a){var b=0;1==a.x%2&&(b=-this._mapTileSize.height/2);return cc.PointMake(3*a.x*this._mapTileSize.width/4,(this._layerSize.height-a.y-1)*this._mapTileSize.height+b)},_calculateLayerOffset:function(a){var b=cc.PointZero();switch(this._layerOrientation){case cc.TMXOrientationOrtho:b=cc.ccp(a.x*this._mapTileSize.width,-a.y*this._mapTileSize.height);break;case cc.TMXOrientationIso:b=cc.ccp(this._mapTileSize.width/
2*(a.x-a.y),this._mapTileSize.height/2*(-a.x-a.y));break;case cc.TMXOrientationHex:b=cc.ccp(0,0),cc.Log("cocos2d:offset for hexagonal map not implemented yet")}return b},_appendTileForGID:function(a,b){var c=this._tileSet.rectForGID(a),c=cc.RectMake(c.origin.x/this._contentScaleFactor,c.origin.y/this._contentScaleFactor,c.size.width/this._contentScaleFactor,c.size.height/this._contentScaleFactor);this._setNodeDirtyForCache();var d=b.x+b.y*this._layerSize.width;this._reusedTile=new cc.Sprite;this._reusedTile.setParent(this);
this._reusedTile.initWithBatchNode(this,c);this._reusedTile.setPosition(this.positionAt(b));this._reusedTile.setVertexZ(this._vertexZForPos(b));this._reusedTile.setAnchorPoint(cc.PointZero());this._reusedTile.setOpacity(this._opacity);this._reusedTile.setTag(d);c=this._atlasIndexArray.length;this.addQuadFromSprite(this._reusedTile,c);this._atlasIndexArray=cc.ArrayAppendObjectToIndex(this._atlasIndexArray,d,c);return this._reusedTile},_insertTileForGID:function(a,b){var c=this._tileSet.rectForGID(a),
c=cc.RectMake(c.origin.x/this._contentScaleFactor,c.origin.y/this._contentScaleFactor,c.size.width/this._contentScaleFactor,c.size.height/this._contentScaleFactor),d=parseInt(b.x+b.y*this._layerSize.width);this._setNodeDirtyForCache();this._reusedTile=new cc.Sprite;this._reusedTile.setParent(this);this._reusedTile.initWithBatchNode(this,c);this._reusedTile.setPositionInPixels(this.positionAt(b));this._reusedTile.setVertexZ(this._vertexZForPos(b));this._reusedTile.setAnchorPoint(cc.PointZero());this._reusedTile.setOpacity(this._opacity);
c=this._atlasIndexForNewZ(d);this.addQuadFromSprite(this._reusedTile,c);this._atlasIndexArray=cc.ArrayAppendObjectToIndex(this._atlasIndexArray,d,c);if(this._children)for(var e=0,f=this._children.length;e<f;e++){var h=this._children[e];if(h){var g=h.getAtlasIndex();g>=c&&h.setAtlasIndex(g+1)}}this._tiles[d]=a;return this._reusedTile},_updateTileForGID:function(a,b){var c=this._tileSet.rectForGID(a),c=cc.RectMake(c.origin.x/this._contentScaleFactor,c.origin.y/this._contentScaleFactor,c.size.width/
this._contentScaleFactor,c.size.height/this._contentScaleFactor),d=b.x+b.y*this._layerSize.width;this._setNodeDirtyForCache();this._reusedTile=new cc.Sprite;this._reusedTile.initWithBatchNode(this,c);this._reusedTile.setPositionInPixels(this.positionAt(b));this._reusedTile.setVertexZ(this._vertexZForPos(b));this._reusedTile.setAnchorPoint(cc.PointZero());this._reusedTile.setOpacity(this._opacity);this._reusedTile.setAtlasIndex(this._atlasIndexForExistantZ(d));this._reusedTile.setDirty(!0);this._reusedTile.updateTransform();
this._tiles[d]=a;return this._reusedTile},_parseInternalProperties:function(){var a=this.propertyNamed("cc_vertexz");a&&("automatic"==a?this._useAutomaticVertexZ=!0:this._vertexZvalue=parseInt(a));if(a=this.propertyNamed("cc_alpha_func"))this._alphaFuncValue=parseInt(a)},_vertexZForPos:function(a){var b=0,c=0;if(this._useAutomaticVertexZ)switch(this._layerOrientation){case cc.TMXOrientationIso:c=this._layerSize.width+this._layerSize.height;b=-(c-(a.x+a.y));break;case cc.TMXOrientationOrtho:b=-(this._layerSize.height-
a.y);break;case cc.TMXOrientationHex:cc.Assert(0,"TMX Hexa zOrder not supported");break;default:cc.Assert(0,"TMX invalid value")}else b=this._vertexZvalue;return b},_atlasIndexForExistantZ:function(a){var b;if(this._atlasIndexArray)for(var c=0;c<this._atlasIndexArray.length&&!(b=this._atlasIndexArray[c],b==a);c++);cc.Assert(b,"TMX atlas index not found. Shall not happen");return c},_atlasIndexForNewZ:function(a){for(var b=0;b<this._atlasIndexArray.length&&!(a<this._atlasIndexArray[b]);b++);return b}});
cc.TMXLayer.create=function(a,b,c){var d=new cc.TMXLayer;return d.initWithTilesetInfo(a,b,c)?d:null};cc.compareInts=function(a,b){return a-b};cc.PointObject=cc.Class.extend({_ratio:null,_offset:null,_child:null,getRatio:function(){return this._ratio},setRatio:function(a){this._ratio=a},getOffset:function(){return this._offset},setOffset:function(a){this._offset=a},getChild:function(){return this._child},setChild:function(a){this._child=a},initWithCCPoint:function(a,b){this._ratio=a;this._offset=b;this._child=null;return!0}});cc.PointObject.create=function(a,b){var c=new cc.PointObject;c.initWithCCPoint(a,b);return c};
cc.ParallaxNode=cc.Node.extend({_lastPosition:null,_parallaxArray:[],getParallaxArray:function(){return this._parallaxArray},setParallaxArray:function(a){this._parallaxArray=a},ctor:function(){this._parallaxArray=[];this._lastPosition=cc.PointMake(-100,-100)},addChild:function(a,b,c,d){if(3==arguments.length)cc.Assert(0,"ParallaxNode: use addChild:z:parallaxRatio:positionOffset instead");else{cc.Assert(null!=a,"Argument must be non-nil");var e=cc.PointObject.create(c,d);e.setChild(a);this._parallaxArray.push(e);
e=this._position;e.x=e.x*c.x+d.x;e.y=e.y*c.y+d.y;a.setPosition(e);this._super(a,b,a.getTag())}},removeChild:function(a,b){for(var c=0;c<this._parallaxArray.length;c++)if(this._parallaxArray[c].getChild().isEqual(a)){this._parallaxArray.splice(c,1);break}this._super(a,b)},removeAllChildrenWithCleanup:function(a){this._parallaxArray=[];this._super(a)},visit:function(){var a=this._absolutePosition();if(!cc.Point.CCPointEqualToPoint(a,this._lastPosition)){for(var b=0;b<this._parallaxArray.length;b++){var c=
this._parallaxArray[b],d=-a.x+a.x*c.getRatio().x+c.getOffset().x,e=-a.y+a.y*c.getRatio().y+c.getOffset().y;c.getChild().setPosition(cc.ccp(d,e))}this._lastPosition=a}this._super()},_absolutePosition:function(){for(var a=this._position,b=this;null!=b.getParent();)b=b.getParent(),a=cc.ccpAdd(a,b.getPosition());return a}});cc.ParallaxNode.create=function(){return new cc.ParallaxNode};cc.sound=!0;cc.capabilities={mp3:!1,ogg:!1,wav:!1};
cc.AudioManager=cc.Class.extend({_initialized:!1,_supportedFormat:["mp3","ogg","wav"],_requestedFormat:null,_sound_enable:!0,_audioList:{},_activeAudioExt:-1,_bgmList:{},_isBgmPlaying:!1,_playingBgm:null,_effectsVolume:1,ctor:function(){if(!this._initialized){var a=document.createElement("audio");a.canPlayType&&(cc.capabilities.mp3="no"!=a.canPlayType("audio/mpeg")&&""!=a.canPlayType("audio/mpeg"),cc.capabilities.ogg="no"!=a.canPlayType('audio/ogg; codecs="vorbis"')&&""!=a.canPlayType('audio/ogg; codecs="vorbis"'),
cc.capabilities.wav="no"!=a.canPlayType('audio/wav; codecs="1"')&&""!=a.canPlayType('audio/wav; codecs="1"'),cc.sound=cc.capabilities.mp3||cc.capabilities.ogg||cc.capabilities.wav);this._initialized=!0}},init:function(a){this._requestedFormat=a?new String(a):new String("mp3");this._activeAudioExt=this._getSupportedAudioFormat();return this._sound_enable},_getSupportedAudioFormat:function(){var a=0;if(cc.sound){if(-1!=this._requestedFormat.search(/mp3/i)&&cc.capabilities.mp3)return this._supportedFormat[a];
if(-1!=this._requestedFormat.search(/ogg/i)&&cc.capabilities.ogg||-1!=this._requestedFormat.search(/wav/i)&&cc.capabilities.wav)return this._supportedFormat[++a];this._sound_enable=!1;return-1}this._sound_enable=!1},preloadBackgroundMusic:function(a){if(this._sound_enable){if(-1==this._activeAudioExt)return;var b=new Audio(a+"."+this._activeAudioExt);b.preload="auto";b.addEventListener("canplaythrough",function(a){this.removeEventListener("canplaythrough",arguments.callee,!1)},!1);b.addEventListener("error",
function(){cc.Loader.shareLoader().onResLoadingErr()},!1);b.addEventListener("playing",function(){cc.sharedEngine._isBgmPlaying=!0},!1);b.addEventListener("pause",function(){cc.sharedEngine._isBgmPlaying=!1},!1);b.load();this._bgmList[a]=b}cc.Loader.shareLoader().onResLoaded()},playBackgroundMusic:function(a,b){this._bgmList[this._playingBgm]&&this._bgmList[this._playingBgm].pause();this._playingBgm=a;this._bgmList[this._playingBgm]&&(this._bgmList[this._playingBgm].loop=b||!1,this._bgmList[this._playingBgm].play())},
stopBackgroundMusic:function(a){this._bgmList[this._playingBgm]&&(this._bgmList[this._playingBgm].pause(),this._bgmList[this._playingBgm].currentTime=0,a&&this._bgmList.hasOwnProperty(this._playingBgm)&&delete this._bgmList[this._playingBgm])},pauseBackgroundMusic:function(){this._bgmList[this._playingBgm]&&this._bgmList[this._playingBgm].pause()},resumeBackgroundMusic:function(){this._bgmList[this._playingBgm]&&this._bgmList[this._playingBgm].play()},rewindBackgroundMusic:function(){this._bgmList[this._playingBgm]&&
(this._bgmList[this._playingBgm].currentTime=0,this._bgmList[this._playingBgm].play())},willPlayBackgroundMusic:function(){return!1},isBackgroundMusicPlaying:function(){return cc.sharedEngine._isBgmPlaying},getBackgroundMusicVolume:function(){return this._bgmList[this._playingBgm]?this._bgmList[this._playingBgm].volume:0},setBackgroundMusicVolume:function(a){this._bgmList[this._playingBgm]&&(this._bgmList[this._playingBgm].volume=1<a?1:0>a?0:a)},getEffectsVolume:function(){return this._effectsVolume},
setEffectsVolume:function(a){this._effectsVolume=1<a?1:0>a?0:a;if(this._audioList)for(var b in this._audioList)this._audioList[b].volume=this._effectsVolume},playEffect:function(a,b){var c=this._getEffectList(a);c&&(c.loop=b||!1,c.play());return a},pauseEffect:function(a){this._audioList[a]&&this._audioList[a].pause()},pauseAllEffects:function(){if(this._audioList)for(var a in this._audioList)this._audioList[a].pause()},resumeEffect:function(a){this._audioList[a]&&this._audioList[a].play()},resumeAllEffects:function(){if(this._audioList)for(var a in this._audioList)this._audioList[a].play()},
stopEffect:function(a){this._audioList[a]&&(this._audioList[a].pause(),this._audioList[a].currentTime=0)},stopAllEffects:function(){if(this._audioList)for(var a in this._audioList)this._audioList[a].pause(),this._audioList[a].currentTime=0},preloadEffect:function(a){if(this._sound_enable){if(-1==this._activeAudioExt)return;var b=new Audio(a+"."+this._activeAudioExt);b.preload="auto";b.addEventListener("canplaythrough",function(a){this.removeEventListener("canplaythrough",arguments.callee,!1)},!1);
b.addEventListener("error",function(){cc.Loader.shareLoader().onResLoadingErr()},!1);b.load();this._audioList[a]=b}cc.Loader.shareLoader().onResLoaded()},unloadEffect:function(a){this._audioList.hasOwnProperty(a)&&delete this._audioList[a]},_getEffectList:function(a){return null!=this._audioList?this._audioList[a]:null},end:function(){this.stopBackgroundMusic();this.stopAllEffects()}});cc.AudioManager.sharedEngine=function(){cc.sharedEngine||(cc.sharedEngine=new cc.AudioManager);return cc.sharedEngine};